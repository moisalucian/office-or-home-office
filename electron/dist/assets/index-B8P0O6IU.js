(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function uE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qd={exports:{}},Fr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function dE(){if(d_)return Fr;d_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Fr.Fragment=t,Fr.jsx=i,Fr.jsxs=i,Fr}var f_;function fE(){return f_||(f_=1,Qd.exports=dE()),Qd.exports}var v=fE(),Xd={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function hE(){if(h_)return ce;h_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function S(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,q={};function K(w,j,F){this.props=w,this.context=j,this.refs=q,this.updater=F||R}K.prototype.isReactComponent={},K.prototype.setState=function(w,j){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,j,"setState")},K.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function ve(){}ve.prototype=K.prototype;function Q(w,j,F){this.props=w,this.context=j,this.refs=q,this.updater=F||R}var z=Q.prototype=new ve;z.constructor=Q,k(z,K.prototype),z.isPureReactComponent=!0;var W=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},Ne=Object.prototype.hasOwnProperty;function He(w,j,F,V,Z,ye){return F=ye.ref,{$$typeof:s,type:w,key:j,ref:F!==void 0?F:null,props:ye}}function Qe(w,j){return He(w.type,j,void 0,void 0,void 0,w.props)}function ut(w){return typeof w=="object"&&w!==null&&w.$$typeof===s}function et(w){var j={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(F){return j[F]})}var Ee=/\/+/g;function Xe(w,j){return typeof w=="object"&&w!==null&&w.key!=null?et(""+w.key):j.toString(36)}function gn(){}function _n(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(gn,gn):(w.status="pending",w.then(function(j){w.status==="pending"&&(w.status="fulfilled",w.value=j)},function(j){w.status==="pending"&&(w.status="rejected",w.reason=j)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function qe(w,j,F,V,Z){var ye=typeof w;(ye==="undefined"||ye==="boolean")&&(w=null);var te=!1;if(w===null)te=!0;else switch(ye){case"bigint":case"string":case"number":te=!0;break;case"object":switch(w.$$typeof){case s:case t:te=!0;break;case y:return te=w._init,qe(te(w._payload),j,F,V,Z)}}if(te)return Z=Z(w),te=V===""?"."+Xe(w,0):V,W(Z)?(F="",te!=null&&(F=te.replace(Ee,"$&/")+"/"),qe(Z,j,F,"",function(an){return an})):Z!=null&&(ut(Z)&&(Z=Qe(Z,F+(Z.key==null||w&&w.key===Z.key?"":(""+Z.key).replace(Ee,"$&/")+"/")+te)),j.push(Z)),1;te=0;var tt=V===""?".":V+":";if(W(w))for(var ke=0;ke<w.length;ke++)V=w[ke],ye=tt+Xe(V,ke),te+=qe(V,j,F,ye,Z);else if(ke=S(w),typeof ke=="function")for(w=ke.call(w),ke=0;!(V=w.next()).done;)V=V.value,ye=tt+Xe(V,ke++),te+=qe(V,j,F,ye,Z);else if(ye==="object"){if(typeof w.then=="function")return qe(_n(w),j,F,V,Z);throw j=String(w),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return te}function O(w,j,F){if(w==null)return w;var V=[],Z=0;return qe(w,V,"","",function(ye){return j.call(F,ye,Z++)}),V}function G(w){if(w._status===-1){var j=w._result;j=j(),j.then(function(F){(w._status===0||w._status===-1)&&(w._status=1,w._result=F)},function(F){(w._status===0||w._status===-1)&&(w._status=2,w._result=F)}),w._status===-1&&(w._status=0,w._result=j)}if(w._status===1)return w._result.default;throw w._result}var J=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function we(){}return ce.Children={map:O,forEach:function(w,j,F){O(w,function(){j.apply(this,arguments)},F)},count:function(w){var j=0;return O(w,function(){j++}),j},toArray:function(w){return O(w,function(j){return j})||[]},only:function(w){if(!ut(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ce.Component=K,ce.Fragment=i,ce.Profiler=o,ce.PureComponent=Q,ce.StrictMode=r,ce.Suspense=m,ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,ce.__COMPILER_RUNTIME={__proto__:null,c:function(w){return se.H.useMemoCache(w)}},ce.cache=function(w){return function(){return w.apply(null,arguments)}},ce.cloneElement=function(w,j,F){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var V=k({},w.props),Z=w.key,ye=void 0;if(j!=null)for(te in j.ref!==void 0&&(ye=void 0),j.key!==void 0&&(Z=""+j.key),j)!Ne.call(j,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&j.ref===void 0||(V[te]=j[te]);var te=arguments.length-2;if(te===1)V.children=F;else if(1<te){for(var tt=Array(te),ke=0;ke<te;ke++)tt[ke]=arguments[ke+2];V.children=tt}return He(w.type,Z,void 0,void 0,ye,V)},ce.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:u,_context:w},w},ce.createElement=function(w,j,F){var V,Z={},ye=null;if(j!=null)for(V in j.key!==void 0&&(ye=""+j.key),j)Ne.call(j,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(Z[V]=j[V]);var te=arguments.length-2;if(te===1)Z.children=F;else if(1<te){for(var tt=Array(te),ke=0;ke<te;ke++)tt[ke]=arguments[ke+2];Z.children=tt}if(w&&w.defaultProps)for(V in te=w.defaultProps,te)Z[V]===void 0&&(Z[V]=te[V]);return He(w,ye,void 0,void 0,null,Z)},ce.createRef=function(){return{current:null}},ce.forwardRef=function(w){return{$$typeof:p,render:w}},ce.isValidElement=ut,ce.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:G}},ce.memo=function(w,j){return{$$typeof:g,type:w,compare:j===void 0?null:j}},ce.startTransition=function(w){var j=se.T,F={};se.T=F;try{var V=w(),Z=se.S;Z!==null&&Z(F,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(we,J)}catch(ye){J(ye)}finally{se.T=j}},ce.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},ce.use=function(w){return se.H.use(w)},ce.useActionState=function(w,j,F){return se.H.useActionState(w,j,F)},ce.useCallback=function(w,j){return se.H.useCallback(w,j)},ce.useContext=function(w){return se.H.useContext(w)},ce.useDebugValue=function(){},ce.useDeferredValue=function(w,j){return se.H.useDeferredValue(w,j)},ce.useEffect=function(w,j,F){var V=se.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(w,j)},ce.useId=function(){return se.H.useId()},ce.useImperativeHandle=function(w,j,F){return se.H.useImperativeHandle(w,j,F)},ce.useInsertionEffect=function(w,j){return se.H.useInsertionEffect(w,j)},ce.useLayoutEffect=function(w,j){return se.H.useLayoutEffect(w,j)},ce.useMemo=function(w,j){return se.H.useMemo(w,j)},ce.useOptimistic=function(w,j){return se.H.useOptimistic(w,j)},ce.useReducer=function(w,j,F){return se.H.useReducer(w,j,F)},ce.useRef=function(w){return se.H.useRef(w)},ce.useState=function(w){return se.H.useState(w)},ce.useSyncExternalStore=function(w,j,F){return se.H.useSyncExternalStore(w,j,F)},ce.useTransition=function(){return se.H.useTransition()},ce.version="19.1.0",ce}var p_;function Hf(){return p_||(p_=1,Xd.exports=hE()),Xd.exports}var H=Hf();const pE=uE(H);var Wd={exports:{}},Yr={},$d={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function mE(){return m_||(m_=1,function(s){function t(O,G){var J=O.length;O.push(G);e:for(;0<J;){var we=J-1>>>1,w=O[we];if(0<o(w,G))O[we]=G,O[J]=w,J=we;else break e}}function i(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],J=O.pop();if(J!==G){O[0]=J;e:for(var we=0,w=O.length,j=w>>>1;we<j;){var F=2*(we+1)-1,V=O[F],Z=F+1,ye=O[Z];if(0>o(V,J))Z<w&&0>o(ye,V)?(O[we]=ye,O[Z]=J,we=Z):(O[we]=V,O[F]=J,we=F);else if(Z<w&&0>o(ye,J))O[we]=ye,O[Z]=J,we=Z;else break e}}return G}function o(O,G){var J=O.sortIndex-G.sortIndex;return J!==0?J:O.id-G.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var m=[],g=[],y=1,E=null,S=3,R=!1,k=!1,q=!1,K=!1,ve=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function W(O){for(var G=i(g);G!==null;){if(G.callback===null)r(g);else if(G.startTime<=O)r(g),G.sortIndex=G.expirationTime,t(m,G);else break;G=i(g)}}function se(O){if(q=!1,W(O),!k)if(i(m)!==null)k=!0,Ne||(Ne=!0,Xe());else{var G=i(g);G!==null&&qe(se,G.startTime-O)}}var Ne=!1,He=-1,Qe=5,ut=-1;function et(){return K?!0:!(s.unstable_now()-ut<Qe)}function Ee(){if(K=!1,Ne){var O=s.unstable_now();ut=O;var G=!0;try{e:{k=!1,q&&(q=!1,Q(He),He=-1),R=!0;var J=S;try{t:{for(W(O),E=i(m);E!==null&&!(E.expirationTime>O&&et());){var we=E.callback;if(typeof we=="function"){E.callback=null,S=E.priorityLevel;var w=we(E.expirationTime<=O);if(O=s.unstable_now(),typeof w=="function"){E.callback=w,W(O),G=!0;break t}E===i(m)&&r(m),W(O)}else r(m);E=i(m)}if(E!==null)G=!0;else{var j=i(g);j!==null&&qe(se,j.startTime-O),G=!1}}break e}finally{E=null,S=J,R=!1}G=void 0}}finally{G?Xe():Ne=!1}}}var Xe;if(typeof z=="function")Xe=function(){z(Ee)};else if(typeof MessageChannel<"u"){var gn=new MessageChannel,_n=gn.port2;gn.port1.onmessage=Ee,Xe=function(){_n.postMessage(null)}}else Xe=function(){ve(Ee,0)};function qe(O,G){He=ve(function(){O(s.unstable_now())},G)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Qe=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(O){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var J=S;S=G;try{return O()}finally{S=J}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=S;S=O;try{return G()}finally{S=J}},s.unstable_scheduleCallback=function(O,G,J){var we=s.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?we+J:we):J=we,O){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=J+w,O={id:y++,callback:G,priorityLevel:O,startTime:J,expirationTime:w,sortIndex:-1},J>we?(O.sortIndex=J,t(g,O),i(m)===null&&O===i(g)&&(q?(Q(He),He=-1):q=!0,qe(se,J-we))):(O.sortIndex=w,t(m,O),k||R||(k=!0,Ne||(Ne=!0,Xe()))),O},s.unstable_shouldYield=et,s.unstable_wrapCallback=function(O){var G=S;return function(){var J=S;S=G;try{return O.apply(this,arguments)}finally{S=J}}}}(Zd)),Zd}var g_;function gE(){return g_||(g_=1,$d.exports=mE()),$d.exports}var Jd={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function _E(){if(__)return Ct;__=1;var s=Hf();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ct.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(m,g,null,y)},Ct.flushSync=function(m){var g=f.T,y=r.p;try{if(f.T=null,r.p=2,m)return m()}finally{f.T=g,r.p=y,r.d.f()}},Ct.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Ct.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Ct.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):y==="script"&&r.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ct.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Ct.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ct.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Ct.requestFormReset=function(m){r.d.r(m)},Ct.unstable_batchedUpdates=function(m,g){return m(g)},Ct.useFormState=function(m,g,y){return f.H.useFormState(m,g,y)},Ct.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ct.version="19.1.0",Ct}var v_;function vE(){if(v_)return Jd.exports;v_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jd.exports=_E(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function yE(){if(y_)return Yr;y_=1;var s=gE(),t=Hf(),i=vE();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(r(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return p(c),e;if(d===l)return p(c),n;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=c,l=d;else{for(var h=!1,_=c.child;_;){if(_===a){h=!0,a=c,l=d;break}if(_===l){h=!0,l=c,a=d;break}_=_.sibling}if(!h){for(_=d.child;_;){if(_===a){h=!0,a=d,l=c;break}if(_===l){h=!0,l=d,a=c;break}_=_.sibling}if(!h)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),ut=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function Xe(e){return e===null||typeof e!="object"?null:(e=Ee&&e[Ee]||e["@@iterator"],typeof e=="function"?e:null)}var gn=Symbol.for("react.client.reference");function _n(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case K:return"Profiler";case q:return"StrictMode";case se:return"Suspense";case Ne:return"SuspenseList";case ut:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case z:return(e.displayName||"Context")+".Provider";case Q:return(e._context.displayName||"Context")+".Consumer";case W:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case He:return n=e.displayName||null,n!==null?n:_n(e.type)||"Memo";case Qe:n=e._payload,e=e._init;try{return _n(e(n))}catch{}}return null}var qe=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},we=[],w=-1;function j(e){return{current:e}}function F(e){0>w||(e.current=we[w],we[w]=null,w--)}function V(e,n){w++,we[w]=e.current,e.current=n}var Z=j(null),ye=j(null),te=j(null),tt=j(null);function ke(e,n){switch(V(te,n),V(ye,e),V(Z,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Pg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Pg(n),e=Hg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(Z),V(Z,e)}function an(){F(Z),F(ye),F(te)}function Ha(e){e.memoizedState!==null&&V(tt,e);var n=Z.current,a=Hg(n,e.type);n!==a&&(V(ye,e),V(Z,a))}function zt(e){ye.current===e&&(F(Z),F(ye)),tt.current===e&&(F(tt),Hr._currentValue=J)}var xs=Object.prototype.hasOwnProperty,Kt=s.unstable_scheduleCallback,rn=s.unstable_cancelCallback,Ba=s.unstable_shouldYield,Al=s.unstable_requestPaint,vt=s.unstable_now,jc=s.unstable_getCurrentPriorityLevel,es=s.unstable_ImmediatePriority,Va=s.unstable_UserBlockingPriority,ts=s.unstable_NormalPriority,zc=s.unstable_LowPriority,qa=s.unstable_IdlePriority,Pc=s.log,Nl=s.unstable_setDisableYieldValue,ai=null,Nt=null;function vn(e){if(typeof Pc=="function"&&Nl(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ai,e)}catch{}}var de=Math.clz32?Math.clz32:Bc,Hc=Math.log,Rl=Math.LN2;function Bc(e){return e>>>=0,e===0?32:31-(Hc(e)/Rl|0)|0}var Os=256,Dn=4194304;function xn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ga(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,d=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~d,l!==0?c=xn(l):(h&=_,h!==0?c=xn(h):a||(a=_&~e,a!==0&&(c=xn(a))))):(_=l&~d,_!==0?c=xn(_):h!==0?c=xn(h):a||(a=l&~e,a!==0&&(c=xn(a)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:c}function ns(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function yn(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var e=Os;return Os<<=1,(Os&4194048)===0&&(Os=256),e}function Ms(){var e=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),e}function Fa(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Sn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function li(e,n,a,l,c,d){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,b=e.expirationTimes,N=e.hiddenUpdates;for(a=h&~a;0<a;){var M=31-de(a),L=1<<M;_[M]=0,b[M]=-1;var I=N[M];if(I!==null)for(N[M]=null,M=0;M<I.length;M++){var D=I[M];D!==null&&(D.lane&=-536870913)}a&=~L}l!==0&&Il(e,l,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(h&~n))}function Il(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-de(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Ya(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-de(a),c=1<<l;c&n|e[l]&n&&(e[l]|=n),a&=~c}}function ks(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Us(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ka(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:a_(e.type))}function Qa(e,n){var a=G.p;try{return G.p=e,n()}finally{G.p=a}}var bn=Math.random().toString(36).slice(2),dt="__reactFiber$"+bn,Et="__reactProps$"+bn,oi="__reactContainer$"+bn,Xa="__reactEvents$"+bn,Vc="__reactListeners$"+bn,qc="__reactHandles$"+bn,Dl="__reactResources$"+bn,ci="__reactMarker$"+bn;function Wa(e){delete e[dt],delete e[Et],delete e[Xa],delete e[Vc],delete e[qc]}function ui(e){var n=e[dt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[oi]||a[dt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Gg(e);e!==null;){if(a=e[dt])return a;e=Gg(e)}return n}e=a,a=e.parentNode}return null}function di(e){if(e=e[dt]||e[oi]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function fi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function On(e){var n=e[Dl];return n||(n=e[Dl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function We(e){e[ci]=!0}var $a=new Set,xl={};function x(e,n){P(e,n),P(e+"Capture",n)}function P(e,n){for(xl[e]=n,e=0;e<n.length;e++)$a.add(n[e])}var oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$={},ae={};function Se(e){return xs.call(ae,e)?!0:xs.call($,e)?!1:oe.test(e)?ae[e]=!0:($[e]=!0,!1)}function Be(e,n,a){if(Se(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function nt(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function at(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}var wt,Za;function Mn(e){if(wt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);wt=n&&n[1]||"",Za=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+e+Za}var Ls=!1;function hi(e,n){if(!e||Ls)return"";Ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(D){var I=D}Reflect.construct(e,[],L)}else{try{L.call()}catch(D){I=D}e.call(L.prototype)}}else{try{throw Error()}catch(D){I=D}(L=e())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(D){if(D&&I&&typeof D.stack=="string")return[D.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),h=d[0],_=d[1];if(h&&_){var b=h.split(`
`),N=_.split(`
`);for(c=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;if(l===b.length||c===N.length)for(l=b.length-1,c=N.length-1;1<=l&&0<=c&&b[l]!==N[c];)c--;for(;1<=l&&0<=c;l--,c--)if(b[l]!==N[c]){if(l!==1||c!==1)do if(l--,c--,0>c||b[l]!==N[c]){var M=`
`+b[l].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=l&&0<=c);break}}}finally{Ls=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Mn(a):""}function Gc(e){switch(e.tag){case 26:case 27:case 5:return Mn(e.type);case 16:return Mn("Lazy");case 13:return Mn("Suspense");case 19:return Mn("SuspenseList");case 0:case 15:return hi(e.type,!1);case 11:return hi(e.type.render,!1);case 1:return hi(e.type,!0);case 31:return Mn("Activity");default:return""}}function Mh(e){try{var n="";do n+=Gc(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function a0(e){var n=kh(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,d=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(h){l=""+h,d.call(this,h)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ol(e){e._valueTracker||(e._valueTracker=a0(e))}function Uh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=kh(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Ml(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var r0=/[\n"\\]/g;function Xt(e){return e.replace(r0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Fc(e,n,a,l,c,d,h,_){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),n!=null?h==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qt(n)):e.value!==""+Qt(n)&&(e.value=""+Qt(n)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),n!=null?Yc(e,h,Qt(n)):a!=null?Yc(e,h,Qt(a)):l!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Qt(_):e.removeAttribute("name")}function Lh(e,n,a,l,c,d,h,_){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;a=a!=null?""+Qt(a):"",n=n!=null?""+Qt(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function Yc(e,n,a){n==="number"&&Ml(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function js(e,n,a,l){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Qt(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function jh(e,n,a){if(n!=null&&(n=""+Qt(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Qt(a):""}function zh(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(qe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Qt(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function zs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var l0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||l0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Hh(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&a[c]!==l&&Ph(e,c,l)}else for(var d in n)n.hasOwnProperty(d)&&Ph(e,d,n[d])}function Kc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),c0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(e){return c0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Qc=null;function Xc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ps=null,Hs=null;function Bh(e){var n=di(e);if(n&&(e=n.stateNode)){var a=e[Et]||null;e:switch(e=n.stateNode,n.type){case"input":if(Fc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Xt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var c=l[Et]||null;if(!c)throw Error(r(90));Fc(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&Uh(l)}break e;case"textarea":jh(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&js(e,!!a.multiple,n,!1)}}}var Wc=!1;function Vh(e,n,a){if(Wc)return e(n,a);Wc=!0;try{var l=e(n);return l}finally{if(Wc=!1,(Ps!==null||Hs!==null)&&(So(),Ps&&(n=Ps,e=Hs,Hs=Ps=null,Bh(n),e)))for(n=0;n<e.length;n++)Bh(e[n])}}function Ja(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=!1;if(kn)try{var er={};Object.defineProperty(er,"passive",{get:function(){$c=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{$c=!1}var pi=null,Zc=null,Ul=null;function qh(){if(Ul)return Ul;var e,n=Zc,a=n.length,l,c="value"in pi?pi.value:pi.textContent,d=c.length;for(e=0;e<a&&n[e]===c[e];e++);var h=a-e;for(l=1;l<=h&&n[a-l]===c[d-l];l++);return Ul=c.slice(e,1<l?1-l:void 0)}function Ll(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function Gh(){return!1}function xt(e){function n(a,l,c,d,h){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=h,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?jl:Gh,this.isPropagationStopped=Gh,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),n}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=xt(is),tr=y({},is,{view:0,detail:0}),u0=xt(tr),Jc,eu,nr,Pl=y({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nr&&(nr&&e.type==="mousemove"?(Jc=e.screenX-nr.screenX,eu=e.screenY-nr.screenY):eu=Jc=0,nr=e),Jc)},movementY:function(e){return"movementY"in e?e.movementY:eu}}),Fh=xt(Pl),d0=y({},Pl,{dataTransfer:0}),f0=xt(d0),h0=y({},tr,{relatedTarget:0}),tu=xt(h0),p0=y({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),m0=xt(p0),g0=y({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_0=xt(g0),v0=y({},is,{data:0}),Yh=xt(v0),y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=b0[e])?!!n[e]:!1}function nu(){return E0}var w0=y({},tr,{key:function(e){if(e.key){var n=y0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return e.type==="keypress"?Ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T0=xt(w0),C0=y({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=xt(C0),A0=y({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),N0=xt(A0),R0=y({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),I0=xt(R0),D0=y({},Pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),x0=xt(D0),O0=y({},is,{newState:0,oldState:0}),M0=xt(O0),k0=[9,13,27,32],iu=kn&&"CompositionEvent"in window,ir=null;kn&&"documentMode"in document&&(ir=document.documentMode);var U0=kn&&"TextEvent"in window&&!ir,Qh=kn&&(!iu||ir&&8<ir&&11>=ir),Xh=" ",Wh=!1;function $h(e,n){switch(e){case"keyup":return k0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function L0(e,n){switch(e){case"compositionend":return Zh(n);case"keypress":return n.which!==32?null:(Wh=!0,Xh);case"textInput":return e=n.data,e===Xh&&Wh?null:e;default:return null}}function j0(e,n){if(Bs)return e==="compositionend"||!iu&&$h(e,n)?(e=qh(),Ul=Zc=pi=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Qh&&n.locale!=="ko"?null:n.data;default:return null}}var z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!z0[e.type]:n==="textarea"}function ep(e,n,a,l){Ps?Hs?Hs.push(l):Hs=[l]:Ps=l,n=Ao(n,"onChange"),0<n.length&&(a=new zl("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var sr=null,ar=null;function P0(e){kg(e,0)}function Hl(e){var n=fi(e);if(Uh(n))return e}function tp(e,n){if(e==="change")return n}var np=!1;if(kn){var su;if(kn){var au="oninput"in document;if(!au){var ip=document.createElement("div");ip.setAttribute("oninput","return;"),au=typeof ip.oninput=="function"}su=au}else su=!1;np=su&&(!document.documentMode||9<document.documentMode)}function sp(){sr&&(sr.detachEvent("onpropertychange",ap),ar=sr=null)}function ap(e){if(e.propertyName==="value"&&Hl(ar)){var n=[];ep(n,ar,e,Xc(e)),Vh(P0,n)}}function H0(e,n,a){e==="focusin"?(sp(),sr=n,ar=a,sr.attachEvent("onpropertychange",ap)):e==="focusout"&&sp()}function B0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hl(ar)}function V0(e,n){if(e==="click")return Hl(n)}function q0(e,n){if(e==="input"||e==="change")return Hl(n)}function G0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Pt=typeof Object.is=="function"?Object.is:G0;function rr(e,n){if(Pt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!xs.call(n,c)||!Pt(e[c],n[c]))return!1}return!0}function rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lp(e,n){var a=rp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rp(a)}}function op(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?op(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function cp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ml(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Ml(e.document)}return n}function ru(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var F0=kn&&"documentMode"in document&&11>=document.documentMode,Vs=null,lu=null,lr=null,ou=!1;function up(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ou||Vs==null||Vs!==Ml(l)||(l=Vs,"selectionStart"in l&&ru(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),lr&&rr(lr,l)||(lr=l,l=Ao(lu,"onSelect"),0<l.length&&(n=new zl("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Vs)))}function ss(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var qs={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},cu={},dp={};kn&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function as(e){if(cu[e])return cu[e];if(!qs[e])return e;var n=qs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in dp)return cu[e]=n[a];return e}var fp=as("animationend"),hp=as("animationiteration"),pp=as("animationstart"),Y0=as("transitionrun"),K0=as("transitionstart"),Q0=as("transitioncancel"),mp=as("transitionend"),gp=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function ln(e,n){gp.set(e,n),x(n,[e])}var _p=new WeakMap;function Wt(e,n){if(typeof e=="object"&&e!==null){var a=_p.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Mh(n)},_p.set(e,n),n)}return{value:e,source:n,stack:Mh(n)}}var $t=[],Gs=0,du=0;function Bl(){for(var e=Gs,n=du=Gs=0;n<e;){var a=$t[n];$t[n++]=null;var l=$t[n];$t[n++]=null;var c=$t[n];$t[n++]=null;var d=$t[n];if($t[n++]=null,l!==null&&c!==null){var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}d!==0&&vp(a,c,d)}}function Vl(e,n,a,l){$t[Gs++]=e,$t[Gs++]=n,$t[Gs++]=a,$t[Gs++]=l,du|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function fu(e,n,a,l){return Vl(e,n,a,l),ql(e)}function Fs(e,n){return Vl(e,null,null,n),ql(e)}function vp(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&n!==null&&(c=31-de(a),e=d.hiddenUpdates,l=e[c],l===null?e[c]=[n]:l.push(n),n.lane=a|536870912),d):null}function ql(e){if(50<Or)throw Or=0,vd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ys={};function X0(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,n,a,l){return new X0(e,n,a,l)}function hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Un(e,n){var a=e.alternate;return a===null?(a=Ht(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function yp(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Gl(e,n,a,l,c,d){var h=0;if(l=e,typeof e=="function")hu(e)&&(h=1);else if(typeof e=="string")h=$b(e,a,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ut:return e=Ht(31,a,n,c),e.elementType=ut,e.lanes=d,e;case k:return rs(a.children,c,d,n);case q:h=8,c|=24;break;case K:return e=Ht(12,a,n,c|2),e.elementType=K,e.lanes=d,e;case se:return e=Ht(13,a,n,c),e.elementType=se,e.lanes=d,e;case Ne:return e=Ht(19,a,n,c),e.elementType=Ne,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ve:case z:h=10;break e;case Q:h=9;break e;case W:h=11;break e;case He:h=14;break e;case Qe:h=16,l=null;break e}h=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=Ht(h,a,n,c),n.elementType=e,n.type=l,n.lanes=d,n}function rs(e,n,a,l){return e=Ht(7,e,l,n),e.lanes=a,e}function pu(e,n,a){return e=Ht(6,e,null,n),e.lanes=a,e}function mu(e,n,a){return n=Ht(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ks=[],Qs=0,Fl=null,Yl=0,Zt=[],Jt=0,ls=null,Ln=1,jn="";function os(e,n){Ks[Qs++]=Yl,Ks[Qs++]=Fl,Fl=e,Yl=n}function Sp(e,n,a){Zt[Jt++]=Ln,Zt[Jt++]=jn,Zt[Jt++]=ls,ls=e;var l=Ln;e=jn;var c=32-de(l)-1;l&=~(1<<c),a+=1;var d=32-de(n)+c;if(30<d){var h=c-c%5;d=(l&(1<<h)-1).toString(32),l>>=h,c-=h,Ln=1<<32-de(n)+c|a<<c|l,jn=d+e}else Ln=1<<d|a<<c|l,jn=e}function gu(e){e.return!==null&&(os(e,1),Sp(e,1,0))}function _u(e){for(;e===Fl;)Fl=Ks[--Qs],Ks[Qs]=null,Yl=Ks[--Qs],Ks[Qs]=null;for(;e===ls;)ls=Zt[--Jt],Zt[Jt]=null,jn=Zt[--Jt],Zt[Jt]=null,Ln=Zt[--Jt],Zt[Jt]=null}var Rt=null,Fe=null,Ae=!1,cs=null,En=!1,vu=Error(r(519));function us(e){var n=Error(r(418,""));throw ur(Wt(n,e)),vu}function bp(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[dt]=e,n[Et]=l,a){case"dialog":ge("cancel",n),ge("close",n);break;case"iframe":case"object":case"embed":ge("load",n);break;case"video":case"audio":for(a=0;a<kr.length;a++)ge(kr[a],n);break;case"source":ge("error",n);break;case"img":case"image":case"link":ge("error",n),ge("load",n);break;case"details":ge("toggle",n);break;case"input":ge("invalid",n),Lh(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ol(n);break;case"select":ge("invalid",n);break;case"textarea":ge("invalid",n),zh(n,l.value,l.defaultValue,l.children),Ol(n)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||zg(n.textContent,a)?(l.popover!=null&&(ge("beforetoggle",n),ge("toggle",n)),l.onScroll!=null&&ge("scroll",n),l.onScrollEnd!=null&&ge("scrollend",n),l.onClick!=null&&(n.onclick=No),n=!0):n=!1,n||us(e)}function Ep(e){for(Rt=e.return;Rt;)switch(Rt.tag){case 5:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Rt=Rt.return}}function or(e){if(e!==Rt)return!1;if(!Ae)return Ep(e),Ae=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||kd(e.type,e.memoizedProps)),a=!a),a&&Fe&&us(e),Ep(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){Fe=cn(e.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}Fe=null}}else n===27?(n=Fe,Di(e.type)?(e=zd,zd=null,Fe=e):Fe=n):Fe=Rt?cn(e.stateNode.nextSibling):null;return!0}function cr(){Fe=Rt=null,Ae=!1}function wp(){var e=cs;return e!==null&&(kt===null?kt=e:kt.push.apply(kt,e),cs=null),e}function ur(e){cs===null?cs=[e]:cs.push(e)}var yu=j(null),ds=null,zn=null;function mi(e,n,a){V(yu,n._currentValue),n._currentValue=a}function Pn(e){e._currentValue=yu.current,F(yu)}function Su(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function bu(e,n,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var h=c.child;d=d.firstContext;e:for(;d!==null;){var _=d;d=c;for(var b=0;b<n.length;b++)if(_.context===n[b]){d.lanes|=a,_=d.alternate,_!==null&&(_.lanes|=a),Su(d.return,a,e),l||(h=null);break e}d=_.next}}else if(c.tag===18){if(h=c.return,h===null)throw Error(r(341));h.lanes|=a,d=h.alternate,d!==null&&(d.lanes|=a),Su(h,a,e),h=null}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===e){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}}function dr(e,n,a,l){e=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var h=c.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var _=c.type;Pt(c.pendingProps.value,h.value)||(e!==null?e.push(_):e=[_])}}else if(c===tt.current){if(h=c.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Hr):e=[Hr])}c=c.return}e!==null&&bu(n,e,a,l),n.flags|=262144}function Kl(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fs(e){ds=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Tt(e){return Tp(ds,e)}function Ql(e,n){return ds===null&&fs(e),Tp(e,n)}function Tp(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},zn===null){if(e===null)throw Error(r(308));zn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else zn=zn.next=n;return a}var W0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},$0=s.unstable_scheduleCallback,Z0=s.unstable_NormalPriority,rt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eu(){return{controller:new W0,data:new Map,refCount:0}}function fr(e){e.refCount--,e.refCount===0&&$0(Z0,function(){e.controller.abort()})}var hr=null,wu=0,Xs=0,Ws=null;function J0(e,n){if(hr===null){var a=hr=[];wu=0,Xs=Cd(),Ws={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wu++,n.then(Cp,Cp),n}function Cp(){if(--wu===0&&hr!==null){Ws!==null&&(Ws.status="fulfilled");var e=hr;hr=null,Xs=0,Ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function eb(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Ap=O.S;O.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&J0(e,n),Ap!==null&&Ap(e,n)};var hs=j(null);function Tu(){var e=hs.current;return e!==null?e:je.pooledCache}function Xl(e,n){n===null?V(hs,hs.current):V(hs,n.pool)}function Np(){var e=Tu();return e===null?null:{parent:rt._currentValue,pool:e}}var pr=Error(r(460)),Rp=Error(r(474)),Wl=Error(r(542)),Cu={then:function(){}};function Ip(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $l(){}function Dp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then($l,$l),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Op(e),e;default:if(typeof n.status=="string")n.then($l,$l);else{if(e=je,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Op(e),e}throw mr=n,pr}}var mr=null;function xp(){if(mr===null)throw Error(r(459));var e=mr;return mr=null,e}function Op(e){if(e===pr||e===Wl)throw Error(r(483))}var gi=!1;function Au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _i(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vi(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Re&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=ql(e),vp(e,null,a),n}return Vl(e,l,n,a),ql(e)}function gr(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Ya(e,a)}}function Ru(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=h:d=d.next=h,a=a.next}while(a!==null);d===null?c=d=n:d=d.next=n}else c=d=n;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Iu=!1;function _r(){if(Iu){var e=Ws;if(e!==null)throw e}}function vr(e,n,a,l){Iu=!1;var c=e.updateQueue;gi=!1;var d=c.firstBaseUpdate,h=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var b=_,N=b.next;b.next=null,h===null?d=N:h.next=N,h=b;var M=e.alternate;M!==null&&(M=M.updateQueue,_=M.lastBaseUpdate,_!==h&&(_===null?M.firstBaseUpdate=N:_.next=N,M.lastBaseUpdate=b))}if(d!==null){var L=c.baseState;h=0,M=N=b=null,_=d;do{var I=_.lane&-536870913,D=I!==_.lane;if(D?(be&I)===I:(l&I)===I){I!==0&&I===Xs&&(Iu=!0),M!==null&&(M=M.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var re=e,ee=_;I=n;var Oe=a;switch(ee.tag){case 1:if(re=ee.payload,typeof re=="function"){L=re.call(Oe,L,I);break e}L=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ee.payload,I=typeof re=="function"?re.call(Oe,L,I):re,I==null)break e;L=y({},L,I);break e;case 2:gi=!0}}I=_.callback,I!==null&&(e.flags|=64,D&&(e.flags|=8192),D=c.callbacks,D===null?c.callbacks=[I]:D.push(I))}else D={lane:I,tag:_.tag,payload:_.payload,callback:_.callback,next:null},M===null?(N=M=D,b=L):M=M.next=D,h|=I;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;D=_,_=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(!0);M===null&&(b=L),c.baseState=b,c.firstBaseUpdate=N,c.lastBaseUpdate=M,d===null&&(c.shared.lanes=0),Ai|=h,e.lanes=h,e.memoizedState=L}}function Mp(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function kp(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Mp(a[e],n)}var $s=j(null),Zl=j(0);function Up(e,n){e=Yn,V(Zl,e),V($s,n),Yn=e|n.baseLanes}function Du(){V(Zl,Yn),V($s,$s.current)}function xu(){Yn=Zl.current,F($s),F(Zl)}var yi=0,ue=null,De=null,it=null,Jl=!1,Zs=!1,ps=!1,eo=0,yr=0,Js=null,tb=0;function $e(){throw Error(r(321))}function Ou(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Pt(e[a],n[a]))return!1;return!0}function Mu(e,n,a,l,c,d){return yi=d,ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?vm:ym,ps=!1,d=a(l,c),ps=!1,Zs&&(d=jp(n,a,l,c)),Lp(e),d}function Lp(e){O.H=ro;var n=De!==null&&De.next!==null;if(yi=0,it=De=ue=null,Jl=!1,yr=0,Js=null,n)throw Error(r(300));e===null||ft||(e=e.dependencies,e!==null&&Kl(e)&&(ft=!0))}function jp(e,n,a,l){ue=e;var c=0;do{if(Zs&&(Js=null),yr=0,Zs=!1,25<=c)throw Error(r(301));if(c+=1,it=De=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}O.H=ob,d=n(a,l)}while(Zs);return d}function nb(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?Sr(n):n,e=e.useState()[0],(De!==null?De.memoizedState:null)!==e&&(ue.flags|=1024),n}function ku(){var e=eo!==0;return eo=0,e}function Uu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Lu(e){if(Jl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Jl=!1}yi=0,it=De=ue=null,Zs=!1,yr=eo=0,Js=null}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ue.memoizedState=it=e:it=it.next=e,it}function st(){if(De===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var n=it===null?ue.memoizedState:it.next;if(n!==null)it=n,De=e;else{if(e===null)throw ue.alternate===null?Error(r(467)):Error(r(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},it===null?ue.memoizedState=it=e:it=it.next=e}return it}function ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sr(e){var n=yr;return yr+=1,Js===null&&(Js=[]),e=Dp(Js,e,n),n=ue,(it===null?n.memoizedState:it.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?vm:ym),e}function to(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Sr(e);if(e.$$typeof===z)return Tt(e)}throw Error(r(438,String(e)))}function zu(e){var n=null,a=ue.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ju(),ue.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=et;return n.index++,a}function Hn(e,n){return typeof n=="function"?n(e):n}function no(e){var n=st();return Pu(n,De,e)}function Pu(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var c=e.baseQueue,d=l.pending;if(d!==null){if(c!==null){var h=c.next;c.next=d.next,d.next=h}n.baseQueue=c=d,l.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{n=c.next;var _=h=null,b=null,N=n,M=!1;do{var L=N.lane&-536870913;if(L!==N.lane?(be&L)===L:(yi&L)===L){var I=N.revertLane;if(I===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),L===Xs&&(M=!0);else if((yi&I)===I){N=N.next,I===Xs&&(M=!0);continue}else L={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(_=b=L,h=d):b=b.next=L,ue.lanes|=I,Ai|=I;L=N.action,ps&&a(d,L),d=N.hasEagerState?N.eagerState:a(d,L)}else I={lane:L,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(_=b=I,h=d):b=b.next=I,ue.lanes|=L,Ai|=L;N=N.next}while(N!==null&&N!==n);if(b===null?h=d:b.next=_,!Pt(d,e.memoizedState)&&(ft=!0,M&&(a=Ws,a!==null)))throw a;e.memoizedState=d,e.baseState=h,e.baseQueue=b,l.lastRenderedState=d}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Hu(e){var n=st(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,d=n.memoizedState;if(c!==null){a.pending=null;var h=c=c.next;do d=e(d,h.action),h=h.next;while(h!==c);Pt(d,n.memoizedState)||(ft=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function zp(e,n,a){var l=ue,c=st(),d=Ae;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var h=!Pt((De||c).memoizedState,a);h&&(c.memoizedState=a,ft=!0),c=c.queue;var _=Bp.bind(null,l,c,e);if(br(2048,8,_,[e]),c.getSnapshot!==n||h||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,ea(9,io(),Hp.bind(null,l,c,a,n),null),je===null)throw Error(r(349));d||(yi&124)!==0||Pp(l,n,a)}return a}function Pp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=ue.updateQueue,n===null?(n=ju(),ue.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Hp(e,n,a,l){n.value=a,n.getSnapshot=l,Vp(n)&&qp(e)}function Bp(e,n,a){return a(function(){Vp(n)&&qp(e)})}function Vp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Pt(e,a)}catch{return!0}}function qp(e){var n=Fs(e,2);n!==null&&Ft(n,e,2)}function Bu(e){var n=Ot();if(typeof e=="function"){var a=e;if(e=a(),ps){vn(!0);try{a()}finally{vn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},n}function Gp(e,n,a,l){return e.baseState=a,Pu(e,De,typeof l=="function"?l:Hn)}function ib(e,n,a,l,c){if(ao(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){d.listeners.push(h)}};O.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,Fp(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Fp(e,n){var a=n.action,l=n.payload,c=e.state;if(n.isTransition){var d=O.T,h={};O.T=h;try{var _=a(c,l),b=O.S;b!==null&&b(h,_),Yp(e,n,_)}catch(N){Vu(e,n,N)}finally{O.T=d}}else try{d=a(c,l),Yp(e,n,d)}catch(N){Vu(e,n,N)}}function Yp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Kp(e,n,l)},function(l){return Vu(e,n,l)}):Kp(e,n,a)}function Kp(e,n,a){n.status="fulfilled",n.value=a,Qp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Fp(e,a)))}function Vu(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Qp(n),n=n.next;while(n!==l)}e.action=null}function Qp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Xp(e,n){return n}function Wp(e,n){if(Ae){var a=je.formState;if(a!==null){e:{var l=ue;if(Ae){if(Fe){t:{for(var c=Fe,d=En;c.nodeType!==8;){if(!d){c=null;break t}if(c=cn(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Fe=cn(c.nextSibling),l=c.data==="F!";break e}}us(l)}l=!1}l&&(n=a[0])}}return a=Ot(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:n},a.queue=l,a=mm.bind(null,ue,l),l.dispatch=a,l=Bu(!1),d=Ku.bind(null,ue,!1,l.queue),l=Ot(),c={state:n,dispatch:null,action:e,pending:null},l.queue=c,a=ib.bind(null,ue,c,d,a),c.dispatch=a,l.memoizedState=e,[n,a,!1]}function $p(e){var n=st();return Zp(n,De,e)}function Zp(e,n,a){if(n=Pu(e,n,Xp)[0],e=no(Hn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=Sr(n)}catch(h){throw h===pr?Wl:h}else l=n;n=st();var c=n.queue,d=c.dispatch;return a!==n.memoizedState&&(ue.flags|=2048,ea(9,io(),sb.bind(null,c,a),null)),[l,d,e]}function sb(e,n){e.action=n}function Jp(e){var n=st(),a=De;if(a!==null)return Zp(n,a,e);st(),n=n.memoizedState,a=st();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function ea(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=ue.updateQueue,n===null&&(n=ju(),ue.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function io(){return{destroy:void 0,resource:void 0}}function em(){return st().memoizedState}function so(e,n,a,l){var c=Ot();l=l===void 0?null:l,ue.flags|=e,c.memoizedState=ea(1|n,io(),a,l)}function br(e,n,a,l){var c=st();l=l===void 0?null:l;var d=c.memoizedState.inst;De!==null&&l!==null&&Ou(l,De.memoizedState.deps)?c.memoizedState=ea(n,d,a,l):(ue.flags|=e,c.memoizedState=ea(1|n,d,a,l))}function tm(e,n){so(8390656,8,e,n)}function nm(e,n){br(2048,8,e,n)}function im(e,n){return br(4,2,e,n)}function sm(e,n){return br(4,4,e,n)}function am(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function rm(e,n,a){a=a!=null?a.concat([e]):null,br(4,4,am.bind(null,n,e),a)}function qu(){}function lm(e,n){var a=st();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Ou(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function om(e,n){var a=st();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Ou(n,l[1]))return l[0];if(l=e(),ps){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[l,n],l}function Gu(e,n,a){return a===void 0||(yi&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=dg(),ue.lanes|=e,Ai|=e,a)}function cm(e,n,a,l){return Pt(a,n)?a:$s.current!==null?(e=Gu(e,a,l),Pt(e,n)||(ft=!0),e):(yi&42)===0?(ft=!0,e.memoizedState=a):(e=dg(),ue.lanes|=e,Ai|=e,n)}function um(e,n,a,l,c){var d=G.p;G.p=d!==0&&8>d?d:8;var h=O.T,_={};O.T=_,Ku(e,!1,n,a);try{var b=c(),N=O.S;if(N!==null&&N(_,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var M=eb(b,l);Er(e,n,M,Gt(e))}else Er(e,n,l,Gt(e))}catch(L){Er(e,n,{then:function(){},status:"rejected",reason:L},Gt())}finally{G.p=d,O.T=h}}function ab(){}function Fu(e,n,a,l){if(e.tag!==5)throw Error(r(476));var c=dm(e).queue;um(e,c,n,J,a===null?ab:function(){return fm(e),a(l)})}function dm(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:J},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function fm(e){var n=dm(e).next.queue;Er(e,n,{},Gt())}function Yu(){return Tt(Hr)}function hm(){return st().memoizedState}function pm(){return st().memoizedState}function rb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Gt();e=_i(a);var l=vi(n,e,a);l!==null&&(Ft(l,n,a),gr(l,n,a)),n={cache:Eu()},e.payload=n;return}n=n.return}}function lb(e,n,a){var l=Gt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ao(e)?gm(n,a):(a=fu(e,n,a,l),a!==null&&(Ft(a,e,l),_m(a,n,l)))}function mm(e,n,a){var l=Gt();Er(e,n,a,l)}function Er(e,n,a,l){var c={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ao(e))gm(n,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var h=n.lastRenderedState,_=d(h,a);if(c.hasEagerState=!0,c.eagerState=_,Pt(_,h))return Vl(e,n,c,0),je===null&&Bl(),!1}catch{}finally{}if(a=fu(e,n,c,l),a!==null)return Ft(a,e,l),_m(a,n,l),!0}return!1}function Ku(e,n,a,l){if(l={lane:2,revertLane:Cd(),action:l,hasEagerState:!1,eagerState:null,next:null},ao(e)){if(n)throw Error(r(479))}else n=fu(e,a,l,2),n!==null&&Ft(n,e,2)}function ao(e){var n=e.alternate;return e===ue||n!==null&&n===ue}function gm(e,n){Zs=Jl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function _m(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Ya(e,a)}}var ro={readContext:Tt,use:to,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e},vm={readContext:Tt,use:to,useCallback:function(e,n){return Ot().memoizedState=[e,n===void 0?null:n],e},useContext:Tt,useEffect:tm,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,so(4194308,4,am.bind(null,n,e),a)},useLayoutEffect:function(e,n){return so(4194308,4,e,n)},useInsertionEffect:function(e,n){so(4,2,e,n)},useMemo:function(e,n){var a=Ot();n=n===void 0?null:n;var l=e();if(ps){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Ot();if(a!==void 0){var c=a(n);if(ps){vn(!0);try{a(n)}finally{vn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=lb.bind(null,ue,e),[l.memoizedState,e]},useRef:function(e){var n=Ot();return e={current:e},n.memoizedState=e},useState:function(e){e=Bu(e);var n=e.queue,a=mm.bind(null,ue,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(e,n){var a=Ot();return Gu(a,e,n)},useTransition:function(){var e=Bu(!1);return e=um.bind(null,ue,e.queue,!0,!1),Ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=ue,c=Ot();if(Ae){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),je===null)throw Error(r(349));(be&124)!==0||Pp(l,n,a)}c.memoizedState=a;var d={value:a,getSnapshot:n};return c.queue=d,tm(Bp.bind(null,l,d,e),[e]),l.flags|=2048,ea(9,io(),Hp.bind(null,l,d,a,n),null),a},useId:function(){var e=Ot(),n=je.identifierPrefix;if(Ae){var a=jn,l=Ln;a=(l&~(1<<32-de(l)-1)).toString(32)+a,n=""+n+"R"+a,a=eo++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=tb++,n=""+n+"r"+a.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:Yu,useFormState:Wp,useActionState:Wp,useOptimistic:function(e){var n=Ot();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ku.bind(null,ue,!0,a),a.dispatch=n,[e,n]},useMemoCache:zu,useCacheRefresh:function(){return Ot().memoizedState=rb.bind(null,ue)}},ym={readContext:Tt,use:to,useCallback:lm,useContext:Tt,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:im,useLayoutEffect:sm,useMemo:om,useReducer:no,useRef:em,useState:function(){return no(Hn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=st();return cm(a,De.memoizedState,e,n)},useTransition:function(){var e=no(Hn)[0],n=st().memoizedState;return[typeof e=="boolean"?e:Sr(e),n]},useSyncExternalStore:zp,useId:hm,useHostTransitionStatus:Yu,useFormState:$p,useActionState:$p,useOptimistic:function(e,n){var a=st();return Gp(a,De,e,n)},useMemoCache:zu,useCacheRefresh:pm},ob={readContext:Tt,use:to,useCallback:lm,useContext:Tt,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:im,useLayoutEffect:sm,useMemo:om,useReducer:Hu,useRef:em,useState:function(){return Hu(Hn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=st();return De===null?Gu(a,e,n):cm(a,De.memoizedState,e,n)},useTransition:function(){var e=Hu(Hn)[0],n=st().memoizedState;return[typeof e=="boolean"?e:Sr(e),n]},useSyncExternalStore:zp,useId:hm,useHostTransitionStatus:Yu,useFormState:Jp,useActionState:Jp,useOptimistic:function(e,n){var a=st();return De!==null?Gp(a,De,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:zu,useCacheRefresh:pm},ta=null,wr=0;function lo(e){var n=wr;return wr+=1,ta===null&&(ta=[]),Dp(ta,e,n)}function Tr(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function oo(e,n){throw n.$$typeof===E?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Sm(e){var n=e._init;return n(e._payload)}function bm(e){function n(C,T){if(e){var A=C.deletions;A===null?(C.deletions=[T],C.flags|=16):A.push(T)}}function a(C,T){if(!e)return null;for(;T!==null;)n(C,T),T=T.sibling;return null}function l(C){for(var T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function c(C,T){return C=Un(C,T),C.index=0,C.sibling=null,C}function d(C,T,A){return C.index=A,e?(A=C.alternate,A!==null?(A=A.index,A<T?(C.flags|=67108866,T):A):(C.flags|=67108866,T)):(C.flags|=1048576,T)}function h(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function _(C,T,A,U){return T===null||T.tag!==6?(T=pu(A,C.mode,U),T.return=C,T):(T=c(T,A),T.return=C,T)}function b(C,T,A,U){var Y=A.type;return Y===k?M(C,T,A.props.children,U,A.key):T!==null&&(T.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Qe&&Sm(Y)===T.type)?(T=c(T,A.props),Tr(T,A),T.return=C,T):(T=Gl(A.type,A.key,A.props,null,C.mode,U),Tr(T,A),T.return=C,T)}function N(C,T,A,U){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=mu(A,C.mode,U),T.return=C,T):(T=c(T,A.children||[]),T.return=C,T)}function M(C,T,A,U,Y){return T===null||T.tag!==7?(T=rs(A,C.mode,U,Y),T.return=C,T):(T=c(T,A),T.return=C,T)}function L(C,T,A){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=pu(""+T,C.mode,A),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case S:return A=Gl(T.type,T.key,T.props,null,C.mode,A),Tr(A,T),A.return=C,A;case R:return T=mu(T,C.mode,A),T.return=C,T;case Qe:var U=T._init;return T=U(T._payload),L(C,T,A)}if(qe(T)||Xe(T))return T=rs(T,C.mode,A,null),T.return=C,T;if(typeof T.then=="function")return L(C,lo(T),A);if(T.$$typeof===z)return L(C,Ql(C,T),A);oo(C,T)}return null}function I(C,T,A,U){var Y=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return Y!==null?null:_(C,T,""+A,U);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case S:return A.key===Y?b(C,T,A,U):null;case R:return A.key===Y?N(C,T,A,U):null;case Qe:return Y=A._init,A=Y(A._payload),I(C,T,A,U)}if(qe(A)||Xe(A))return Y!==null?null:M(C,T,A,U,null);if(typeof A.then=="function")return I(C,T,lo(A),U);if(A.$$typeof===z)return I(C,T,Ql(C,A),U);oo(C,A)}return null}function D(C,T,A,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return C=C.get(A)||null,_(T,C,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return C=C.get(U.key===null?A:U.key)||null,b(T,C,U,Y);case R:return C=C.get(U.key===null?A:U.key)||null,N(T,C,U,Y);case Qe:var fe=U._init;return U=fe(U._payload),D(C,T,A,U,Y)}if(qe(U)||Xe(U))return C=C.get(A)||null,M(T,C,U,Y,null);if(typeof U.then=="function")return D(C,T,A,lo(U),Y);if(U.$$typeof===z)return D(C,T,A,Ql(T,U),Y);oo(T,U)}return null}function re(C,T,A,U){for(var Y=null,fe=null,X=T,ne=T=0,pt=null;X!==null&&ne<A.length;ne++){X.index>ne?(pt=X,X=null):pt=X.sibling;var Te=I(C,X,A[ne],U);if(Te===null){X===null&&(X=pt);break}e&&X&&Te.alternate===null&&n(C,X),T=d(Te,T,ne),fe===null?Y=Te:fe.sibling=Te,fe=Te,X=pt}if(ne===A.length)return a(C,X),Ae&&os(C,ne),Y;if(X===null){for(;ne<A.length;ne++)X=L(C,A[ne],U),X!==null&&(T=d(X,T,ne),fe===null?Y=X:fe.sibling=X,fe=X);return Ae&&os(C,ne),Y}for(X=l(X);ne<A.length;ne++)pt=D(X,C,ne,A[ne],U),pt!==null&&(e&&pt.alternate!==null&&X.delete(pt.key===null?ne:pt.key),T=d(pt,T,ne),fe===null?Y=pt:fe.sibling=pt,fe=pt);return e&&X.forEach(function(Ui){return n(C,Ui)}),Ae&&os(C,ne),Y}function ee(C,T,A,U){if(A==null)throw Error(r(151));for(var Y=null,fe=null,X=T,ne=T=0,pt=null,Te=A.next();X!==null&&!Te.done;ne++,Te=A.next()){X.index>ne?(pt=X,X=null):pt=X.sibling;var Ui=I(C,X,Te.value,U);if(Ui===null){X===null&&(X=pt);break}e&&X&&Ui.alternate===null&&n(C,X),T=d(Ui,T,ne),fe===null?Y=Ui:fe.sibling=Ui,fe=Ui,X=pt}if(Te.done)return a(C,X),Ae&&os(C,ne),Y;if(X===null){for(;!Te.done;ne++,Te=A.next())Te=L(C,Te.value,U),Te!==null&&(T=d(Te,T,ne),fe===null?Y=Te:fe.sibling=Te,fe=Te);return Ae&&os(C,ne),Y}for(X=l(X);!Te.done;ne++,Te=A.next())Te=D(X,C,ne,Te.value,U),Te!==null&&(e&&Te.alternate!==null&&X.delete(Te.key===null?ne:Te.key),T=d(Te,T,ne),fe===null?Y=Te:fe.sibling=Te,fe=Te);return e&&X.forEach(function(cE){return n(C,cE)}),Ae&&os(C,ne),Y}function Oe(C,T,A,U){if(typeof A=="object"&&A!==null&&A.type===k&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case S:e:{for(var Y=A.key;T!==null;){if(T.key===Y){if(Y=A.type,Y===k){if(T.tag===7){a(C,T.sibling),U=c(T,A.props.children),U.return=C,C=U;break e}}else if(T.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Qe&&Sm(Y)===T.type){a(C,T.sibling),U=c(T,A.props),Tr(U,A),U.return=C,C=U;break e}a(C,T);break}else n(C,T);T=T.sibling}A.type===k?(U=rs(A.props.children,C.mode,U,A.key),U.return=C,C=U):(U=Gl(A.type,A.key,A.props,null,C.mode,U),Tr(U,A),U.return=C,C=U)}return h(C);case R:e:{for(Y=A.key;T!==null;){if(T.key===Y)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){a(C,T.sibling),U=c(T,A.children||[]),U.return=C,C=U;break e}else{a(C,T);break}else n(C,T);T=T.sibling}U=mu(A,C.mode,U),U.return=C,C=U}return h(C);case Qe:return Y=A._init,A=Y(A._payload),Oe(C,T,A,U)}if(qe(A))return re(C,T,A,U);if(Xe(A)){if(Y=Xe(A),typeof Y!="function")throw Error(r(150));return A=Y.call(A),ee(C,T,A,U)}if(typeof A.then=="function")return Oe(C,T,lo(A),U);if(A.$$typeof===z)return Oe(C,T,Ql(C,A),U);oo(C,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,T!==null&&T.tag===6?(a(C,T.sibling),U=c(T,A),U.return=C,C=U):(a(C,T),U=pu(A,C.mode,U),U.return=C,C=U),h(C)):a(C,T)}return function(C,T,A,U){try{wr=0;var Y=Oe(C,T,A,U);return ta=null,Y}catch(X){if(X===pr||X===Wl)throw X;var fe=Ht(29,X,null,C.mode);return fe.lanes=U,fe.return=C,fe}finally{}}}var na=bm(!0),Em=bm(!1),en=j(null),wn=null;function Si(e){var n=e.alternate;V(lt,lt.current&1),V(en,e),wn===null&&(n===null||$s.current!==null||n.memoizedState!==null)&&(wn=e)}function wm(e){if(e.tag===22){if(V(lt,lt.current),V(en,e),wn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(wn=e)}}else bi()}function bi(){V(lt,lt.current),V(en,en.current)}function Bn(e){F(en),wn===e&&(wn=null),F(lt)}var lt=j(0);function co(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||jd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Qu(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xu={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Gt(),c=_i(l);c.payload=n,a!=null&&(c.callback=a),n=vi(e,c,l),n!==null&&(Ft(n,e,l),gr(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Gt(),c=_i(l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=vi(e,c,l),n!==null&&(Ft(n,e,l),gr(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Gt(),l=_i(a);l.tag=2,n!=null&&(l.callback=n),n=vi(e,l,a),n!==null&&(Ft(n,e,a),gr(n,e,a))}};function Tm(e,n,a,l,c,d,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,h):n.prototype&&n.prototype.isPureReactComponent?!rr(a,l)||!rr(c,d):!0}function Cm(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Xu.enqueueReplaceState(n,n.state,null)}function ms(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Am(e){uo(e)}function Nm(e){console.error(e)}function Rm(e){uo(e)}function fo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Im(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Wu(e,n,a){return a=_i(a),a.tag=3,a.payload={element:null},a.callback=function(){fo(e,n)},a}function Dm(e){return e=_i(e),e.tag=3,e}function xm(e,n,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;e.payload=function(){return c(d)},e.callback=function(){Im(n,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Im(n,a,l),typeof c!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function cb(e,n,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&dr(n,a,c,!0),a=en.current,a!==null){switch(a.tag){case 13:return wn===null?Sd():a.alternate===null&&Ye===0&&(Ye=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===Cu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Ed(e,l,c)),!1;case 22:return a.flags|=65536,l===Cu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Ed(e,l,c)),!1}throw Error(r(435,a.tag))}return Ed(e,l,c),Sd(),!1}if(Ae)return n=en.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==vu&&(e=Error(r(422),{cause:l}),ur(Wt(e,a)))):(l!==vu&&(n=Error(r(423),{cause:l}),ur(Wt(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=Wt(l,a),c=Wu(e.stateNode,l,c),Ru(e,c),Ye!==4&&(Ye=2)),!1;var d=Error(r(520),{cause:l});if(d=Wt(d,a),xr===null?xr=[d]:xr.push(d),Ye!==4&&(Ye=2),n===null)return!0;l=Wt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Wu(a.stateNode,l,e),Ru(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ni===null||!Ni.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Dm(c),xm(c,e,a,l),Ru(a,c),!1}a=a.return}while(a!==null);return!1}var Om=Error(r(461)),ft=!1;function yt(e,n,a,l){n.child=e===null?Em(n,null,a,l):na(n,e.child,a,l)}function Mm(e,n,a,l,c){a=a.render;var d=n.ref;if("ref"in l){var h={};for(var _ in l)_!=="ref"&&(h[_]=l[_])}else h=l;return fs(n),l=Mu(e,n,a,h,d,c),_=ku(),e!==null&&!ft?(Uu(e,n,c),Vn(e,n,c)):(Ae&&_&&gu(n),n.flags|=1,yt(e,n,l,c),n.child)}function km(e,n,a,l,c){if(e===null){var d=a.type;return typeof d=="function"&&!hu(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Um(e,n,d,l,c)):(e=Gl(a.type,null,l,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!sd(e,c)){var h=d.memoizedProps;if(a=a.compare,a=a!==null?a:rr,a(h,l)&&e.ref===n.ref)return Vn(e,n,c)}return n.flags|=1,e=Un(d,l),e.ref=n.ref,e.return=n,n.child=e}function Um(e,n,a,l,c){if(e!==null){var d=e.memoizedProps;if(rr(d,l)&&e.ref===n.ref)if(ft=!1,n.pendingProps=l=d,sd(e,c))(e.flags&131072)!==0&&(ft=!0);else return n.lanes=e.lanes,Vn(e,n,c)}return $u(e,n,a,l,c)}function Lm(e,n,a){var l=n.pendingProps,c=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(c=n.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;n.childLanes=d&~l}else n.childLanes=0,n.child=null;return jm(e,n,l,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xl(n,d!==null?d.cachePool:null),d!==null?Up(n,d):Du(),wm(n);else return n.lanes=n.childLanes=536870912,jm(e,n,d!==null?d.baseLanes|a:a,a)}else d!==null?(Xl(n,d.cachePool),Up(n,d),bi(),n.memoizedState=null):(e!==null&&Xl(n,null),Du(),bi());return yt(e,n,c,a),n.child}function jm(e,n,a,l){var c=Tu();return c=c===null?null:{parent:rt._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&Xl(n,null),Du(),wm(n),e!==null&&dr(e,n,l,!0),null}function ho(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function $u(e,n,a,l,c){return fs(n),a=Mu(e,n,a,l,void 0,c),l=ku(),e!==null&&!ft?(Uu(e,n,c),Vn(e,n,c)):(Ae&&l&&gu(n),n.flags|=1,yt(e,n,a,c),n.child)}function zm(e,n,a,l,c,d){return fs(n),n.updateQueue=null,a=jp(n,l,a,c),Lp(e),l=ku(),e!==null&&!ft?(Uu(e,n,d),Vn(e,n,d)):(Ae&&l&&gu(n),n.flags|=1,yt(e,n,a,d),n.child)}function Pm(e,n,a,l,c){if(fs(n),n.stateNode===null){var d=Ys,h=a.contextType;typeof h=="object"&&h!==null&&(d=Tt(h)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Xu,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},Au(n),h=a.contextType,d.context=typeof h=="object"&&h!==null?Tt(h):Ys,d.state=n.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Qu(n,a,h,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(h=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),h!==d.state&&Xu.enqueueReplaceState(d,d.state,null),vr(n,l,d,c),_r(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var _=n.memoizedProps,b=ms(a,_);d.props=b;var N=d.context,M=a.contextType;h=Ys,typeof M=="object"&&M!==null&&(h=Tt(M));var L=a.getDerivedStateFromProps;M=typeof L=="function"||typeof d.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,M||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_||N!==h)&&Cm(n,d,l,h),gi=!1;var I=n.memoizedState;d.state=I,vr(n,l,d,c),_r(),N=n.memoizedState,_||I!==N||gi?(typeof L=="function"&&(Qu(n,a,L,l),N=n.memoizedState),(b=gi||Tm(n,a,b,l,I,N,h))?(M||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=N),d.props=l,d.state=N,d.context=h,l=b):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Nu(e,n),h=n.memoizedProps,M=ms(a,h),d.props=M,L=n.pendingProps,I=d.context,N=a.contextType,b=Ys,typeof N=="object"&&N!==null&&(b=Tt(N)),_=a.getDerivedStateFromProps,(N=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==L||I!==b)&&Cm(n,d,l,b),gi=!1,I=n.memoizedState,d.state=I,vr(n,l,d,c),_r();var D=n.memoizedState;h!==L||I!==D||gi||e!==null&&e.dependencies!==null&&Kl(e.dependencies)?(typeof _=="function"&&(Qu(n,a,_,l),D=n.memoizedState),(M=gi||Tm(n,a,M,l,I,D,b)||e!==null&&e.dependencies!==null&&Kl(e.dependencies))?(N||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,D,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,D,b)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=D),d.props=l,d.state=D,d.context=b,l=M):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,ho(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=na(n,e.child,null,c),n.child=na(n,null,a,c)):yt(e,n,a,c),n.memoizedState=d.state,e=n.child):e=Vn(e,n,c),e}function Hm(e,n,a,l){return cr(),n.flags|=256,yt(e,n,a,l),n.child}var Zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ju(e){return{baseLanes:e,cachePool:Np()}}function ed(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=tn),e}function Bm(e,n,a){var l=n.pendingProps,c=!1,d=(n.flags&128)!==0,h;if((h=d)||(h=e!==null&&e.memoizedState===null?!1:(lt.current&2)!==0),h&&(c=!0,n.flags&=-129),h=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ae){if(c?Si(n):bi(),Ae){var _=Fe,b;if(b=_){e:{for(b=_,_=En;b.nodeType!==8;){if(!_){_=null;break e}if(b=cn(b.nextSibling),b===null){_=null;break e}}_=b}_!==null?(n.memoizedState={dehydrated:_,treeContext:ls!==null?{id:Ln,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},b=Ht(18,null,null,0),b.stateNode=_,b.return=n,n.child=b,Rt=n,Fe=null,b=!0):b=!1}b||us(n)}if(_=n.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return jd(_)?n.lanes=32:n.lanes=536870912,null;Bn(n)}return _=l.children,l=l.fallback,c?(bi(),c=n.mode,_=po({mode:"hidden",children:_},c),l=rs(l,c,a,null),_.return=n,l.return=n,_.sibling=l,n.child=_,c=n.child,c.memoizedState=Ju(a),c.childLanes=ed(e,h,a),n.memoizedState=Zu,l):(Si(n),td(n,_))}if(b=e.memoizedState,b!==null&&(_=b.dehydrated,_!==null)){if(d)n.flags&256?(Si(n),n.flags&=-257,n=nd(e,n,a)):n.memoizedState!==null?(bi(),n.child=e.child,n.flags|=128,n=null):(bi(),c=l.fallback,_=n.mode,l=po({mode:"visible",children:l.children},_),c=rs(c,_,a,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,na(n,e.child,null,a),l=n.child,l.memoizedState=Ju(a),l.childLanes=ed(e,h,a),n.memoizedState=Zu,n=c);else if(Si(n),jd(_)){if(h=_.nextSibling&&_.nextSibling.dataset,h)var N=h.dgst;h=N,l=Error(r(419)),l.stack="",l.digest=h,ur({value:l,source:null,stack:null}),n=nd(e,n,a)}else if(ft||dr(e,n,a,!1),h=(a&e.childLanes)!==0,ft||h){if(h=je,h!==null&&(l=a&-a,l=(l&42)!==0?1:ks(l),l=(l&(h.suspendedLanes|a))!==0?0:l,l!==0&&l!==b.retryLane))throw b.retryLane=l,Fs(e,l),Ft(h,e,l),Om;_.data==="$?"||Sd(),n=nd(e,n,a)}else _.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,Fe=cn(_.nextSibling),Rt=n,Ae=!0,cs=null,En=!1,e!==null&&(Zt[Jt++]=Ln,Zt[Jt++]=jn,Zt[Jt++]=ls,Ln=e.id,jn=e.overflow,ls=n),n=td(n,l.children),n.flags|=4096);return n}return c?(bi(),c=l.fallback,_=n.mode,b=e.child,N=b.sibling,l=Un(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,N!==null?c=Un(N,c):(c=rs(c,_,a,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,_=e.child.memoizedState,_===null?_=Ju(a):(b=_.cachePool,b!==null?(N=rt._currentValue,b=b.parent!==N?{parent:N,pool:N}:b):b=Np(),_={baseLanes:_.baseLanes|a,cachePool:b}),c.memoizedState=_,c.childLanes=ed(e,h,a),n.memoizedState=Zu,l):(Si(n),a=e.child,e=a.sibling,a=Un(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(h=n.deletions,h===null?(n.deletions=[e],n.flags|=16):h.push(e)),n.child=a,n.memoizedState=null,a)}function td(e,n){return n=po({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function po(e,n){return e=Ht(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function nd(e,n,a){return na(n,e.child,null,a),e=td(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Vm(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Su(e.return,n,a)}function id(e,n,a,l,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=c)}function qm(e,n,a){var l=n.pendingProps,c=l.revealOrder,d=l.tail;if(yt(e,n,l.children,a),l=lt.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vm(e,a,n);else if(e.tag===19)Vm(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(V(lt,l),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&co(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),id(n,!1,c,a,d);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&co(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}id(n,!0,a,null,d);break;case"together":id(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Vn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ai|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(dr(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=Un(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Un(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function sd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Kl(e)))}function ub(e,n,a){switch(n.tag){case 3:ke(n,n.stateNode.containerInfo),mi(n,rt,e.memoizedState.cache),cr();break;case 27:case 5:Ha(n);break;case 4:ke(n,n.stateNode.containerInfo);break;case 10:mi(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Si(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Bm(e,n,a):(Si(n),e=Vn(e,n,a),e!==null?e.sibling:null);Si(n);break;case 19:var c=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(dr(e,n,a,!1),l=(a&n.childLanes)!==0),c){if(l)return qm(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),V(lt,lt.current),l)break;return null;case 22:case 23:return n.lanes=0,Lm(e,n,a);case 24:mi(n,rt,e.memoizedState.cache)}return Vn(e,n,a)}function Gm(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ft=!0;else{if(!sd(e,a)&&(n.flags&128)===0)return ft=!1,ub(e,n,a);ft=(e.flags&131072)!==0}else ft=!1,Ae&&(n.flags&1048576)!==0&&Sp(n,Yl,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")hu(l)?(e=ms(l,e),n.tag=1,n=Pm(null,n,l,e,a)):(n.tag=0,n=$u(null,n,l,e,a));else{if(l!=null){if(c=l.$$typeof,c===W){n.tag=11,n=Mm(null,n,l,e,a);break e}else if(c===He){n.tag=14,n=km(null,n,l,e,a);break e}}throw n=_n(l)||l,Error(r(306,n,""))}}return n;case 0:return $u(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,c=ms(l,n.pendingProps),Pm(e,n,l,c,a);case 3:e:{if(ke(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var d=n.memoizedState;c=d.element,Nu(e,n),vr(n,l,null,a);var h=n.memoizedState;if(l=h.cache,mi(n,rt,l),l!==d.cache&&bu(n,[rt],a,!0),_r(),l=h.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:h.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Hm(e,n,l,a);break e}else if(l!==c){c=Wt(Error(r(424)),n),ur(c),n=Hm(e,n,l,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Fe=cn(e.firstChild),Rt=n,Ae=!0,cs=null,En=!0,a=Em(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cr(),l===c){n=Vn(e,n,a);break e}yt(e,n,l,a)}n=n.child}return n;case 26:return ho(e,n),e===null?(a=Qg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ae||(a=n.type,e=n.pendingProps,l=Ro(te.current).createElement(a),l[dt]=n,l[Et]=e,bt(l,a,e),We(l),n.stateNode=l):n.memoizedState=Qg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ha(n),e===null&&Ae&&(l=n.stateNode=Fg(n.type,n.pendingProps,te.current),Rt=n,En=!0,c=Fe,Di(n.type)?(zd=c,Fe=cn(l.firstChild)):Fe=c),yt(e,n,n.pendingProps.children,a),ho(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ae&&((c=l=Fe)&&(l=zb(l,n.type,n.pendingProps,En),l!==null?(n.stateNode=l,Rt=n,Fe=cn(l.firstChild),En=!1,c=!0):c=!1),c||us(n)),Ha(n),c=n.type,d=n.pendingProps,h=e!==null?e.memoizedProps:null,l=d.children,kd(c,d)?l=null:h!==null&&kd(c,h)&&(n.flags|=32),n.memoizedState!==null&&(c=Mu(e,n,nb,null,null,a),Hr._currentValue=c),ho(e,n),yt(e,n,l,a),n.child;case 6:return e===null&&Ae&&((e=a=Fe)&&(a=Pb(a,n.pendingProps,En),a!==null?(n.stateNode=a,Rt=n,Fe=null,e=!0):e=!1),e||us(n)),null;case 13:return Bm(e,n,a);case 4:return ke(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=na(n,null,l,a):yt(e,n,l,a),n.child;case 11:return Mm(e,n,n.type,n.pendingProps,a);case 7:return yt(e,n,n.pendingProps,a),n.child;case 8:return yt(e,n,n.pendingProps.children,a),n.child;case 12:return yt(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,mi(n,n.type,l.value),yt(e,n,l.children,a),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,fs(n),c=Tt(c),l=l(c),n.flags|=1,yt(e,n,l,a),n.child;case 14:return km(e,n,n.type,n.pendingProps,a);case 15:return Um(e,n,n.type,n.pendingProps,a);case 19:return qm(e,n,a);case 31:return l=n.pendingProps,a=n.mode,l={mode:l.mode,children:l.children},e===null?(a=po(l,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Un(e.child,l),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Lm(e,n,a);case 24:return fs(n),l=Tt(rt),e===null?(c=Tu(),c===null&&(c=je,d=Eu(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),n.memoizedState={parent:l,cache:c},Au(n),mi(n,rt,c)):((e.lanes&a)!==0&&(Nu(e,n),vr(n,null,null,a),_r()),c=e.memoizedState,d=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),mi(n,rt,l)):(l=d.cache,mi(n,rt,l),l!==c.cache&&bu(n,[rt],a,!0))),yt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function qn(e){e.flags|=4}function Fm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jg(n)){if(n=en.current,n!==null&&((be&4194048)===be?wn!==null:(be&62914560)!==be&&(be&536870912)===0||n!==wn))throw mr=Cu,Rp;e.flags|=8192}}function mo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ms():536870912,e.lanes|=n,ra|=n)}function Cr(e,n){if(!Ae)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function db(e,n,a){var l=n.pendingProps;switch(_u(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(n),null;case 1:return Ge(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Pn(rt),an(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(or(n)?qn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,wp())),Ge(n),null;case 26:return a=n.memoizedState,e===null?(qn(n),a!==null?(Ge(n),Fm(n,a)):(Ge(n),n.flags&=-16777217)):a?a!==e.memoizedState?(qn(n),Ge(n),Fm(n,a)):(Ge(n),n.flags&=-16777217):(e.memoizedProps!==l&&qn(n),Ge(n),n.flags&=-16777217),null;case 27:zt(n),a=te.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==l&&qn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ge(n),null}e=Z.current,or(n)?bp(n):(e=Fg(c,l,a),n.stateNode=e,qn(n))}return Ge(n),null;case 5:if(zt(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&qn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ge(n),null}if(e=Z.current,or(n))bp(n);else{switch(c=Ro(te.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?c.createElement(a,{is:l.is}):c.createElement(a)}}e[dt]=n,e[Et]=l;e:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break e;for(;c.sibling===null;){if(c.return===null||c.return===n)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;e:switch(bt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&qn(n)}}return Ge(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&qn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=te.current,or(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,c=Rt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[dt]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||zg(e.nodeValue,a)),e||us(n)}else e=Ro(e).createTextNode(l),e[dt]=n,n.stateNode=e}return Ge(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=or(n),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[dt]=n}else cr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ge(n),c=!1}else c=wp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Bn(n),n):(Bn(n),null)}if(Bn(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),mo(n,n.updateQueue),Ge(n),null;case 4:return an(),e===null&&Id(n.stateNode.containerInfo),Ge(n),null;case 10:return Pn(n.type),Ge(n),null;case 19:if(F(lt),c=n.memoizedState,c===null)return Ge(n),null;if(l=(n.flags&128)!==0,d=c.rendering,d===null)if(l)Cr(c,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=co(e),d!==null){for(n.flags|=128,Cr(c,!1),e=d.updateQueue,n.updateQueue=e,mo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)yp(a,e),a=a.sibling;return V(lt,lt.current&1|2),n.child}e=e.sibling}c.tail!==null&&vt()>vo&&(n.flags|=128,l=!0,Cr(c,!1),n.lanes=4194304)}else{if(!l)if(e=co(d),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,mo(n,e),Cr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Ae)return Ge(n),null}else 2*vt()-c.renderingStartTime>vo&&a!==536870912&&(n.flags|=128,l=!0,Cr(c,!1),n.lanes=4194304);c.isBackwards?(d.sibling=n.child,n.child=d):(e=c.last,e!==null?e.sibling=d:n.child=d,c.last=d)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=vt(),n.sibling=null,e=lt.current,V(lt,l?e&1|2:e&1),n):(Ge(n),null);case 22:case 23:return Bn(n),xu(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Ge(n),n.subtreeFlags&6&&(n.flags|=8192)):Ge(n),a=n.updateQueue,a!==null&&mo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&F(hs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Pn(rt),Ge(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function fb(e,n){switch(_u(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Pn(rt),an(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return zt(n),null;case 13:if(Bn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));cr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return F(lt),null;case 4:return an(),null;case 10:return Pn(n.type),null;case 22:case 23:return Bn(n),xu(),e!==null&&F(hs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Pn(rt),null;case 25:return null;default:return null}}function Ym(e,n){switch(_u(n),n.tag){case 3:Pn(rt),an();break;case 26:case 27:case 5:zt(n);break;case 4:an();break;case 13:Bn(n);break;case 19:F(lt);break;case 10:Pn(n.type);break;case 22:case 23:Bn(n),xu(),e!==null&&F(hs);break;case 24:Pn(rt)}}function Ar(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var d=a.create,h=a.inst;l=d(),h.destroy=l}a=a.next}while(a!==c)}}catch(_){Ue(n,n.return,_)}}function Ei(e,n,a){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&e)===e){var h=l.inst,_=h.destroy;if(_!==void 0){h.destroy=void 0,c=n;var b=a,N=_;try{N()}catch(M){Ue(c,b,M)}}}l=l.next}while(l!==d)}}catch(M){Ue(n,n.return,M)}}function Km(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{kp(n,a)}catch(l){Ue(e,e.return,l)}}}function Qm(e,n,a){a.props=ms(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ue(e,n,l)}}function Nr(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){Ue(e,n,c)}}function Tn(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Ue(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ue(e,n,c)}else a.current=null}function Xm(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Ue(e,e.return,c)}}function ad(e,n,a){try{var l=e.stateNode;Mb(l,e.type,a,n),l[Et]=n}catch(c){Ue(e,e.return,c)}}function Wm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Di(e.type)||e.tag===4}function rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Di(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=No));else if(l!==4&&(l===27&&Di(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ld(e,n,a),e=e.sibling;e!==null;)ld(e,n,a),e=e.sibling}function go(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&Di(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(go(e,n,a),e=e.sibling;e!==null;)go(e,n,a),e=e.sibling}function $m(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);bt(n,l,a),n[dt]=e,n[Et]=a}catch(d){Ue(e,e.return,d)}}var Gn=!1,Ze=!1,od=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,ht=null;function hb(e,n){if(e=e.containerInfo,Od=ko,e=cp(e),ru(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var h=0,_=-1,b=-1,N=0,M=0,L=e,I=null;t:for(;;){for(var D;L!==a||c!==0&&L.nodeType!==3||(_=h+c),L!==d||l!==0&&L.nodeType!==3||(b=h+l),L.nodeType===3&&(h+=L.nodeValue.length),(D=L.firstChild)!==null;)I=L,L=D;for(;;){if(L===e)break t;if(I===a&&++N===c&&(_=h),I===d&&++M===l&&(b=h),(D=L.nextSibling)!==null)break;L=I,I=L.parentNode}L=D}a=_===-1||b===-1?null:{start:_,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:e,selectionRange:a},ko=!1,ht=n;ht!==null;)if(n=ht,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,ht=e;else for(;ht!==null;){switch(n=ht,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,c=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var re=ms(a.type,c,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(re,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ee){Ue(a,a.return,ee)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ld(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ld(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,ht=e;break}ht=n.return}}function Jm(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:wi(e,a),l&4&&Ar(5,a);break;case 1:if(wi(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(h){Ue(a,a.return,h)}else{var c=ms(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ue(a,a.return,h)}}l&64&&Km(a),l&512&&Nr(a,a.return);break;case 3:if(wi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{kp(e,n)}catch(h){Ue(a,a.return,h)}}break;case 27:n===null&&l&4&&$m(a);case 26:case 5:wi(e,a),n===null&&l&4&&Xm(a),l&512&&Nr(a,a.return);break;case 12:wi(e,a);break;case 13:wi(e,a),l&4&&ng(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Eb.bind(null,a),Hb(e,a))));break;case 22:if(l=a.memoizedState!==null||Gn,!l){n=n!==null&&n.memoizedState!==null||Ze,c=Gn;var d=Ze;Gn=l,(Ze=n)&&!d?Ti(e,a,(a.subtreeFlags&8772)!==0):wi(e,a),Gn=c,Ze=d}break;case 30:break;default:wi(e,a)}}function eg(e){var n=e.alternate;n!==null&&(e.alternate=null,eg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Wa(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Mt=!1;function Fn(e,n,a){for(a=a.child;a!==null;)tg(e,n,a),a=a.sibling}function tg(e,n,a){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ai,a)}catch{}switch(a.tag){case 26:Ze||Tn(a,n),Fn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ze||Tn(a,n);var l=Ve,c=Mt;Di(a.type)&&(Ve=a.stateNode,Mt=!1),Fn(e,n,a),Lr(a.stateNode),Ve=l,Mt=c;break;case 5:Ze||Tn(a,n);case 6:if(l=Ve,c=Mt,Ve=null,Fn(e,n,a),Ve=l,Mt=c,Ve!==null)if(Mt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(d){Ue(a,n,d)}else try{Ve.removeChild(a.stateNode)}catch(d){Ue(a,n,d)}break;case 18:Ve!==null&&(Mt?(e=Ve,qg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Gr(e)):qg(Ve,a.stateNode));break;case 4:l=Ve,c=Mt,Ve=a.stateNode.containerInfo,Mt=!0,Fn(e,n,a),Ve=l,Mt=c;break;case 0:case 11:case 14:case 15:Ze||Ei(2,a,n),Ze||Ei(4,a,n),Fn(e,n,a);break;case 1:Ze||(Tn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Qm(a,n,l)),Fn(e,n,a);break;case 21:Fn(e,n,a);break;case 22:Ze=(l=Ze)||a.memoizedState!==null,Fn(e,n,a),Ze=l;break;default:Fn(e,n,a)}}function ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gr(e)}catch(a){Ue(n,n.return,a)}}function pb(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Zm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Zm),n;default:throw Error(r(435,e.tag))}}function cd(e,n){var a=pb(e);n.forEach(function(l){var c=wb.bind(null,e,l);a.has(l)||(a.add(l),l.then(c,c))})}function Bt(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],d=e,h=n,_=h;e:for(;_!==null;){switch(_.tag){case 27:if(Di(_.type)){Ve=_.stateNode,Mt=!1;break e}break;case 5:Ve=_.stateNode,Mt=!1;break e;case 3:case 4:Ve=_.stateNode.containerInfo,Mt=!0;break e}_=_.return}if(Ve===null)throw Error(r(160));tg(d,h,c),Ve=null,Mt=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ig(n,e),n=n.sibling}var on=null;function ig(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bt(n,e),Vt(e),l&4&&(Ei(3,e,e.return),Ar(3,e),Ei(5,e,e.return));break;case 1:Bt(n,e),Vt(e),l&512&&(Ze||a===null||Tn(a,a.return)),l&64&&Gn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=on;if(Bt(n,e),Vt(e),l&512&&(Ze||a===null||Tn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[ci]||d[dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),bt(d,l,a),d[dt]=e,We(d),l=d;break e;case"link":var h=$g("link","href",c).get(l+(a.href||""));if(h){for(var _=0;_<h.length;_++)if(d=h[_],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(_,1);break t}}d=c.createElement(l),bt(d,l,a),c.head.appendChild(d);break;case"meta":if(h=$g("meta","content",c).get(l+(a.content||""))){for(_=0;_<h.length;_++)if(d=h[_],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(_,1);break t}}d=c.createElement(l),bt(d,l,a),c.head.appendChild(d);break;default:throw Error(r(468,l))}d[dt]=e,We(d),l=d}e.stateNode=l}else Zg(c,e.type,e.stateNode);else e.stateNode=Wg(c,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Zg(c,e.type,e.stateNode):Wg(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ad(e,e.memoizedProps,a.memoizedProps)}break;case 27:Bt(n,e),Vt(e),l&512&&(Ze||a===null||Tn(a,a.return)),a!==null&&l&4&&ad(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Bt(n,e),Vt(e),l&512&&(Ze||a===null||Tn(a,a.return)),e.flags&32){c=e.stateNode;try{zs(c,"")}catch(D){Ue(e,e.return,D)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,ad(e,c,a!==null?a.memoizedProps:c)),l&1024&&(od=!0);break;case 6:if(Bt(n,e),Vt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(D){Ue(e,e.return,D)}}break;case 3:if(xo=null,c=on,on=Io(n.containerInfo),Bt(n,e),on=c,Vt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gr(n.containerInfo)}catch(D){Ue(e,e.return,D)}od&&(od=!1,sg(e));break;case 4:l=on,on=Io(e.stateNode.containerInfo),Bt(n,e),Vt(e),on=l;break;case 12:Bt(n,e),Vt(e);break;case 13:Bt(n,e),Vt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(md=vt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,cd(e,l)));break;case 22:c=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,N=Gn,M=Ze;if(Gn=N||c,Ze=M||b,Bt(n,e),Ze=M,Gn=N,Vt(e),l&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||b||Gn||Ze||gs(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(d=b.stateNode,c)h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{_=b.stateNode;var L=b.memoizedProps.style,I=L!=null&&L.hasOwnProperty("display")?L.display:null;_.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(D){Ue(b,b.return,D)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(D){Ue(b,b.return,D)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,cd(e,a))));break;case 19:Bt(n,e),Vt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,cd(e,l)));break;case 30:break;case 21:break;default:Bt(n,e),Vt(e)}}function Vt(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Wm(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,d=rd(e);go(e,d,c);break;case 5:var h=a.stateNode;a.flags&32&&(zs(h,""),a.flags&=-33);var _=rd(e);go(e,_,h);break;case 3:case 4:var b=a.stateNode.containerInfo,N=rd(e);ld(e,N,b);break;default:throw Error(r(161))}}catch(M){Ue(e,e.return,M)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function sg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;sg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function wi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jm(e,n.alternate,n),n=n.sibling}function gs(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ei(4,n,n.return),gs(n);break;case 1:Tn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Qm(n,n.return,a),gs(n);break;case 27:Lr(n.stateNode);case 26:case 5:Tn(n,n.return),gs(n);break;case 22:n.memoizedState===null&&gs(n);break;case 30:gs(n);break;default:gs(n)}e=e.sibling}}function Ti(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=e,d=n,h=d.flags;switch(d.tag){case 0:case 11:case 15:Ti(c,d,a),Ar(4,d);break;case 1:if(Ti(c,d,a),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(N){Ue(l,l.return,N)}if(l=d,c=l.updateQueue,c!==null){var _=l.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)Mp(b[c],_)}catch(N){Ue(l,l.return,N)}}a&&h&64&&Km(d),Nr(d,d.return);break;case 27:$m(d);case 26:case 5:Ti(c,d,a),a&&l===null&&h&4&&Xm(d),Nr(d,d.return);break;case 12:Ti(c,d,a);break;case 13:Ti(c,d,a),a&&h&4&&ng(c,d);break;case 22:d.memoizedState===null&&Ti(c,d,a),Nr(d,d.return);break;case 30:break;default:Ti(c,d,a)}n=n.sibling}}function ud(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&fr(a))}function dd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&fr(e))}function Cn(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ag(e,n,a,l),n=n.sibling}function ag(e,n,a,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Cn(e,n,a,l),c&2048&&Ar(9,n);break;case 1:Cn(e,n,a,l);break;case 3:Cn(e,n,a,l),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&fr(e)));break;case 12:if(c&2048){Cn(e,n,a,l),e=n.stateNode;try{var d=n.memoizedProps,h=d.id,_=d.onPostCommit;typeof _=="function"&&_(h,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Ue(n,n.return,b)}}else Cn(e,n,a,l);break;case 13:Cn(e,n,a,l);break;case 23:break;case 22:d=n.stateNode,h=n.alternate,n.memoizedState!==null?d._visibility&2?Cn(e,n,a,l):Rr(e,n):d._visibility&2?Cn(e,n,a,l):(d._visibility|=2,ia(e,n,a,l,(n.subtreeFlags&10256)!==0)),c&2048&&ud(h,n);break;case 24:Cn(e,n,a,l),c&2048&&dd(n.alternate,n);break;default:Cn(e,n,a,l)}}function ia(e,n,a,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,h=n,_=a,b=l,N=h.flags;switch(h.tag){case 0:case 11:case 15:ia(d,h,_,b,c),Ar(8,h);break;case 23:break;case 22:var M=h.stateNode;h.memoizedState!==null?M._visibility&2?ia(d,h,_,b,c):Rr(d,h):(M._visibility|=2,ia(d,h,_,b,c)),c&&N&2048&&ud(h.alternate,h);break;case 24:ia(d,h,_,b,c),c&&N&2048&&dd(h.alternate,h);break;default:ia(d,h,_,b,c)}n=n.sibling}}function Rr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,c=l.flags;switch(l.tag){case 22:Rr(a,l),c&2048&&ud(l.alternate,l);break;case 24:Rr(a,l),c&2048&&dd(l.alternate,l);break;default:Rr(a,l)}n=n.sibling}}var Ir=8192;function sa(e){if(e.subtreeFlags&Ir)for(e=e.child;e!==null;)rg(e),e=e.sibling}function rg(e){switch(e.tag){case 26:sa(e),e.flags&Ir&&e.memoizedState!==null&&Jb(on,e.memoizedState,e.memoizedProps);break;case 5:sa(e);break;case 3:case 4:var n=on;on=Io(e.stateNode.containerInfo),sa(e),on=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ir,Ir=16777216,sa(e),Ir=n):sa(e));break;default:sa(e)}}function lg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Dr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ht=l,cg(l,e)}lg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)og(e),e=e.sibling}function og(e){switch(e.tag){case 0:case 11:case 15:Dr(e),e.flags&2048&&Ei(9,e,e.return);break;case 3:Dr(e);break;case 12:Dr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,_o(e)):Dr(e);break;default:Dr(e)}}function _o(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ht=l,cg(l,e)}lg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ei(8,n,n.return),_o(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,_o(n));break;default:_o(n)}e=e.sibling}}function cg(e,n){for(;ht!==null;){var a=ht;switch(a.tag){case 0:case 11:case 15:Ei(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ht=l;else e:for(a=e;ht!==null;){l=ht;var c=l.sibling,d=l.return;if(eg(l),l===a){ht=null;break e}if(c!==null){c.return=d,ht=c;break e}ht=d}}}var mb={getCacheForType:function(e){var n=Tt(rt),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},gb=typeof WeakMap=="function"?WeakMap:Map,Re=0,je=null,me=null,be=0,Ie=0,qt=null,Ci=!1,aa=!1,fd=!1,Yn=0,Ye=0,Ai=0,_s=0,hd=0,tn=0,ra=0,xr=null,kt=null,pd=!1,md=0,vo=1/0,yo=null,Ni=null,St=0,Ri=null,la=null,oa=0,gd=0,_d=null,ug=null,Or=0,vd=null;function Gt(){if((Re&2)!==0&&be!==0)return be&-be;if(O.T!==null){var e=Xs;return e!==0?e:Cd()}return Ka()}function dg(){tn===0&&(tn=(be&536870912)===0||Ae?ri():536870912);var e=en.current;return e!==null&&(e.flags|=32),tn}function Ft(e,n,a){(e===je&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&(ca(e,0),Ii(e,be,tn,!1)),Sn(e,a),((Re&2)===0||e!==je)&&(e===je&&((Re&2)===0&&(_s|=a),Ye===4&&Ii(e,be,tn,!1)),An(e))}function fg(e,n,a){if((Re&6)!==0)throw Error(r(327));var l=!a&&(n&124)===0&&(n&e.expiredLanes)===0||ns(e,n),c=l?yb(e,n):bd(e,n,!0),d=l;do{if(c===0){aa&&!l&&Ii(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!_b(a)){c=bd(e,n,!1),d=!1;continue}if(c===2){if(d=n,e.errorRecoveryDisabledLanes&d)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){n=h;e:{var _=e;c=xr;var b=_.current.memoizedState.isDehydrated;if(b&&(ca(_,h).flags|=256),h=bd(_,h,!1),h!==2){if(fd&&!b){_.errorRecoveryDisabledLanes|=d,_s|=d,c=4;break e}d=kt,kt=c,d!==null&&(kt===null?kt=d:kt.push.apply(kt,d))}c=h}if(d=!1,c!==2)continue}}if(c===1){ca(e,0),Ii(e,n,0,!0);break}e:{switch(l=e,d=c,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Ii(l,n,tn,!Ci);break e;case 2:kt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(c=md+300-vt(),10<c)){if(Ii(l,n,tn,!Ci),Ga(l,0,!0)!==0)break e;l.timeoutHandle=Bg(hg.bind(null,l,a,kt,yo,pd,n,tn,_s,ra,Ci,d,2,-0,0),c);break e}hg(l,a,kt,yo,pd,n,tn,_s,ra,Ci,d,0,-0,0)}}break}while(!0);An(e)}function hg(e,n,a,l,c,d,h,_,b,N,M,L,I,D){if(e.timeoutHandle=-1,L=n.subtreeFlags,(L&8192||(L&16785408)===16785408)&&(Pr={stylesheets:null,count:0,unsuspend:Zb},rg(n),L=eE(),L!==null)){e.cancelPendingCommit=L(Sg.bind(null,e,n,d,a,l,c,h,_,b,M,1,I,D)),Ii(e,d,h,!N);return}Sg(e,n,d,a,l,c,h,_,b)}function _b(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],d=c.getSnapshot;c=c.value;try{if(!Pt(d(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ii(e,n,a,l){n&=~hd,n&=~_s,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var c=n;0<c;){var d=31-de(c),h=1<<d;l[d]=-1,c&=~h}a!==0&&Il(e,a,n)}function So(){return(Re&6)===0?(Mr(0),!1):!0}function yd(){if(me!==null){if(Ie===0)var e=me.return;else e=me,zn=ds=null,Lu(e),ta=null,wr=0,e=me;for(;e!==null;)Ym(e.alternate,e),e=e.return;me=null}}function ca(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ub(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),yd(),je=e,me=a=Un(e.current,null),be=n,Ie=0,qt=null,Ci=!1,aa=ns(e,n),fd=!1,ra=tn=hd=_s=Ai=Ye=0,kt=xr=null,pd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var c=31-de(l),d=1<<c;n|=e[c],l&=~d}return Yn=n,Bl(),a}function pg(e,n){ue=null,O.H=ro,n===pr||n===Wl?(n=xp(),Ie=3):n===Rp?(n=xp(),Ie=4):Ie=n===Om?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,qt=n,me===null&&(Ye=1,fo(e,Wt(n,e.current)))}function mg(){var e=O.H;return O.H=ro,e===null?ro:e}function gg(){var e=O.A;return O.A=mb,e}function Sd(){Ye=4,Ci||(be&4194048)!==be&&en.current!==null||(aa=!0),(Ai&134217727)===0&&(_s&134217727)===0||je===null||Ii(je,be,tn,!1)}function bd(e,n,a){var l=Re;Re|=2;var c=mg(),d=gg();(je!==e||be!==n)&&(yo=null,ca(e,n)),n=!1;var h=Ye;e:do try{if(Ie!==0&&me!==null){var _=me,b=qt;switch(Ie){case 8:yd(),h=6;break e;case 3:case 2:case 9:case 6:en.current===null&&(n=!0);var N=Ie;if(Ie=0,qt=null,ua(e,_,b,N),a&&aa){h=0;break e}break;default:N=Ie,Ie=0,qt=null,ua(e,_,b,N)}}vb(),h=Ye;break}catch(M){pg(e,M)}while(!0);return n&&e.shellSuspendCounter++,zn=ds=null,Re=l,O.H=c,O.A=d,me===null&&(je=null,be=0,Bl()),h}function vb(){for(;me!==null;)_g(me)}function yb(e,n){var a=Re;Re|=2;var l=mg(),c=gg();je!==e||be!==n?(yo=null,vo=vt()+500,ca(e,n)):aa=ns(e,n);e:do try{if(Ie!==0&&me!==null){n=me;var d=qt;t:switch(Ie){case 1:Ie=0,qt=null,ua(e,n,d,1);break;case 2:case 9:if(Ip(d)){Ie=0,qt=null,vg(n);break}n=function(){Ie!==2&&Ie!==9||je!==e||(Ie=7),An(e)},d.then(n,n);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Ip(d)?(Ie=0,qt=null,vg(n)):(Ie=0,qt=null,ua(e,n,d,7));break;case 5:var h=null;switch(me.tag){case 26:h=me.memoizedState;case 5:case 27:var _=me;if(!h||Jg(h)){Ie=0,qt=null;var b=_.sibling;if(b!==null)me=b;else{var N=_.return;N!==null?(me=N,bo(N)):me=null}break t}}Ie=0,qt=null,ua(e,n,d,5);break;case 6:Ie=0,qt=null,ua(e,n,d,6);break;case 8:yd(),Ye=6;break e;default:throw Error(r(462))}}Sb();break}catch(M){pg(e,M)}while(!0);return zn=ds=null,O.H=l,O.A=c,Re=a,me!==null?0:(je=null,be=0,Bl(),Ye)}function Sb(){for(;me!==null&&!Ba();)_g(me)}function _g(e){var n=Gm(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,n===null?bo(e):me=n}function vg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=zm(a,n,n.pendingProps,n.type,void 0,be);break;case 11:n=zm(a,n,n.pendingProps,n.type.render,n.ref,be);break;case 5:Lu(n);default:Ym(a,n),n=me=yp(n,Yn),n=Gm(a,n,Yn)}e.memoizedProps=e.pendingProps,n===null?bo(e):me=n}function ua(e,n,a,l){zn=ds=null,Lu(n),ta=null,wr=0;var c=n.return;try{if(cb(e,c,n,a,be)){Ye=1,fo(e,Wt(a,e.current)),me=null;return}}catch(d){if(c!==null)throw me=c,d;Ye=1,fo(e,Wt(a,e.current)),me=null;return}n.flags&32768?(Ae||l===1?e=!0:aa||(be&536870912)!==0?e=!1:(Ci=e=!0,(l===2||l===9||l===3||l===6)&&(l=en.current,l!==null&&l.tag===13&&(l.flags|=16384))),yg(n,e)):bo(n)}function bo(e){var n=e;do{if((n.flags&32768)!==0){yg(n,Ci);return}e=n.return;var a=db(n.alternate,n,Yn);if(a!==null){me=a;return}if(n=n.sibling,n!==null){me=n;return}me=n=e}while(n!==null);Ye===0&&(Ye=5)}function yg(e,n){do{var a=fb(e.alternate,e);if(a!==null){a.flags&=32767,me=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){me=e;return}me=e=a}while(e!==null);Ye=6,me=null}function Sg(e,n,a,l,c,d,h,_,b){e.cancelPendingCommit=null;do Eo();while(St!==0);if((Re&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=du,li(e,a,d,h,_,b),e===je&&(me=je=null,be=0),la=n,Ri=e,oa=a,gd=d,_d=c,ug=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Tb(ts,function(){return Cg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,c=G.p,G.p=2,h=Re,Re|=4;try{hb(e,n,a)}finally{Re=h,G.p=c,O.T=l}}St=1,bg(),Eg(),wg()}}function bg(){if(St===1){St=0;var e=Ri,n=la,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var l=G.p;G.p=2;var c=Re;Re|=4;try{ig(n,e);var d=Md,h=cp(e.containerInfo),_=d.focusedElem,b=d.selectionRange;if(h!==_&&_&&_.ownerDocument&&op(_.ownerDocument.documentElement,_)){if(b!==null&&ru(_)){var N=b.start,M=b.end;if(M===void 0&&(M=N),"selectionStart"in _)_.selectionStart=N,_.selectionEnd=Math.min(M,_.value.length);else{var L=_.ownerDocument||document,I=L&&L.defaultView||window;if(I.getSelection){var D=I.getSelection(),re=_.textContent.length,ee=Math.min(b.start,re),Oe=b.end===void 0?ee:Math.min(b.end,re);!D.extend&&ee>Oe&&(h=Oe,Oe=ee,ee=h);var C=lp(_,ee),T=lp(_,Oe);if(C&&T&&(D.rangeCount!==1||D.anchorNode!==C.node||D.anchorOffset!==C.offset||D.focusNode!==T.node||D.focusOffset!==T.offset)){var A=L.createRange();A.setStart(C.node,C.offset),D.removeAllRanges(),ee>Oe?(D.addRange(A),D.extend(T.node,T.offset)):(A.setEnd(T.node,T.offset),D.addRange(A))}}}}for(L=[],D=_;D=D.parentNode;)D.nodeType===1&&L.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<L.length;_++){var U=L[_];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}ko=!!Od,Md=Od=null}finally{Re=c,G.p=l,O.T=a}}e.current=n,St=2}}function Eg(){if(St===2){St=0;var e=Ri,n=la,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var l=G.p;G.p=2;var c=Re;Re|=4;try{Jm(e,n.alternate,n)}finally{Re=c,G.p=l,O.T=a}}St=3}}function wg(){if(St===4||St===3){St=0,Al();var e=Ri,n=la,a=oa,l=ug;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?St=5:(St=0,la=Ri=null,Tg(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ni=null),Us(a),n=n.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ai,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=O.T,c=G.p,G.p=2,O.T=null;try{for(var d=e.onRecoverableError,h=0;h<l.length;h++){var _=l[h];d(_.value,{componentStack:_.stack})}}finally{O.T=n,G.p=c}}(oa&3)!==0&&Eo(),An(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===vd?Or++:(Or=0,vd=e):Or=0,Mr(0)}}function Tg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,fr(n)))}function Eo(e){return bg(),Eg(),wg(),Cg()}function Cg(){if(St!==5)return!1;var e=Ri,n=gd;gd=0;var a=Us(oa),l=O.T,c=G.p;try{G.p=32>a?32:a,O.T=null,a=_d,_d=null;var d=Ri,h=oa;if(St=0,la=Ri=null,oa=0,(Re&6)!==0)throw Error(r(331));var _=Re;if(Re|=4,og(d.current),ag(d,d.current,h,a),Re=_,Mr(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ai,d)}catch{}return!0}finally{G.p=c,O.T=l,Tg(e,n)}}function Ag(e,n,a){n=Wt(a,n),n=Wu(e.stateNode,n,2),e=vi(e,n,2),e!==null&&(Sn(e,2),An(e))}function Ue(e,n,a){if(e.tag===3)Ag(e,e,a);else for(;n!==null;){if(n.tag===3){Ag(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ni===null||!Ni.has(l))){e=Wt(a,e),a=Dm(2),l=vi(n,a,2),l!==null&&(xm(a,l,n,e),Sn(l,2),An(l));break}}n=n.return}}function Ed(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new gb;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(a)||(fd=!0,c.add(a),e=bb.bind(null,e,n,a),n.then(e,e))}function bb(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,je===e&&(be&a)===a&&(Ye===4||Ye===3&&(be&62914560)===be&&300>vt()-md?(Re&2)===0&&ca(e,0):hd|=a,ra===be&&(ra=0)),An(e)}function Ng(e,n){n===0&&(n=Ms()),e=Fs(e,n),e!==null&&(Sn(e,n),An(e))}function Eb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Ng(e,a)}function wb(e,n){var a=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Ng(e,a)}function Tb(e,n){return Kt(e,n)}var wo=null,da=null,wd=!1,To=!1,Td=!1,vs=0;function An(e){e!==da&&e.next===null&&(da===null?wo=da=e:da=da.next=e),To=!0,wd||(wd=!0,Ab())}function Mr(e,n){if(!Td&&To){Td=!0;do for(var a=!1,l=wo;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var h=l.suspendedLanes,_=l.pingedLanes;d=(1<<31-de(42|e)+1)-1,d&=c&~(h&~_),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,xg(l,d))}else d=be,d=Ga(l,l===je?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ns(l,d)||(a=!0,xg(l,d));l=l.next}while(a);Td=!1}}function Cb(){Rg()}function Rg(){To=wd=!1;var e=0;vs!==0&&(kb()&&(e=vs),vs=0);for(var n=vt(),a=null,l=wo;l!==null;){var c=l.next,d=Ig(l,n);d===0?(l.next=null,a===null?wo=c:a.next=c,c===null&&(da=a)):(a=l,(e!==0||(d&3)!==0)&&(To=!0)),l=c}Mr(e)}function Ig(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var h=31-de(d),_=1<<h,b=c[h];b===-1?((_&a)===0||(_&l)!==0)&&(c[h]=yn(_,n)):b<=n&&(e.expiredLanes|=_),d&=~_}if(n=je,a=be,a=Ga(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&rn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ns(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&rn(l),Us(a)){case 2:case 8:a=Va;break;case 32:a=ts;break;case 268435456:a=qa;break;default:a=ts}return l=Dg.bind(null,e),a=Kt(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&rn(l),e.callbackPriority=2,e.callbackNode=null,2}function Dg(e,n){if(St!==0&&St!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Eo()&&e.callbackNode!==a)return null;var l=be;return l=Ga(e,e===je?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(fg(e,l,n),Ig(e,vt()),e.callbackNode!=null&&e.callbackNode===a?Dg.bind(null,e):null)}function xg(e,n){if(Eo())return null;fg(e,n,!0)}function Ab(){Lb(function(){(Re&6)!==0?Kt(es,Cb):Rg()})}function Cd(){return vs===0&&(vs=ri()),vs}function Og(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:kl(""+e)}function Mg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Nb(e,n,a,l,c){if(n==="submit"&&a&&a.stateNode===c){var d=Og((c[Et]||null).action),h=l.submitter;h&&(n=(n=h[Et]||null)?Og(n.formAction):h.getAttribute("formAction"),n!==null&&(d=n,h=null));var _=new zl("action","action",null,l,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vs!==0){var b=h?Mg(c,h):new FormData(c);Fu(a,{pending:!0,data:b,method:c.method,action:d},null,b)}}else typeof d=="function"&&(_.preventDefault(),b=h?Mg(c,h):new FormData(c),Fu(a,{pending:!0,data:b,method:c.method,action:d},d,b))},currentTarget:c}]})}}for(var Ad=0;Ad<uu.length;Ad++){var Nd=uu[Ad],Rb=Nd.toLowerCase(),Ib=Nd[0].toUpperCase()+Nd.slice(1);ln(Rb,"on"+Ib)}ln(fp,"onAnimationEnd"),ln(hp,"onAnimationIteration"),ln(pp,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(Y0,"onTransitionRun"),ln(K0,"onTransitionStart"),ln(Q0,"onTransitionCancel"),ln(mp,"onTransitionEnd"),P("onMouseEnter",["mouseout","mouseover"]),P("onMouseLeave",["mouseout","mouseover"]),P("onPointerEnter",["pointerout","pointerover"]),P("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Db=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kr));function kg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var h=l.length-1;0<=h;h--){var _=l[h],b=_.instance,N=_.currentTarget;if(_=_.listener,b!==d&&c.isPropagationStopped())break e;d=_,c.currentTarget=N;try{d(c)}catch(M){uo(M)}c.currentTarget=null,d=b}else for(h=0;h<l.length;h++){if(_=l[h],b=_.instance,N=_.currentTarget,_=_.listener,b!==d&&c.isPropagationStopped())break e;d=_,c.currentTarget=N;try{d(c)}catch(M){uo(M)}c.currentTarget=null,d=b}}}}function ge(e,n){var a=n[Xa];a===void 0&&(a=n[Xa]=new Set);var l=e+"__bubble";a.has(l)||(Ug(n,e,2,!1),a.add(l))}function Rd(e,n,a){var l=0;n&&(l|=4),Ug(a,e,l,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Id(e){if(!e[Co]){e[Co]=!0,$a.forEach(function(a){a!=="selectionchange"&&(Db.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Co]||(n[Co]=!0,Rd("selectionchange",!1,n))}}function Ug(e,n,a,l){switch(a_(n)){case 2:var c=iE;break;case 8:c=sE;break;default:c=qd}a=c.bind(null,n,a,e),c=void 0,!$c||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function Dd(e,n,a,l,c){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var _=l.stateNode.containerInfo;if(_===c)break;if(h===4)for(h=l.return;h!==null;){var b=h.tag;if((b===3||b===4)&&h.stateNode.containerInfo===c)return;h=h.return}for(;_!==null;){if(h=ui(_),h===null)return;if(b=h.tag,b===5||b===6||b===26||b===27){l=d=h;continue e}_=_.parentNode}}l=l.return}Vh(function(){var N=d,M=Xc(a),L=[];e:{var I=gp.get(e);if(I!==void 0){var D=zl,re=e;switch(e){case"keypress":if(Ll(a)===0)break e;case"keydown":case"keyup":D=T0;break;case"focusin":re="focus",D=tu;break;case"focusout":re="blur",D=tu;break;case"beforeblur":case"afterblur":D=tu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=N0;break;case fp:case hp:case pp:D=m0;break;case mp:D=I0;break;case"scroll":case"scrollend":D=u0;break;case"wheel":D=x0;break;case"copy":case"cut":case"paste":D=_0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Kh;break;case"toggle":case"beforetoggle":D=M0}var ee=(n&4)!==0,Oe=!ee&&(e==="scroll"||e==="scrollend"),C=ee?I!==null?I+"Capture":null:I;ee=[];for(var T=N,A;T!==null;){var U=T;if(A=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||A===null||C===null||(U=Ja(T,C),U!=null&&ee.push(Ur(T,U,A))),Oe)break;T=T.return}0<ee.length&&(I=new D(I,re,null,a,M),L.push({event:I,listeners:ee}))}}if((n&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",I&&a!==Qc&&(re=a.relatedTarget||a.fromElement)&&(ui(re)||re[oi]))break e;if((D||I)&&(I=M.window===M?M:(I=M.ownerDocument)?I.defaultView||I.parentWindow:window,D?(re=a.relatedTarget||a.toElement,D=N,re=re?ui(re):null,re!==null&&(Oe=u(re),ee=re.tag,re!==Oe||ee!==5&&ee!==27&&ee!==6)&&(re=null)):(D=null,re=N),D!==re)){if(ee=Fh,U="onMouseLeave",C="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ee=Kh,U="onPointerLeave",C="onPointerEnter",T="pointer"),Oe=D==null?I:fi(D),A=re==null?I:fi(re),I=new ee(U,T+"leave",D,a,M),I.target=Oe,I.relatedTarget=A,U=null,ui(M)===N&&(ee=new ee(C,T+"enter",re,a,M),ee.target=A,ee.relatedTarget=Oe,U=ee),Oe=U,D&&re)t:{for(ee=D,C=re,T=0,A=ee;A;A=fa(A))T++;for(A=0,U=C;U;U=fa(U))A++;for(;0<T-A;)ee=fa(ee),T--;for(;0<A-T;)C=fa(C),A--;for(;T--;){if(ee===C||C!==null&&ee===C.alternate)break t;ee=fa(ee),C=fa(C)}ee=null}else ee=null;D!==null&&Lg(L,I,D,ee,!1),re!==null&&Oe!==null&&Lg(L,Oe,re,ee,!0)}}e:{if(I=N?fi(N):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var Y=tp;else if(Jh(I))if(np)Y=q0;else{Y=B0;var fe=H0}else D=I.nodeName,!D||D.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?N&&Kc(N.elementType)&&(Y=tp):Y=V0;if(Y&&(Y=Y(e,N))){ep(L,Y,a,M);break e}fe&&fe(e,I,N),e==="focusout"&&N&&I.type==="number"&&N.memoizedProps.value!=null&&Yc(I,"number",I.value)}switch(fe=N?fi(N):window,e){case"focusin":(Jh(fe)||fe.contentEditable==="true")&&(Vs=fe,lu=N,lr=null);break;case"focusout":lr=lu=Vs=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,up(L,a,M);break;case"selectionchange":if(F0)break;case"keydown":case"keyup":up(L,a,M)}var X;if(iu)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else Bs?$h(e,a)&&(ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(Qh&&a.locale!=="ko"&&(Bs||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Bs&&(X=qh()):(pi=M,Zc="value"in pi?pi.value:pi.textContent,Bs=!0)),fe=Ao(N,ne),0<fe.length&&(ne=new Yh(ne,e,null,a,M),L.push({event:ne,listeners:fe}),X?ne.data=X:(X=Zh(a),X!==null&&(ne.data=X)))),(X=U0?L0(e,a):j0(e,a))&&(ne=Ao(N,"onBeforeInput"),0<ne.length&&(fe=new Yh("onBeforeInput","beforeinput",null,a,M),L.push({event:fe,listeners:ne}),fe.data=X)),Nb(L,e,N,a,M)}kg(L,n)})}function Ur(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Ao(e,n){for(var a=n+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Ja(e,a),c!=null&&l.unshift(Ur(e,c,d)),c=Ja(e,n),c!=null&&l.push(Ur(e,c,d))),e.tag===3)return l;e=e.return}return[]}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lg(e,n,a,l,c){for(var d=n._reactName,h=[];a!==null&&a!==l;){var _=a,b=_.alternate,N=_.stateNode;if(_=_.tag,b!==null&&b===l)break;_!==5&&_!==26&&_!==27||N===null||(b=N,c?(N=Ja(a,d),N!=null&&h.unshift(Ur(a,N,b))):c||(N=Ja(a,d),N!=null&&h.push(Ur(a,N,b)))),a=a.return}h.length!==0&&e.push({event:n,listeners:h})}var xb=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function jg(e){return(typeof e=="string"?e:""+e).replace(xb,`
`).replace(Ob,"")}function zg(e,n){return n=jg(n),jg(e)===n}function No(){}function xe(e,n,a,l,c,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||zs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&zs(e,""+l);break;case"className":nt(e,"class",l);break;case"tabIndex":nt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,a,l);break;case"style":Hh(e,l,d);break;case"data":if(n!=="object"){nt(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=kl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&xe(e,n,"name",c.name,c,null),xe(e,n,"formEncType",c.formEncType,c,null),xe(e,n,"formMethod",c.formMethod,c,null),xe(e,n,"formTarget",c.formTarget,c,null)):(xe(e,n,"encType",c.encType,c,null),xe(e,n,"method",c.method,c,null),xe(e,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=kl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=No);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=kl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ge("beforetoggle",e),ge("toggle",e),Be(e,"popover",l);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Be(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=o0.get(a)||a,Be(e,a,l))}}function xd(e,n,a,l,c,d){switch(a){case"style":Hh(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?zs(e,l):(typeof l=="number"||typeof l=="bigint")&&zs(e,""+l);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"onClick":l!=null&&(e.onclick=No);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),d=e[Et]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Be(e,a,l)}}}function bt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var l=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var h=a[d];if(h!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:xe(e,n,d,h,a,null)}}c&&xe(e,n,"srcSet",a.srcSet,a,null),l&&xe(e,n,"src",a.src,a,null);return;case"input":ge("invalid",e);var _=d=h=c=null,b=null,N=null;for(l in a)if(a.hasOwnProperty(l)){var M=a[l];if(M!=null)switch(l){case"name":c=M;break;case"type":h=M;break;case"checked":b=M;break;case"defaultChecked":N=M;break;case"value":d=M;break;case"defaultValue":_=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,n));break;default:xe(e,n,l,M,a,null)}}Lh(e,d,_,b,N,h,c,!1),Ol(e);return;case"select":ge("invalid",e),l=h=d=null;for(c in a)if(a.hasOwnProperty(c)&&(_=a[c],_!=null))switch(c){case"value":d=_;break;case"defaultValue":h=_;break;case"multiple":l=_;default:xe(e,n,c,_,a,null)}n=d,a=h,e.multiple=!!l,n!=null?js(e,!!l,n,!1):a!=null&&js(e,!!l,a,!0);return;case"textarea":ge("invalid",e),d=c=l=null;for(h in a)if(a.hasOwnProperty(h)&&(_=a[h],_!=null))switch(h){case"value":l=_;break;case"defaultValue":c=_;break;case"children":d=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:xe(e,n,h,_,a,null)}zh(e,l,c,d),Ol(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(l=a[b],l!=null))switch(b){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xe(e,n,b,l,a,null)}return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(l=0;l<kr.length;l++)ge(kr[l],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:xe(e,n,N,l,a,null)}return;default:if(Kc(n)){for(M in a)a.hasOwnProperty(M)&&(l=a[M],l!==void 0&&xd(e,n,M,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&xe(e,n,_,l,a,null))}function Mb(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,h=null,_=null,b=null,N=null,M=null;for(D in a){var L=a[D];if(a.hasOwnProperty(D)&&L!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":b=L;default:l.hasOwnProperty(D)||xe(e,n,D,null,l,L)}}for(var I in l){var D=l[I];if(L=a[I],l.hasOwnProperty(I)&&(D!=null||L!=null))switch(I){case"type":d=D;break;case"name":c=D;break;case"checked":N=D;break;case"defaultChecked":M=D;break;case"value":h=D;break;case"defaultValue":_=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,n));break;default:D!==L&&xe(e,n,I,D,l,L)}}Fc(e,h,_,b,N,M,d,c);return;case"select":D=h=_=I=null;for(d in a)if(b=a[d],a.hasOwnProperty(d)&&b!=null)switch(d){case"value":break;case"multiple":D=b;default:l.hasOwnProperty(d)||xe(e,n,d,null,l,b)}for(c in l)if(d=l[c],b=a[c],l.hasOwnProperty(c)&&(d!=null||b!=null))switch(c){case"value":I=d;break;case"defaultValue":_=d;break;case"multiple":h=d;default:d!==b&&xe(e,n,c,d,l,b)}n=_,a=h,l=D,I!=null?js(e,!!a,I,!1):!!l!=!!a&&(n!=null?js(e,!!a,n,!0):js(e,!!a,a?[]:"",!1));return;case"textarea":D=I=null;for(_ in a)if(c=a[_],a.hasOwnProperty(_)&&c!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:xe(e,n,_,null,l,c)}for(h in l)if(c=l[h],d=a[h],l.hasOwnProperty(h)&&(c!=null||d!=null))switch(h){case"value":I=c;break;case"defaultValue":D=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==d&&xe(e,n,h,c,l,d)}jh(e,I,D);return;case"option":for(var re in a)if(I=a[re],a.hasOwnProperty(re)&&I!=null&&!l.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:xe(e,n,re,null,l,I)}for(b in l)if(I=l[b],D=a[b],l.hasOwnProperty(b)&&I!==D&&(I!=null||D!=null))switch(b){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:xe(e,n,b,I,l,D)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in a)I=a[ee],a.hasOwnProperty(ee)&&I!=null&&!l.hasOwnProperty(ee)&&xe(e,n,ee,null,l,I);for(N in l)if(I=l[N],D=a[N],l.hasOwnProperty(N)&&I!==D&&(I!=null||D!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,n));break;default:xe(e,n,N,I,l,D)}return;default:if(Kc(n)){for(var Oe in a)I=a[Oe],a.hasOwnProperty(Oe)&&I!==void 0&&!l.hasOwnProperty(Oe)&&xd(e,n,Oe,void 0,l,I);for(M in l)I=l[M],D=a[M],!l.hasOwnProperty(M)||I===D||I===void 0&&D===void 0||xd(e,n,M,I,l,D);return}}for(var C in a)I=a[C],a.hasOwnProperty(C)&&I!=null&&!l.hasOwnProperty(C)&&xe(e,n,C,null,l,I);for(L in l)I=l[L],D=a[L],!l.hasOwnProperty(L)||I===D||I==null&&D==null||xe(e,n,L,I,l,D)}var Od=null,Md=null;function Ro(e){return e.nodeType===9?e:e.ownerDocument}function Pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function kd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ud=null;function kb(){var e=window.event;return e&&e.type==="popstate"?e===Ud?!1:(Ud=e,!0):(Ud=null,!1)}var Bg=typeof setTimeout=="function"?setTimeout:void 0,Ub=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,Lb=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(e){return Vg.resolve(null).then(e).catch(jb)}:Bg;function jb(e){setTimeout(function(){throw e})}function Di(e){return e==="head"}function qg(e,n){var a=n,l=0,c=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var h=e.ownerDocument;if(a&1&&Lr(h.documentElement),a&2&&Lr(h.body),a&4)for(a=h.head,Lr(a),h=a.firstChild;h;){var _=h.nextSibling,b=h.nodeName;h[ci]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=_}}if(c===0){e.removeChild(d),Gr(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Gr(n)}function Ld(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ld(a),Wa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function zb(e,n,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ci])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=cn(e.nextSibling),e===null)break}return null}function Pb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=cn(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Hb(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function cn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var zd=null;function Gg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Fg(e,n,a){switch(n=Ro(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Lr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Wa(e)}var nn=new Map,Yg=new Set;function Io(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kn=G.d;G.d={f:Bb,r:Vb,D:qb,C:Gb,L:Fb,m:Yb,X:Qb,S:Kb,M:Xb};function Bb(){var e=Kn.f(),n=So();return e||n}function Vb(e){var n=di(e);n!==null&&n.tag===5&&n.type==="form"?fm(n):Kn.r(e)}var ha=typeof document>"u"?null:document;function Kg(e,n,a){var l=ha;if(l&&typeof n=="string"&&n){var c=Xt(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Yg.has(c)||(Yg.add(c),e={rel:e,crossOrigin:a,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),bt(n,"link",e),We(n),l.head.appendChild(n)))}}function qb(e){Kn.D(e),Kg("dns-prefetch",e,null)}function Gb(e,n){Kn.C(e,n),Kg("preconnect",e,n)}function Fb(e,n,a){Kn.L(e,n,a);var l=ha;if(l&&e&&n){var c='link[rel="preload"][as="'+Xt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Xt(a.imageSizes)+'"]')):c+='[href="'+Xt(e)+'"]';var d=c;switch(n){case"style":d=pa(e);break;case"script":d=ma(e)}nn.has(d)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),nn.set(d,e),l.querySelector(c)!==null||n==="style"&&l.querySelector(jr(d))||n==="script"&&l.querySelector(zr(d))||(n=l.createElement("link"),bt(n,"link",e),We(n),l.head.appendChild(n)))}}function Yb(e,n){Kn.m(e,n);var a=ha;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Xt(l)+'"][href="'+Xt(e)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ma(e)}if(!nn.has(d)&&(e=y({rel:"modulepreload",href:e},n),nn.set(d,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zr(d)))return}l=a.createElement("link"),bt(l,"link",e),We(l),a.head.appendChild(l)}}}function Kb(e,n,a){Kn.S(e,n,a);var l=ha;if(l&&e){var c=On(l).hoistableStyles,d=pa(e);n=n||"default";var h=c.get(d);if(!h){var _={loading:0,preload:null};if(h=l.querySelector(jr(d)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=nn.get(d))&&Pd(e,a);var b=h=l.createElement("link");We(b),bt(b,"link",e),b._p=new Promise(function(N,M){b.onload=N,b.onerror=M}),b.addEventListener("load",function(){_.loading|=1}),b.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Do(h,n,l)}h={type:"stylesheet",instance:h,count:1,state:_},c.set(d,h)}}}function Qb(e,n){Kn.X(e,n);var a=ha;if(a&&e){var l=On(a).hoistableScripts,c=ma(e),d=l.get(c);d||(d=a.querySelector(zr(c)),d||(e=y({src:e,async:!0},n),(n=nn.get(c))&&Hd(e,n),d=a.createElement("script"),We(d),bt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Xb(e,n){Kn.M(e,n);var a=ha;if(a&&e){var l=On(a).hoistableScripts,c=ma(e),d=l.get(c);d||(d=a.querySelector(zr(c)),d||(e=y({src:e,async:!0,type:"module"},n),(n=nn.get(c))&&Hd(e,n),d=a.createElement("script"),We(d),bt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Qg(e,n,a,l){var c=(c=te.current)?Io(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=pa(a.href),a=On(c).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=pa(a.href);var d=On(c).hoistableStyles,h=d.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,h),(d=c.querySelector(jr(e)))&&!d._p&&(h.instance=d,h.state.loading=5),nn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},nn.set(e,a),d||Wb(c,e,a,h.state))),n&&l===null)throw Error(r(528,""));return h}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ma(a),a=On(c).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function pa(e){return'href="'+Xt(e)+'"'}function jr(e){return'link[rel="stylesheet"]['+e+"]"}function Xg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Wb(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),bt(n,"link",a),We(n),e.head.appendChild(n))}function ma(e){return'[src="'+Xt(e)+'"]'}function zr(e){return"script[async]"+e}function Wg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Xt(a.href)+'"]');if(l)return n.instance=l,We(l),l;var c=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),We(l),bt(l,"style",c),Do(l,a.precedence,e),n.instance=l;case"stylesheet":c=pa(a.href);var d=e.querySelector(jr(c));if(d)return n.state.loading|=4,n.instance=d,We(d),d;l=Xg(a),(c=nn.get(c))&&Pd(l,c),d=(e.ownerDocument||e).createElement("link"),We(d);var h=d;return h._p=new Promise(function(_,b){h.onload=_,h.onerror=b}),bt(d,"link",l),n.state.loading|=4,Do(d,a.precedence,e),n.instance=d;case"script":return d=ma(a.src),(c=e.querySelector(zr(d)))?(n.instance=c,We(c),c):(l=a,(c=nn.get(d))&&(l=y({},a),Hd(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),We(c),bt(c,"link",l),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Do(l,a.precedence,e));return n.instance}function Do(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,h=0;h<l.length;h++){var _=l[h];if(_.dataset.precedence===n)d=_;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Hd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var xo=null;function $g(e,n,a){if(xo===null){var l=new Map,c=xo=new Map;c.set(a,l)}else c=xo,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var d=a[c];if(!(d[ci]||d[dt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var h=d.getAttribute(n)||"";h=e+h;var _=l.get(h);_?_.push(d):l.set(h,[d])}}return l}function Zg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function $b(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Pr=null;function Zb(){}function Jb(e,n,a){if(Pr===null)throw Error(r(475));var l=Pr;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=pa(a.href),d=e.querySelector(jr(c));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Oo.bind(l),e.then(l,l)),n.state.loading|=4,n.instance=d,We(d);return}d=e.ownerDocument||e,a=Xg(a),(c=nn.get(c))&&Pd(a,c),d=d.createElement("link"),We(d);var h=d;h._p=new Promise(function(_,b){h.onload=_,h.onerror=b}),bt(d,"link",a),n.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Oo.bind(l),e.addEventListener("load",n),e.addEventListener("error",n))}}function eE(){if(Pr===null)throw Error(r(475));var e=Pr;return e.stylesheets&&e.count===0&&Bd(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&Bd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Oo(){if(this.count--,this.count===0){if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mo=null;function Bd(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mo=new Map,n.forEach(tE,e),Mo=null,Oo.call(e))}function tE(e,n){if(!(n.state.loading&4)){var a=Mo.get(e);if(a)var l=a.get(null);else{a=new Map,Mo.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var h=c[d];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}c=n.instance,h=c.getAttribute("data-precedence"),d=a.get(h)||l,d===l&&a.set(null,c),a.set(h,c),this.count++,l=Oo.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Hr={$$typeof:z,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function nE(e,n,a,l,c,d,h,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.hiddenUpdates=Fa(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function e_(e,n,a,l,c,d,h,_,b,N,M,L){return e=new nE(e,n,a,h,_,b,N,L),n=1,d===!0&&(n|=24),d=Ht(3,null,null,n),e.current=d,d.stateNode=e,n=Eu(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},Au(d),e}function t_(e){return e?(e=Ys,e):Ys}function n_(e,n,a,l,c,d){c=t_(c),l.context===null?l.context=c:l.pendingContext=c,l=_i(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=vi(e,l,n),a!==null&&(Ft(a,e,n),gr(a,e,n))}function i_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Vd(e,n){i_(e,n),(e=e.alternate)&&i_(e,n)}function s_(e){if(e.tag===13){var n=Fs(e,67108864);n!==null&&Ft(n,e,67108864),Vd(e,67108864)}}var ko=!0;function iE(e,n,a,l){var c=O.T;O.T=null;var d=G.p;try{G.p=2,qd(e,n,a,l)}finally{G.p=d,O.T=c}}function sE(e,n,a,l){var c=O.T;O.T=null;var d=G.p;try{G.p=8,qd(e,n,a,l)}finally{G.p=d,O.T=c}}function qd(e,n,a,l){if(ko){var c=Gd(l);if(c===null)Dd(e,n,l,Uo,a),r_(e,l);else if(rE(c,e,n,a,l))l.stopPropagation();else if(r_(e,l),n&4&&-1<aE.indexOf(e)){for(;c!==null;){var d=di(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var h=xn(d.pendingLanes);if(h!==0){var _=d;for(_.pendingLanes|=2,_.entangledLanes|=2;h;){var b=1<<31-de(h);_.entanglements[1]|=b,h&=~b}An(d),(Re&6)===0&&(vo=vt()+500,Mr(0))}}break;case 13:_=Fs(d,2),_!==null&&Ft(_,d,2),So(),Vd(d,2)}if(d=Gd(l),d===null&&Dd(e,n,l,Uo,a),d===c)break;c=d}c!==null&&l.stopPropagation()}else Dd(e,n,l,null,a)}}function Gd(e){return e=Xc(e),Fd(e)}var Uo=null;function Fd(e){if(Uo=null,e=ui(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Uo=e,null}function a_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jc()){case es:return 2;case Va:return 8;case ts:case zc:return 32;case qa:return 268435456;default:return 32}default:return 32}}var Yd=!1,xi=null,Oi=null,Mi=null,Br=new Map,Vr=new Map,ki=[],aE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(e,n){switch(e){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Br.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(n.pointerId)}}function qr(e,n,a,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},n!==null&&(n=di(n),n!==null&&s_(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function rE(e,n,a,l,c){switch(n){case"focusin":return xi=qr(xi,e,n,a,l,c),!0;case"dragenter":return Oi=qr(Oi,e,n,a,l,c),!0;case"mouseover":return Mi=qr(Mi,e,n,a,l,c),!0;case"pointerover":var d=c.pointerId;return Br.set(d,qr(Br.get(d)||null,e,n,a,l,c)),!0;case"gotpointercapture":return d=c.pointerId,Vr.set(d,qr(Vr.get(d)||null,e,n,a,l,c)),!0}return!1}function l_(e){var n=ui(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,Qa(e.priority,function(){if(a.tag===13){var l=Gt();l=ks(l);var c=Fs(a,l);c!==null&&Ft(c,a,l),Vd(a,l)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Gd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Qc=l,a.target.dispatchEvent(l),Qc=null}else return n=di(a),n!==null&&s_(n),e.blockedOn=a,!1;n.shift()}return!0}function o_(e,n,a){Lo(e)&&a.delete(n)}function lE(){Yd=!1,xi!==null&&Lo(xi)&&(xi=null),Oi!==null&&Lo(Oi)&&(Oi=null),Mi!==null&&Lo(Mi)&&(Mi=null),Br.forEach(o_),Vr.forEach(o_)}function jo(e,n){e.blockedOn===n&&(e.blockedOn=null,Yd||(Yd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,lE)))}var zo=null;function c_(e){zo!==e&&(zo=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zo===e&&(zo=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],c=e[n+2];if(typeof l!="function"){if(Fd(l||a)===null)continue;break}var d=di(a);d!==null&&(e.splice(n,3),n-=3,Fu(d,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Gr(e){function n(b){return jo(b,e)}xi!==null&&jo(xi,e),Oi!==null&&jo(Oi,e),Mi!==null&&jo(Mi,e),Br.forEach(n),Vr.forEach(n);for(var a=0;a<ki.length;a++){var l=ki[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ki.length&&(a=ki[0],a.blockedOn===null);)l_(a),a.blockedOn===null&&ki.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],d=a[l+1],h=c[Et]||null;if(typeof d=="function")h||c_(a);else if(h){var _=null;if(d&&d.hasAttribute("formAction")){if(c=d,h=d[Et]||null)_=h.formAction;else if(Fd(c)!==null)continue}else _=h.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),c_(a)}}}function Kd(e){this._internalRoot=e}Po.prototype.render=Kd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Gt();n_(a,l,e,n,null,null)},Po.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;n_(e.current,2,null,e,null,null),So(),n[oi]=null}};function Po(e){this._internalRoot=e}Po.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ka();e={blockedOn:null,target:e,priority:n};for(var a=0;a<ki.length&&n!==0&&n<ki[a].priority;a++);ki.splice(a,0,e),a===0&&l_(e)}};var u_=t.version;if(u_!=="19.1.0")throw Error(r(527,u_,"19.1.0"));G.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=m(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var oE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{ai=Ho.inject(oE),Nt=Ho}catch{}}return Yr.createRoot=function(e,n){if(!o(e))throw Error(r(299));var a=!1,l="",c=Am,d=Nm,h=Rm,_=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(h=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(_=n.unstable_transitionCallbacks)),n=e_(e,1,!1,null,null,a,l,c,d,h,_,null),e[oi]=n.current,Id(e),new Kd(n)},Yr.hydrateRoot=function(e,n,a){if(!o(e))throw Error(r(299));var l=!1,c="",d=Am,h=Nm,_=Rm,b=null,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(N=a.formState)),n=e_(e,1,!0,n,a??null,l,c,d,h,_,b,N),n.context=t_(null),a=n.current,l=Gt(),l=ks(l),c=_i(l),c.callback=null,vi(a,c,l),a=l,n.current.lanes=a,Sn(n,a),An(n),e[oi]=n.current,Id(e),new Po(n)},Yr.version="19.1.0",Yr}var S_;function SE(){if(S_)return Wd.exports;S_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Wd.exports=yE(),Wd.exports}var bE=SE();const EE=()=>{};var b_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(s,t){if(!s)throw Oa(t)},Oa=function(s){return new Error("Firebase Database ("+jv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},wE=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const o=s[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[i++],f=s[i++],p=s[i++],m=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;t[r++]=String.fromCharCode(55296+(m>>10)),t[r++]=String.fromCharCode(56320+(m&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,p=f?s[o+1]:0,m=o+2<s.length,g=m?s[o+2]:0,y=u>>2,E=(u&3)<<4|p>>4;let S=(p&15)<<2|g>>6,R=g&63;m||(R=64,f||(S=64)),r.push(i[y],i[E],i[S],i[R])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(zv(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):wE(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=i[s.charAt(o++)],p=o<s.length?i[s.charAt(o)]:0;++o;const g=o<s.length?i[s.charAt(o)]:64;++o;const E=o<s.length?i[s.charAt(o)]:64;if(++o,u==null||p==null||g==null||E==null)throw new TE;const S=u<<2|p>>4;if(r.push(S),g!==64){const R=p<<4&240|g>>2;if(r.push(R),E!==64){const k=g<<6&192|E;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class TE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pv=function(s){const t=zv(s);return Bf.encodeByteArray(t,!0)},Wo=function(s){return Pv(s).replace(/\./g,"")},$o=function(s){try{return Bf.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(s){return Hv(void 0,s)}function Hv(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!AE(i)||(s[i]=Hv(s[i],t[i]));return s}function AE(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=()=>NE().__FIREBASE_DEFAULTS__,IE=()=>{if(typeof process>"u"||typeof b_>"u")return;const s=b_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},DE=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&$o(s[1]);return t&&JSON.parse(t)},Vf=()=>{try{return EE()||RE()||IE()||DE()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Bv=s=>{var t,i;return(i=(t=Vf())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[s]},xE=s=>{const t=Bv(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Vv=()=>{var s;return(s=Vf())===null||s===void 0?void 0:s.config},qv=s=>{var t;return(t=Vf())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gv(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Wo(JSON.stringify(i)),Wo(JSON.stringify(f)),""].join(".")}const $r={};function ME(){const s={prod:[],emulator:[]};for(const t of Object.keys($r))$r[t]?s.emulator.push(t):s.prod.push(t);return s}function kE(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let E_=!1;function Fv(s,t){if(typeof window>"u"||typeof document>"u"||!Ma(window.location.host)||$r[s]===t||$r[s]||E_)return;$r[s]=t;function i(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=ME().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{E_=!0,f()},S}function y(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=kE(r),R=i("text"),k=document.getElementById(R)||document.createElement("span"),q=i("learnmore"),K=document.getElementById(q)||document.createElement("a"),ve=i("preprendIcon"),Q=document.getElementById(ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const z=S.element;p(z),y(K,q);const W=g();m(Q,ve),z.append(Q,k,K,W),document.body.appendChild(z)}u?(k.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function UE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LE(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Yv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jE(){const s=Dt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function zE(){return jv.NODE_ADMIN===!0}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function HE(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="FirebaseError";class Ji extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=BE,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?VE(u,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Ji(o,p,r)}}function VE(s,t){return s.replace(qE,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const qE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(s){return JSON.parse(s)}function ot(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=function(s){let t={},i={},r={},o="";try{const u=s.split(".");t=al($o(u[0])||""),i=al($o(u[1])||""),o=u[2],r=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:r,signature:o}},GE=function(s){const t=Kv(s),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},FE=function(s){const t=Kv(s).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Na(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function _f(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Zo(s,t,i){const r={};for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=t.call(i,s[o],o,s));return r}function Ts(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=s[o],f=t[o];if(w_(u)&&w_(f)){if(!Ts(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function w_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const r=this.W_;if(typeof t=="string")for(let E=0;E<16;E++)r[E]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let E=0;E<16;E++)r[E]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let E=16;E<80;E++){const S=r[E-3]^r[E-8]^r[E-14]^r[E-16];r[E]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],f=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,y;for(let E=0;E<80;E++){E<40?E<20?(g=p^u&(f^p),y=1518500249):(g=u^f^p,y=1859775393):E<60?(g=u&f|p&(u|f),y=2400959708):(g=u^f^p,y=3395469782);const S=(o<<5|o>>>27)+g+m+y+r[E]&4294967295;m=p,p=f,f=(u<<30|u>>>2)&4294967295,u=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const r=i-this.blockSize;let o=0;const u=this.buf_;let f=this.inbuf_;for(;o<i;){if(f===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(u[f]=t.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}else for(;o<i;)if(u[f]=t[o],++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}this.inbuf_=f,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[o]>>u&255,++r;return t}}function KE(s,t){const i=new QE(s,t);return i.subscribe.bind(i)}class QE{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let o;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");XE(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:r},o.next===void 0&&(o.next=ef),o.error===void 0&&(o.error=ef),o.complete===void 0&&(o.complete=ef);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XE(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function ef(){}function Gf(s,t){return`${s} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,B(r<s.length,"Surrogate pair missing trail surrogate.");const f=s.charCodeAt(r)-56320;o=65536+(u<<10)+f}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},Ec=function(s){let t=0;for(let i=0;i<s.length;i++){const r=s.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s){return s&&s._delegate?s._delegate:s}class Cs{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new bc;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t?.identifier),o=(i=t?.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(JE(t))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ys){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ys){return this.instances.has(t)}getOptions(t=ys){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZE(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ys){return this.component?this.component.multipleInstances?t:ys:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZE(s){return s===ys?void 0:s}function JE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new $E(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Me||(Me={}));const tw={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},nw=Me.INFO,iw={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},sw=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=iw[t];if(o)console[o](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ff{constructor(t){this.name=t,this._logLevel=nw,this._logHandler=sw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}const aw=(s,t)=>t.some(i=>s instanceof i);let T_,C_;function rw(){return T_||(T_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lw(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qv=new WeakMap,vf=new WeakMap,Xv=new WeakMap,tf=new WeakMap,Yf=new WeakMap;function ow(s){const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(qi(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Qv.set(i,s)}).catch(()=>{}),Yf.set(t,s),t}function cw(s){if(vf.has(s))return;const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});vf.set(s,t)}let yf={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return vf.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Xv.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return qi(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function uw(s){yf=s(yf)}function dw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(nf(this),t,...i);return Xv.set(r,t.sort?t.sort():[t]),qi(r)}:lw().includes(s)?function(...t){return s.apply(nf(this),t),qi(Qv.get(this))}:function(...t){return qi(s.apply(nf(this),t))}}function fw(s){return typeof s=="function"?dw(s):(s instanceof IDBTransaction&&cw(s),aw(s,rw())?new Proxy(s,yf):s)}function qi(s){if(s instanceof IDBRequest)return ow(s);if(tf.has(s))return tf.get(s);const t=fw(s);return t!==s&&(tf.set(s,t),Yf.set(t,s)),t}const nf=s=>Yf.get(s);function hw(s,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,t),p=qi(f);return r&&f.addEventListener("upgradeneeded",m=>{r(qi(f.result),m.oldVersion,m.newVersion,qi(f.transaction),m)}),i&&f.addEventListener("blocked",m=>i(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const pw=["get","getKey","getAll","getAllKeys","count"],mw=["put","add","delete","clear"],sf=new Map;function A_(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(sf.get(t))return sf.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=mw.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||pw.includes(i)))return;const u=async function(f,...p){const m=this.transaction(f,o?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),o&&m.done]))[0]};return sf.set(t,u),u}uw(s=>({...s,get:(t,i,r)=>A_(t,i)||s.get(t,i,r),has:(t,i)=>!!A_(t,i)||s.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(_w(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function _w(s){const t=s.getComponent();return t?.type==="VERSION"}const Sf="@firebase/app",N_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Ff("@firebase/app"),vw="@firebase/app-compat",yw="@firebase/analytics-compat",Sw="@firebase/analytics",bw="@firebase/app-check-compat",Ew="@firebase/app-check",ww="@firebase/auth",Tw="@firebase/auth-compat",Cw="@firebase/database",Aw="@firebase/data-connect",Nw="@firebase/database-compat",Rw="@firebase/functions",Iw="@firebase/functions-compat",Dw="@firebase/installations",xw="@firebase/installations-compat",Ow="@firebase/messaging",Mw="@firebase/messaging-compat",kw="@firebase/performance",Uw="@firebase/performance-compat",Lw="@firebase/remote-config",jw="@firebase/remote-config-compat",zw="@firebase/storage",Pw="@firebase/storage-compat",Hw="@firebase/firestore",Bw="@firebase/ai",Vw="@firebase/firestore-compat",qw="firebase",Gw="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",Fw={[Sf]:"fire-core",[vw]:"fire-core-compat",[Sw]:"fire-analytics",[yw]:"fire-analytics-compat",[Ew]:"fire-app-check",[bw]:"fire-app-check-compat",[ww]:"fire-auth",[Tw]:"fire-auth-compat",[Cw]:"fire-rtdb",[Aw]:"fire-data-connect",[Nw]:"fire-rtdb-compat",[Rw]:"fire-fn",[Iw]:"fire-fn-compat",[Dw]:"fire-iid",[xw]:"fire-iid-compat",[Ow]:"fire-fcm",[Mw]:"fire-fcm-compat",[kw]:"fire-perf",[Uw]:"fire-perf-compat",[Lw]:"fire-rc",[jw]:"fire-rc-compat",[zw]:"fire-gcs",[Pw]:"fire-gcs-compat",[Hw]:"fire-fst",[Vw]:"fire-fst-compat",[Bw]:"fire-vertex","fire-js":"fire-js",[qw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Map,Yw=new Map,Ef=new Map;function R_(s,t){try{s.container.addComponent(t)}catch(i){Jn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function Ra(s){const t=s.name;if(Ef.has(t))return Jn.debug(`There were multiple attempts to register component ${t}.`),!1;Ef.set(t,s);for(const i of Jo.values())R_(i,s);for(const i of Yw.values())R_(i,s);return!0}function Kf(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function un(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new gl("app","Firebase",Kw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=Gw;function Qf(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:bf,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw Gi.create("bad-app-name",{appName:String(o)});if(i||(i=Vv()),!i)throw Gi.create("no-options");const u=Jo.get(o);if(u){if(Ts(i,u.options)&&Ts(r,u.config))return u;throw Gi.create("duplicate-app",{appName:o})}const f=new ew(o);for(const m of Ef.values())f.addComponent(m);const p=new Qw(i,r,f);return Jo.set(o,p),p}function Wv(s=bf){const t=Jo.get(s);if(!t&&s===bf&&Vv())return Qf();if(!t)throw Gi.create("no-app",{appName:s});return t}function Fi(s,t,i){var r;let o=(r=Fw[s])!==null&&r!==void 0?r:s;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const p=[`Unable to register library "${o}" with version "${t}":`];u&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&p.push("and"),f&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Jn.warn(p.join(" "));return}Ra(new Cs(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="firebase-heartbeat-database",Ww=1,rl="firebase-heartbeat-store";let af=null;function $v(){return af||(af=hw(Xw,Ww,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(rl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Gi.create("idb-open",{originalErrorMessage:s.message})})),af}async function $w(s){try{const i=(await $v()).transaction(rl),r=await i.objectStore(rl).get(Zv(s));return await i.done,r}catch(t){if(t instanceof Ji)Jn.warn(t.message);else{const i=Gi.create("idb-get",{originalErrorMessage:t?.message});Jn.warn(i.message)}}}async function I_(s,t){try{const r=(await $v()).transaction(rl,"readwrite");await r.objectStore(rl).put(t,Zv(s)),await r.done}catch(i){if(i instanceof Ji)Jn.warn(i.message);else{const r=Gi.create("idb-set",{originalErrorMessage:i?.message});Jn.warn(r.message)}}}function Zv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=1024,Jw=30;class eT{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new nT(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=D_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Jw){const f=iT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=D_(),{heartbeatsToSend:r,unsentEntries:o}=tT(this._heartbeatsCache.heartbeats),u=Wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return Jn.warn(i),""}}}function D_(){return new Date().toISOString().substring(0,10)}function tT(s,t=Zw){const i=[];let r=s.slice();for(const o of s){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),x_(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),x_(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class nT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?HE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await $w(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return I_(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return I_(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function x_(s){return Wo(JSON.stringify({version:2,heartbeats:s})).length}function iT(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(s){Ra(new Cs("platform-logger",t=>new gw(t),"PRIVATE")),Ra(new Cs("heartbeat",t=>new eT(t),"PRIVATE")),Fi(Sf,N_,s),Fi(Sf,N_,"esm2017"),Fi("fire-js","")}sT("");var aT="firebase",rT="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(aT,rT,"app");var O_={};const M_="@firebase/database",k_="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jv="";function lT(s){Jv=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ot(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:al(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return ii(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new oT(t)}}catch{}return new cT},bs=ey("localStorage"),uT=ey("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Ff("@firebase/database"),dT=function(){let s=1;return function(){return s++}}(),ty=function(s){const t=WE(s),i=new YE;i.update(t);const r=i.digest();return Bf.encodeByteArray(r)},_l=function(...s){let t="";for(let i=0;i<s.length;i++){const r=s[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=_l.apply(null,r):typeof r=="object"?t+=ot(r):t+=r,t+=" "}return t};let Zr=null,U_=!0;const fT=function(s,t){B(!0,"Can't turn on custom loggers persistently."),Sa.logLevel=Me.VERBOSE,Zr=Sa.log.bind(Sa)},At=function(...s){if(U_===!0&&(U_=!1,Zr===null&&uT.get("logging_enabled")===!0&&fT()),Zr){const t=_l.apply(null,s);Zr(t)}},vl=function(s){return function(...t){At(s,...t)}},wf=function(...s){const t="FIREBASE INTERNAL ERROR: "+_l(...s);Sa.error(t)},ei=function(...s){const t=`FIREBASE FATAL ERROR: ${_l(...s)}`;throw Sa.error(t),new Error(t)},Lt=function(...s){const t="FIREBASE WARNING: "+_l(...s);Sa.warn(t)},hT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ny=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},pT=function(s){if(document.readyState==="complete")s();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Ia="[MIN_NAME]",As="[MAX_NAME]",La=function(s,t){if(s===t)return 0;if(s===Ia||t===As)return-1;if(t===Ia||s===As)return 1;{const i=L_(s),r=L_(t);return i!==null?r!==null?i-r===0?s.length-t.length:i-r:-1:r!==null?1:s<t?-1:1}},mT=function(s,t){return s===t?0:s<t?-1:1},Kr=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+ot(t))},Xf=function(s){if(typeof s!="object"||s===null)return ot(s);const t=[];for(const r in s)t.push(r);t.sort();let i="{";for(let r=0;r<t.length;r++)r!==0&&(i+=","),i+=ot(t[r]),i+=":",i+=Xf(s[t[r]]);return i+="}",i},iy=function(s,t){const i=s.length;if(i<=t)return[s];const r=[];for(let o=0;o<i;o+=t)o+t>i?r.push(s.substring(o,i)):r.push(s.substring(o,o+t));return r};function jt(s,t){for(const i in s)s.hasOwnProperty(i)&&t(i,s[i])}const sy=function(s){B(!ny(s),"Invalid JSON number");const t=11,i=52,r=(1<<t-1)-1;let o,u,f,p,m;s===0?(u=0,f=0,o=1/s===-1/0?1:0):(o=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(s)/Math.LN2),r),u=p+r,f=Math.round(s*Math.pow(2,i-p)-Math.pow(2,i))):(u=0,f=Math.round(s/Math.pow(2,1-r-i))));const g=[];for(m=i;m;m-=1)g.push(f%2?1:0),f=Math.floor(f/2);for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(o?1:0),g.reverse();const y=g.join("");let E="";for(m=0;m<64;m+=8){let S=parseInt(y.substr(m,8),2).toString(16);S.length===1&&(S="0"+S),E=E+S}return E.toLowerCase()},gT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_T=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function vT(s,t){let i="Unknown Error";s==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?i="Client doesn't have permission to access the desired data.":s==="unavailable"&&(i="The service is unavailable");const r=new Error(s+" at "+t._path.toString()+": "+i);return r.code=s.toUpperCase(),r}const yT=new RegExp("^-?(0*)\\d{1,10}$"),ST=-2147483648,bT=2147483647,L_=function(s){if(yT.test(s)){const t=Number(s);if(t>=ST&&t<=bT)return t}return null},ja=function(s){try{s()}catch(t){setTimeout(()=>{const i=t.stack||"";throw Lt("Exception was thrown by user callback.",i),t},Math.floor(0))}},ET=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jr=function(s,t){const i=setTimeout(s,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,un(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Lt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,i,r){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(At("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lt(t)}}class Fo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Fo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="5",ay="v",ry="s",ly="r",oy="f",cy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uy="ls",dy="p",Tf="ac",fy="websocket",hy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,i,r,o,u=!1,f="",p=!1,m=!1,g=null){this.secure=i,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=f,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bs.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&bs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function CT(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function my(s,t,i){B(typeof t=="string","typeof type must == string"),B(typeof i=="object","typeof params must == object");let r;if(t===fy)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===hy)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);CT(s)&&(i.ns=s.namespace);const o=[];return jt(i,(u,f)=>{o.push(u+"="+f)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.counters_={}}incrementCounter(t,i=1){ii(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return CE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf={},lf={};function $f(s){const t=s.toString();return rf[t]||(rf[t]=new AT),rf[t]}function NT(s,t){const i=s.toString();return lf[i]||(lf[i]=t()),lf[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&ja(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="start",IT="close",DT="pLPCommand",xT="pRTLPCB",gy="id",_y="pw",vy="ser",OT="cb",MT="seg",kT="ts",UT="d",LT="dframe",yy=1870,Sy=30,jT=yy-Sy,zT=25e3,PT=3e4;class _a{constructor(t,i,r,o,u,f,p){this.connId=t,this.repoInfo=i,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=f,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vl(t),this.stats_=$f(i),this.urlFn=m=>(this.appCheckToken&&(m[Tf]=this.appCheckToken),my(i,hy,m))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new RT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PT)),pT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zf((...u)=>{const[f,p,m,g,y]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===j_)this.id=p,this.password=m;else if(f===IT)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...u)=>{const[f,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(f,p)},()=>{this.onClosed_()},this.urlFn);const r={};r[j_]="t",r[vy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[OT]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ay]=Wf,this.transportSessionId&&(r[ry]=this.transportSessionId),this.lastSessionId&&(r[uy]=this.lastSessionId),this.applicationId&&(r[dy]=this.applicationId),this.appCheckToken&&(r[Tf]=this.appCheckToken),typeof location<"u"&&location.hostname&&cy.test(location.hostname)&&(r[ly]=oy);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_a.forceAllow_=!0}static forceDisallow(){_a.forceDisallow_=!0}static isAvailable(){return _a.forceAllow_?!0:!_a.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!gT()&&!_T()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=ot(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Pv(i),o=iy(r,jT);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[LT]="t",r[gy]=t,r[_y]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=ot(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Zf{constructor(t,i,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=dT(),window[DT+this.uniqueCallbackIdentifier]=t,window[xT+this.uniqueCallbackIdentifier]=i,this.myIFrame=Zf.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(p){At("frame writing exception"),p.stack&&At(p.stack),At(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||At("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[gy]=this.myID,t[_y]=this.myPW,t[vy]=this.currentSerial;let i=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Sy+r.length<=yy;){const f=this.pendingSegs.shift();r=r+"&"+MT+o+"="+f.seg+"&"+kT+o+"="+f.ts+"&"+UT+o+"="+f.d,o++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,r){this.pendingSegs.push({seg:t,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(r,Math.floor(zT)),u=()=>{clearTimeout(o),r()};this.addTag(t,u)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{At("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=16384,BT=45e3;let ec=null;typeof MozWebSocket<"u"?ec=MozWebSocket:typeof WebSocket<"u"&&(ec=WebSocket);class dn{constructor(t,i,r,o,u,f,p){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vl(this.connId),this.stats_=$f(i),this.connURL=dn.connectionURL_(i,f,p,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,u){const f={};return f[ay]=Wf,typeof location<"u"&&location.hostname&&cy.test(location.hostname)&&(f[ly]=oy),i&&(f[ry]=i),r&&(f[uy]=r),o&&(f[Tf]=o),u&&(f[dy]=u),my(t,fy,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bs.set("previous_websocket_failure",!0);try{let r;zE(),this.mySock=new ec(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){dn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&ec!==null&&!dn.forceDisallow_}static previouslyFailed(){return bs.isInMemoryStorage||bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){bs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=al(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(B(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=ot(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=iy(i,HT);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(BT))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dn.responsesRequiredToBeHealthy=2;dn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static get ALL_TRANSPORTS(){return[_a,dn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=dn&&dn.isAvailable();let r=i&&!dn.previouslyFailed();if(t.webSocketOnly&&(i||Lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dn];else{const o=this.transports_=[];for(const u of ll.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);ll.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ll.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=6e4,qT=5e3,GT=10*1024,FT=100*1024,of="t",z_="d",YT="s",P_="r",KT="e",H_="o",B_="a",V_="n",q_="p",QT="h";class XT{constructor(t,i,r,o,u,f,p,m,g,y){this.id=t,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=f,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vl("c:"+this.id+":"),this.transportManager_=new ll(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Jr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>FT?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>GT?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(of in t){const i=t[of];i===B_?this.upgradeIfSecondaryHealthy_():i===P_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===H_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=Kr("t",t),r=Kr("d",t);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:q_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:B_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:V_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=Kr("t",t),r=Kr("d",t);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=Kr(of,t);if(z_ in t){const r=t[z_];if(i===QT){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===V_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===YT?this.onConnectionShutdown_(r):i===P_?this.onReset_(r):i===KT?wf("Server Error: "+r):i===H_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wf("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Wf!==r&&Lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),Jr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(VT))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qT))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:q_,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{put(t,i,r,o){}merge(t,i,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,r){}onDisconnectMerge(t,i,r){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this.allowedEvents_=t,this.listeners_={},B(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,i)}}on(t,i,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:r});const o=this.getInitialEvent(t);o&&i.apply(r,o)}off(t,i,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===i&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(t){B(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Ey{static getInstance(){return new tc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return B(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=32,F_=768;class Le{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function Ce(){return new Le("")}function he(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Xi(s){return s.pieces_.length-s.pieceNum_}function ze(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new Le(s.pieces_,t)}function wy(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function WT(s){let t="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)s.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[i])));return t||"/"}function Ty(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function Cy(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)t.push(s.pieces_[i]);return new Le(t,0)}function ct(s,t){const i=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)i.push(s.pieces_[r]);if(t instanceof Le)for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&i.push(r[o])}return new Le(i,0)}function _e(s){return s.pieceNum_>=s.pieces_.length}function It(s,t){const i=he(s),r=he(t);if(i===null)return t;if(i===r)return It(ze(s),ze(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function Jf(s,t){if(Xi(s)!==Xi(t))return!1;for(let i=s.pieceNum_,r=t.pieceNum_;i<=s.pieces_.length;i++,r++)if(s.pieces_[i]!==t.pieces_[r])return!1;return!0}function fn(s,t){let i=s.pieceNum_,r=t.pieceNum_;if(Xi(s)>Xi(t))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==t.pieces_[r])return!1;++i,++r}return!0}class $T{constructor(t,i){this.errorPrefix_=i,this.parts_=Ty(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ec(this.parts_[r]);Ay(this)}}function ZT(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=Ec(t),Ay(s)}function JT(s){const t=s.parts_.pop();s.byteLength_-=Ec(t),s.parts_.length>0&&(s.byteLength_-=1)}function Ay(s){if(s.byteLength_>F_)throw new Error(s.errorPrefix_+"has a key path longer than "+F_+" bytes ("+s.byteLength_+").");if(s.parts_.length>G_)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+G_+") or object contains a cycle "+Ss(s))}function Ss(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends Ey{static getInstance(){return new eh}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return B(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=1e3,eC=60*5*1e3,Y_=30*1e3,tC=1.3,nC=3e4,iC="server_kill",K_=3;class Zn extends by{constructor(t,i,r,o,u,f,p,m){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=Zn.nextPersistentConnectionId_++,this.log_=vl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qr,this.maxReconnectDelay_=eC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eh.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&tc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,u={r:o,a:t,b:i};this.log_(ot(u)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new bc,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const p=f.d;f.s==="ok"?i.resolve(p):i.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),i.promise}listen(t,i,r,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(f).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},f="q";t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(f,u,p=>{const m=p.d,g=p.s;Zn.warnOnListenWarnings_(m,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&ii(t,"w")){const r=Na(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||FE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Y_)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=GE(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const u={p:t},f="n";o&&(u.q=r,u.t=o),this.sendRequest(f,u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,u){this.initConnection_();const f={p:i,d:r};u!==void 0&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ot(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):wf("Unrecognized action received from server: "+ot(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nC&&(this.reconnectDelay_=Qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Zn.nextConnectionId_++,u=this.lastSessionId;let f=!1,p=null;const m=function(){p?p.close():(f=!0,r())},g=function(E){B(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(E)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,S]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);f?At("getToken() completed but was canceled"):(At("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=S&&S.token,p=new XT(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,R=>{Lt(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(iC)},u))}catch(E){this.log_("Failed to get token: "+E),f||(this.repoInfo_.nodeAdmin&&Lt(E),m())}}}interrupt(t){At("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){At("Resuming connection for reason: "+t),delete this.interruptReasons_[t],_f(this.interruptReasons_)&&(this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(u=>Xf(u)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new Le(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(i),u.delete(i),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){At("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=K_&&(this.reconnectDelay_=Y_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){At("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=K_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Jv.replace(/\./g,"-")]=1,qf()?t["framework.cordova"]=1:Yv()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=tc.getInstance().currentlyOnline();return _f(this.interruptReasons_)&&t}}Zn.nextPersistentConnectionId_=0;Zn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new pe(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const r=new pe(Ia,t),o=new pe(Ia,i);return this.compare(r,o)!==0}minPost(){return pe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo;class Ny extends wc{static get __EMPTY_NODE(){return Bo}static set __EMPTY_NODE(t){Bo=t}compare(t,i){return La(t.name,i.name)}isDefinedOn(t){throw Oa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return pe.MIN}maxPost(){return new pe(As,Bo)}makePost(t,i){return B(typeof t=="string","KeyIndex indexValue must always be a string."),new pe(t,Bo)}toString(){return".key"}}const ba=new Ny;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t,i,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=i?r(t.key,i):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class gt{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??gt.RED,this.left=o??Ut.EMPTY_NODE,this.right=u??Ut.EMPTY_NODE}copy(t,i,r,o,u){return new gt(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ut.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Ut.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}gt.RED=!0;gt.BLACK=!1;class sC{copy(t,i,r,o,u){return this}insert(t,i,r){return new gt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ut{constructor(t,i=Ut.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Ut(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,gt.BLACK,null,null))}remove(t){return new Ut(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,gt.BLACK,null,null))}get(t){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(t,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(t){let i,r=this.root_,o=null;for(;!r.isEmpty();)if(i=this.comparator_(t,r.key),i===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Vo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Vo(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Vo(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Vo(this.root_,null,this.comparator_,!0,t)}}Ut.EMPTY_NODE=new sC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(s,t){return La(s.name,t.name)}function th(s,t){return La(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf;function rC(s){Cf=s}const Ry=function(s){return typeof s=="number"?"number:"+sy(s):"string:"+s},Iy=function(s){if(s.isLeafNode()){const t=s.val();B(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ii(t,".sv"),"Priority must be a string or number.")}else B(s===Cf||s.isEmpty(),"priority of unexpected type.");B(s===Cf||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q_;class mt{static set __childrenNodeConstructor(t){Q_=t}static get __childrenNodeConstructor(){return Q_}constructor(t,i=mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new mt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _e(t)?this:he(t)===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=he(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||Xi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ze(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ry(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=sy(this.value_):t+=this.value_,this.lazyHash_=ty(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===mt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof mt.__childrenNodeConstructor?-1:(B(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=mt.VALUE_TYPE_ORDER.indexOf(i),u=mt.VALUE_TYPE_ORDER.indexOf(r);return B(o>=0,"Unknown leaf type: "+i),B(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy,xy;function lC(s){Dy=s}function oC(s){xy=s}class cC extends wc{compare(t,i){const r=t.node.getPriority(),o=i.node.getPriority(),u=r.compareTo(o);return u===0?La(t.name,i.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(As,new mt("[PRIORITY-POST]",xy))}makePost(t,i){const r=Dy(t);return new pe(i,new mt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ke=new cC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=Math.log(2);class dC{constructor(t){const i=u=>parseInt(Math.log(u)/uC,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const nc=function(s,t,i,r){s.sort(t);const o=function(m,g){const y=g-m;let E,S;if(y===0)return null;if(y===1)return E=s[m],S=i?i(E):E,new gt(S,E.node,gt.BLACK,null,null);{const R=parseInt(y/2,10)+m,k=o(m,R),q=o(R+1,g);return E=s[R],S=i?i(E):E,new gt(S,E.node,gt.BLACK,k,q)}},u=function(m){let g=null,y=null,E=s.length;const S=function(k,q){const K=E-k,ve=E;E-=k;const Q=o(K+1,ve),z=s[K],W=i?i(z):z;R(new gt(W,z.node,q,null,Q))},R=function(k){g?(g.left=k,g=k):(y=k,g=k)};for(let k=0;k<m.count;++k){const q=m.nextBitIsOne(),K=Math.pow(2,m.count-(k+1));q?S(K,gt.BLACK):(S(K,gt.BLACK),S(K,gt.RED))}return y},f=new dC(s.length),p=u(f);return new Ut(r||t,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf;const ga={};class Xn{static get Default(){return B(ga&&Ke,"ChildrenNode.ts has not been loaded"),cf=cf||new Xn({".priority":ga},{".priority":Ke}),cf}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=Na(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Ut?i:null}hasIndex(t){return ii(this.indexSet_,t.toString())}addIndex(t,i){B(t!==ba,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=i.getIterator(pe.Wrap);let f=u.getNext();for(;f;)o=o||t.isDefinedOn(f.node),r.push(f),f=u.getNext();let p;o?p=nc(r,t.getCompare()):p=ga;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const y=Object.assign({},this.indexes_);return y[m]=p,new Xn(y,g)}addToIndexes(t,i){const r=Zo(this.indexes_,(o,u)=>{const f=Na(this.indexSet_,u);if(B(f,"Missing index implementation for "+u),o===ga)if(f.isDefinedOn(t.node)){const p=[],m=i.getIterator(pe.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&p.push(g),g=m.getNext();return p.push(t),nc(p,f.getCompare())}else return ga;else{const p=i.get(t.name);let m=o;return p&&(m=m.remove(new pe(t.name,p))),m.insert(t,t.node)}});return new Xn(r,this.indexSet_)}removeFromIndexes(t,i){const r=Zo(this.indexes_,o=>{if(o===ga)return o;{const u=i.get(t.name);return u?o.remove(new pe(t.name,u)):o}});return new Xn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr;class ie{static get EMPTY_NODE(){return Xr||(Xr=new ie(new Ut(th),null,Xn.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Iy(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xr}updatePriority(t){return this.children_.isEmpty()?this:new ie(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Xr:i}}getChild(t){const i=he(t);return i===null?this:this.getImmediateChild(i).getChild(ze(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(B(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const r=new pe(t,i);let o,u;i.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const f=o.isEmpty()?Xr:this.priorityNode_;return new ie(o,f,u)}}updateChild(t,i){const r=he(t);if(r===null)return i;{B(he(t)!==".priority"||Xi(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(ze(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,u=!0;if(this.forEachChild(Ke,(f,p)=>{i[f]=p.val(t),r++,u&&ie.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*r){const f=[];for(const p in i)f[p]=i[p];return f}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ry(this.getPriority().val())+":"),this.forEachChild(Ke,(i,r)=>{const o=r.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":ty(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new pe(t,i));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new pe(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new pe(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,pe.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,pe.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yl?-1:0}withIndex(t){if(t===ba||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new ie(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ba||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(Ke),o=i.getIterator(Ke);let u=r.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=r.getNext(),f=o.getNext()}return u===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===ba?null:this.indexMap_.get(t.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class fC extends ie{constructor(){super(new Ut(th),ie.EMPTY_NODE,Xn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ie.EMPTY_NODE}isEmpty(){return!1}}const yl=new fC;Object.defineProperties(pe,{MIN:{value:new pe(Ia,ie.EMPTY_NODE)},MAX:{value:new pe(As,yl)}});Ny.__EMPTY_NODE=ie.EMPTY_NODE;mt.__childrenNodeConstructor=ie;rC(yl);oC(yl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=!0;function _t(s,t=null){if(s===null)return ie.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),B(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const i=s;return new mt(i,_t(t))}if(!(s instanceof Array)&&hC){const i=[];let r=!1;if(jt(s,(f,p)=>{if(f.substring(0,1)!=="."){const m=_t(p);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),i.push(new pe(f,m)))}}),i.length===0)return ie.EMPTY_NODE;const u=nc(i,aC,f=>f.name,th);if(r){const f=nc(i,Ke.getCompare());return new ie(u,_t(t),new Xn({".priority":f},{".priority":Ke}))}else return new ie(u,_t(t),Xn.Default)}else{let i=ie.EMPTY_NODE;return jt(s,(r,o)=>{if(ii(s,r)&&r.substring(0,1)!=="."){const u=_t(o);(u.isLeafNode()||!u.isEmpty())&&(i=i.updateImmediateChild(r,u))}}),i.updatePriority(_t(t))}}lC(_t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends wc{constructor(t){super(),this.indexPath_=t,B(!_e(t)&&he(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const r=this.extractChild(t.node),o=this.extractChild(i.node),u=r.compareTo(o);return u===0?La(t.name,i.name):u}makePost(t,i){const r=_t(t),o=ie.EMPTY_NODE.updateChild(this.indexPath_,r);return new pe(i,o)}maxPost(){const t=ie.EMPTY_NODE.updateChild(this.indexPath_,yl);return new pe(As,t)}toString(){return Ty(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC extends wc{compare(t,i){const r=t.node.compareTo(i.node);return r===0?La(t.name,i.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(t,i){const r=_t(t);return new pe(i,r)}toString(){return".value"}}const gC=new mC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(s){return{type:"value",snapshotNode:s}}function Da(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function ol(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function cl(s,t,i){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:i}}function _C(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.index_=t}updateChild(t,i,r,o,u,f){B(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(i);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(f!=null&&(r.isEmpty()?t.hasChild(i)?f.trackChildChange(ol(i,p)):B(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?f.trackChildChange(Da(i,r)):f.trackChildChange(cl(i,r,p))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(t,i,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ke,(o,u)=>{i.hasChild(o)||r.trackChildChange(ol(o,u))}),i.isLeafNode()||i.forEachChild(Ke,(o,u)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(u)||r.trackChildChange(cl(o,u,f))}else r.trackChildChange(Da(o,u))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t){this.indexedFilter_=new nh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ul.getStartPost_(t),this.endPost_=ul.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&r}updateChild(t,i,r,o,u,f){return this.matches(new pe(i,r))||(r=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,r,o,u,f)}updateFullNode(t,i,r){i.isLeafNode()&&(i=ie.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(ie.EMPTY_NODE);const u=this;return i.forEachChild(Ke,(f,p)=>{u.matches(new pe(f,p))||(o=o.updateImmediateChild(f,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{const r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ul(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,r,o,u,f){return this.rangedFilter_.matches(new pe(i,r))||(r=ie.EMPTY_NODE),t.getImmediateChild(i).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,r,o,u,f):this.fullLimitUpdateChild_(t,i,r,u,f)}updateFullNode(t,i,r){let o;if(i.isLeafNode()||i.isEmpty())o=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=ie.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;u.hasNext()&&f<this.limit_;){const p=u.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))o=o.updateImmediateChild(p.name,p.node),f++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(ie.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let f=0;for(;u.hasNext();){const p=u.getNext();f<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?f++:o=o.updateImmediateChild(p.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,r,o,u){let f;if(this.reverse_){const E=this.index_.getCompare();f=(S,R)=>E(R,S)}else f=this.index_.getCompare();const p=t;B(p.numChildren()===this.limit_,"");const m=new pe(i,r),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(p.hasChild(i)){const E=p.getImmediateChild(i);let S=o.getChildAfterChild(this.index_,g,this.reverse_);for(;S!=null&&(S.name===i||p.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const R=S==null?1:f(S,m);if(y&&!r.isEmpty()&&R>=0)return u?.trackChildChange(cl(i,r,E)),p.updateImmediateChild(i,r);{u?.trackChildChange(ol(i,E));const q=p.updateImmediateChild(i,ie.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(u?.trackChildChange(Da(S.name,S.node)),q.updateImmediateChild(S.name,S.node)):q}}else return r.isEmpty()?t:y&&f(g,m)>=0?(u!=null&&(u.trackChildChange(ol(g.name,g.node)),u.trackChildChange(Da(i,r))),p.updateImmediateChild(i,r).updateImmediateChild(g.name,ie.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ke}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ia}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:As}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ke}copy(){const t=new ih;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function yC(s){return s.loadsAllData()?new nh(s.getIndex()):s.hasLimit()?new vC(s):new ul(s)}function X_(s){const t={};if(s.isDefault())return t;let i;if(s.index_===Ke?i="$priority":s.index_===gC?i="$value":s.index_===ba?i="$key":(B(s.index_ instanceof pC,"Unrecognized index type!"),i=s.index_.toString()),t.orderBy=ot(i),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";t[r]=ot(s.indexStartValue_),s.startNameSet_&&(t[r]+=","+ot(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";t[r]=ot(s.indexEndValue_),s.endNameSet_&&(t[r]+=","+ot(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function W_(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let i=s.viewFrom_;i===""&&(s.isViewFromLeft()?i="l":i="r"),t.vf=i}return s.index_!==Ke&&(t.i=s.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends by{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(B(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=vl("p:rest:"),this.listens_={}}listen(t,i,r,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const f=ic.getListenId_(t,r),p={};this.listens_[f]=p;const m=X_(t._queryParams);this.restRequest_(u+".json",m,(g,y)=>{let E=y;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(u,E,!1,r),Na(this.listens_,f)===p){let S;g?g===401?S="permission_denied":S="rest_error:"+g:S="ok",o(S,null)}})}unlisten(t,i){const r=ic.getListenId_(t,i);delete this.listens_[r]}get(t){const i=X_(t._queryParams),r=t._path.toString(),o=new bc;return this.restRequest_(r+".json",i,(u,f)=>{let p=f;u===404&&(p=null,u=null),u===null?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(i.auth=o.accessToken),u&&u.token&&(i.ac=u.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+ka(i);this.log_("Sending REST request for "+f);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&p.readyState===4){this.log_("REST Response for "+f+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=al(p.responseText)}catch{Lt("Failed to parse JSON response for "+f+": "+p.responseText)}r(null,m)}else p.status!==401&&p.status!==404&&Lt("Got unsuccessful REST response for "+f+" Status: "+p.status),r(p.status);r=null}},p.open("GET",f,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){return{value:null,children:new Map}}function My(s,t,i){if(_e(t))s.value=i,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,i);else{const r=he(t);s.children.has(r)||s.children.set(r,sc());const o=s.children.get(r);t=ze(t),My(o,t,i)}}function Af(s,t,i){s.value!==null?i(t,s.value):bC(s,(r,o)=>{const u=new Le(t.toString()+"/"+r);Af(o,u,i)})}function bC(s,t){s.children.forEach((i,r)=>{t(r,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i=Object.assign({},t);return this.last_&&jt(this.last_,(r,o)=>{i[r]=i[r]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=10*1e3,wC=30*1e3,TC=5*60*1e3;class CC{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new EC(t);const r=$_+(wC-$_)*Math.random();Jr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),i={};let r=!1;jt(t,(o,u)=>{u>0&&ii(this.statsToReport_,o)&&(i[o]=u,r=!0)}),r&&this.server_.reportStats(i),Jr(this.reportStats_.bind(this),Math.floor(Math.random()*2*TC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hn||(hn={}));function ky(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ah(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,i,r){this.path=t,this.affectedTree=i,this.revert=r,this.type=hn.ACK_USER_WRITE,this.source=ky()}operationForChild(t){if(_e(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Le(t));return new ac(Ce(),i,this.revert)}}else return B(he(this.path)===t,"operationForChild called for unrelated child."),new ac(ze(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,i){this.source=t,this.path=i,this.type=hn.LISTEN_COMPLETE}operationForChild(t){return _e(this.path)?new dl(this.source,Ce()):new dl(this.source,ze(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,i,r){this.source=t,this.path=i,this.snap=r,this.type=hn.OVERWRITE}operationForChild(t){return _e(this.path)?new Ns(this.source,Ce(),this.snap.getImmediateChild(t)):new Ns(this.source,ze(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,i,r){this.source=t,this.path=i,this.children=r,this.type=hn.MERGE}operationForChild(t){if(_e(this.path)){const i=this.children.subtree(new Le(t));return i.isEmpty()?null:i.value?new Ns(this.source,Ce(),i.value):new fl(this.source,Ce(),i)}else return B(he(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new fl(this.source,ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,i,r){this.node_=t,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(_e(t))return this.isFullyInitialized()&&!this.filtered_;const i=he(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function NC(s,t,i,r){const o=[],u=[];return t.forEach(f=>{f.type==="child_changed"&&s.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&u.push(_C(f.childName,f.snapshotNode))}),Wr(s,o,"child_removed",t,r,i),Wr(s,o,"child_added",t,r,i),Wr(s,o,"child_moved",u,r,i),Wr(s,o,"child_changed",t,r,i),Wr(s,o,"value",t,r,i),o}function Wr(s,t,i,r,o,u){const f=r.filter(p=>p.type===i);f.sort((p,m)=>IC(s,p,m)),f.forEach(p=>{const m=RC(s,p,u);o.forEach(g=>{g.respondsTo(p.type)&&t.push(g.createEvent(m,s.query_))})})}function RC(s,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function IC(s,t,i){if(t.childName==null||i.childName==null)throw Oa("Should only compare child_ events.");const r=new pe(t.childName,t.snapshotNode),o=new pe(i.childName,i.snapshotNode);return s.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(s,t){return{eventCache:s,serverCache:t}}function el(s,t,i,r){return Tc(new Wi(t,i,r),s.serverCache)}function Uy(s,t,i,r){return Tc(s.eventCache,new Wi(t,i,r))}function rc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function Rs(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;const DC=()=>(uf||(uf=new Ut(mT)),uf);class Pe{static fromObject(t){let i=new Pe(null);return jt(t,(r,o)=>{i=i.set(new Le(r),o)}),i}constructor(t,i=DC()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:Ce(),value:this.value};if(_e(t))return null;{const r=he(t),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(ze(t),i);return u!=null?{path:ct(new Le(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(_e(t))return this;{const i=he(t),r=this.children.get(i);return r!==null?r.subtree(ze(t)):new Pe(null)}}set(t,i){if(_e(t))return new Pe(i,this.children);{const r=he(t),u=(this.children.get(r)||new Pe(null)).set(ze(t),i),f=this.children.insert(r,u);return new Pe(this.value,f)}}remove(t){if(_e(t))return this.children.isEmpty()?new Pe(null):new Pe(null,this.children);{const i=he(t),r=this.children.get(i);if(r){const o=r.remove(ze(t));let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),this.value===null&&u.isEmpty()?new Pe(null):new Pe(this.value,u)}else return this}}get(t){if(_e(t))return this.value;{const i=he(t),r=this.children.get(i);return r?r.get(ze(t)):null}}setTree(t,i){if(_e(t))return i;{const r=he(t),u=(this.children.get(r)||new Pe(null)).setTree(ze(t),i);let f;return u.isEmpty()?f=this.children.remove(r):f=this.children.insert(r,u),new Pe(this.value,f)}}fold(t){return this.fold_(Ce(),t)}fold_(t,i){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(ct(t,o),i)}),i(t,this.value,r)}findOnPath(t,i){return this.findOnPath_(t,Ce(),i)}findOnPath_(t,i,r){const o=this.value?r(i,this.value):!1;if(o)return o;if(_e(t))return null;{const u=he(t),f=this.children.get(u);return f?f.findOnPath_(ze(t),ct(i,u),r):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,Ce(),i)}foreachOnPath_(t,i,r){if(_e(t))return this;{this.value&&r(i,this.value);const o=he(t),u=this.children.get(o);return u?u.foreachOnPath_(ze(t),ct(i,o),r):new Pe(null)}}foreach(t){this.foreach_(Ce(),t)}foreach_(t,i){this.children.inorderTraversal((r,o)=>{o.foreach_(ct(t,r),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,r)=>{r.value&&t(i,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.writeTree_=t}static empty(){return new mn(new Pe(null))}}function tl(s,t,i){if(_e(t))return new mn(new Pe(i));{const r=s.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let u=r.value;const f=It(o,t);return u=u.updateChild(f,i),new mn(s.writeTree_.set(o,u))}else{const o=new Pe(i),u=s.writeTree_.setTree(t,o);return new mn(u)}}}function Z_(s,t,i){let r=s;return jt(i,(o,u)=>{r=tl(r,ct(t,o),u)}),r}function J_(s,t){if(_e(t))return mn.empty();{const i=s.writeTree_.setTree(t,new Pe(null));return new mn(i)}}function Nf(s,t){return Ds(s,t)!=null}function Ds(s,t){const i=s.writeTree_.findRootMostValueAndPath(t);return i!=null?s.writeTree_.get(i.path).getChild(It(i.path,t)):null}function ev(s){const t=[],i=s.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Ke,(r,o)=>{t.push(new pe(r,o))}):s.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new pe(r,o.value))}),t}function Yi(s,t){if(_e(t))return s;{const i=Ds(s,t);return i!=null?new mn(new Pe(i)):new mn(s.writeTree_.subtree(t))}}function Rf(s){return s.writeTree_.isEmpty()}function xa(s,t){return Ly(Ce(),s.writeTree_,t)}function Ly(s,t,i){if(t.value!=null)return i.updateChild(s,t.value);{let r=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(B(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):i=Ly(ct(s,o),u,i)}),!i.getChild(s).isEmpty()&&r!==null&&(i=i.updateChild(ct(s,".priority"),r)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(s,t){return Hy(t,s)}function xC(s,t,i,r,o){B(r>s.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),s.allWrites.push({path:t,snap:i,writeId:r,visible:o}),o&&(s.visibleWrites=tl(s.visibleWrites,t,i)),s.lastWriteId=r}function OC(s,t){for(let i=0;i<s.allWrites.length;i++){const r=s.allWrites[i];if(r.writeId===t)return r}return null}function MC(s,t){const i=s.allWrites.findIndex(p=>p.writeId===t);B(i>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[i];s.allWrites.splice(i,1);let o=r.visible,u=!1,f=s.allWrites.length-1;for(;o&&f>=0;){const p=s.allWrites[f];p.visible&&(f>=i&&kC(p,r.path)?o=!1:fn(r.path,p.path)&&(u=!0)),f--}if(o){if(u)return UC(s),!0;if(r.snap)s.visibleWrites=J_(s.visibleWrites,r.path);else{const p=r.children;jt(p,m=>{s.visibleWrites=J_(s.visibleWrites,ct(r.path,m))})}return!0}else return!1}function kC(s,t){if(s.snap)return fn(s.path,t);for(const i in s.children)if(s.children.hasOwnProperty(i)&&fn(ct(s.path,i),t))return!0;return!1}function UC(s){s.visibleWrites=jy(s.allWrites,LC,Ce()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function LC(s){return s.visible}function jy(s,t,i){let r=mn.empty();for(let o=0;o<s.length;++o){const u=s[o];if(t(u)){const f=u.path;let p;if(u.snap)fn(i,f)?(p=It(i,f),r=tl(r,p,u.snap)):fn(f,i)&&(p=It(f,i),r=tl(r,Ce(),u.snap.getChild(p)));else if(u.children){if(fn(i,f))p=It(i,f),r=Z_(r,p,u.children);else if(fn(f,i))if(p=It(f,i),_e(p))r=Z_(r,Ce(),u.children);else{const m=Na(u.children,he(p));if(m){const g=m.getChild(ze(p));r=tl(r,Ce(),g)}}}else throw Oa("WriteRecord should have .snap or .children")}}return r}function zy(s,t,i,r,o){if(!r&&!o){const u=Ds(s.visibleWrites,t);if(u!=null)return u;{const f=Yi(s.visibleWrites,t);if(Rf(f))return i;if(i==null&&!Nf(f,Ce()))return null;{const p=i||ie.EMPTY_NODE;return xa(f,p)}}}else{const u=Yi(s.visibleWrites,t);if(!o&&Rf(u))return i;if(!o&&i==null&&!Nf(u,Ce()))return null;{const f=function(g){return(g.visible||o)&&(!r||!~r.indexOf(g.writeId))&&(fn(g.path,t)||fn(t,g.path))},p=jy(s.allWrites,f,t),m=i||ie.EMPTY_NODE;return xa(p,m)}}}function jC(s,t,i){let r=ie.EMPTY_NODE;const o=Ds(s.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Ke,(u,f)=>{r=r.updateImmediateChild(u,f)}),r;if(i){const u=Yi(s.visibleWrites,t);return i.forEachChild(Ke,(f,p)=>{const m=xa(Yi(u,new Le(f)),p);r=r.updateImmediateChild(f,m)}),ev(u).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}else{const u=Yi(s.visibleWrites,t);return ev(u).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}}function zC(s,t,i,r,o){B(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=ct(t,i);if(Nf(s.visibleWrites,u))return null;{const f=Yi(s.visibleWrites,u);return Rf(f)?o.getChild(i):xa(f,o.getChild(i))}}function PC(s,t,i,r){const o=ct(t,i),u=Ds(s.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(i)){const f=Yi(s.visibleWrites,o);return xa(f,r.getNode().getImmediateChild(i))}else return null}function HC(s,t){return Ds(s.visibleWrites,t)}function BC(s,t,i,r,o,u,f){let p;const m=Yi(s.visibleWrites,t),g=Ds(m,Ce());if(g!=null)p=g;else if(i!=null)p=xa(m,i);else return[];if(p=p.withIndex(f),!p.isEmpty()&&!p.isLeafNode()){const y=[],E=f.getCompare(),S=u?p.getReverseIteratorFrom(r,f):p.getIteratorFrom(r,f);let R=S.getNext();for(;R&&y.length<o;)E(R,r)!==0&&y.push(R),R=S.getNext();return y}else return[]}function VC(){return{visibleWrites:mn.empty(),allWrites:[],lastWriteId:-1}}function lc(s,t,i,r){return zy(s.writeTree,s.treePath,t,i,r)}function rh(s,t){return jC(s.writeTree,s.treePath,t)}function tv(s,t,i,r){return zC(s.writeTree,s.treePath,t,i,r)}function oc(s,t){return HC(s.writeTree,ct(s.treePath,t))}function qC(s,t,i,r,o,u){return BC(s.writeTree,s.treePath,t,i,r,o,u)}function lh(s,t,i){return PC(s.writeTree,s.treePath,t,i)}function Py(s,t){return Hy(ct(s.treePath,t),s.writeTree)}function Hy(s,t){return{treePath:s,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,r=t.childName;B(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(i==="child_added"&&u==="child_removed")this.changeMap.set(r,cl(r,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&u==="child_changed")this.changeMap.set(r,ol(r,o.oldSnap));else if(i==="child_changed"&&u==="child_added")this.changeMap.set(r,Da(r,t.snapshotNode));else if(i==="child_changed"&&u==="child_changed")this.changeMap.set(r,cl(r,t.snapshotNode,o.oldSnap));else throw Oa("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{getCompleteChild(t){return null}getChildAfterChild(t,i,r){return null}}const By=new FC;class oh{constructor(t,i,r=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Wi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lh(this.writes_,t,r)}}getChildAfterChild(t,i,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rs(this.viewCache_),u=qC(this.writes_,o,i,1,r,t);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(s){return{filter:s}}function KC(s,t){B(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),B(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function QC(s,t,i,r,o){const u=new GC;let f,p;if(i.type===hn.OVERWRITE){const g=i;g.source.fromUser?f=If(s,t,g.path,g.snap,r,o,u):(B(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered()&&!_e(g.path),f=cc(s,t,g.path,g.snap,r,o,p,u))}else if(i.type===hn.MERGE){const g=i;g.source.fromUser?f=WC(s,t,g.path,g.children,r,o,u):(B(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered(),f=Df(s,t,g.path,g.children,r,o,p,u))}else if(i.type===hn.ACK_USER_WRITE){const g=i;g.revert?f=JC(s,t,g.path,r,o,u):f=$C(s,t,g.path,g.affectedTree,r,o,u)}else if(i.type===hn.LISTEN_COMPLETE)f=ZC(s,t,i.path,r,u);else throw Oa("Unknown operation type: "+i.type);const m=u.getChanges();return XC(t,f,m),{viewCache:f,changes:m}}function XC(s,t,i){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=rc(s);(i.length>0||!s.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&i.push(Oy(rc(t)))}}function Vy(s,t,i,r,o,u){const f=t.eventCache;if(oc(r,i)!=null)return t;{let p,m;if(_e(i))if(B(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=Rs(t),y=g instanceof ie?g:ie.EMPTY_NODE,E=rh(r,y);p=s.filter.updateFullNode(t.eventCache.getNode(),E,u)}else{const g=lc(r,Rs(t));p=s.filter.updateFullNode(t.eventCache.getNode(),g,u)}else{const g=he(i);if(g===".priority"){B(Xi(i)===1,"Can't have a priority with additional path components");const y=f.getNode();m=t.serverCache.getNode();const E=tv(r,i,y,m);E!=null?p=s.filter.updatePriority(y,E):p=f.getNode()}else{const y=ze(i);let E;if(f.isCompleteForChild(g)){m=t.serverCache.getNode();const S=tv(r,i,f.getNode(),m);S!=null?E=f.getNode().getImmediateChild(g).updateChild(y,S):E=f.getNode().getImmediateChild(g)}else E=lh(r,g,t.serverCache);E!=null?p=s.filter.updateChild(f.getNode(),g,E,y,o,u):p=f.getNode()}}return el(t,p,f.isFullyInitialized()||_e(i),s.filter.filtersNodes())}}function cc(s,t,i,r,o,u,f,p){const m=t.serverCache;let g;const y=f?s.filter:s.filter.getIndexedFilter();if(_e(i))g=y.updateFullNode(m.getNode(),r,null);else if(y.filtersNodes()&&!m.isFiltered()){const R=m.getNode().updateChild(i,r);g=y.updateFullNode(m.getNode(),R,null)}else{const R=he(i);if(!m.isCompleteForPath(i)&&Xi(i)>1)return t;const k=ze(i),K=m.getNode().getImmediateChild(R).updateChild(k,r);R===".priority"?g=y.updatePriority(m.getNode(),K):g=y.updateChild(m.getNode(),R,K,k,By,null)}const E=Uy(t,g,m.isFullyInitialized()||_e(i),y.filtersNodes()),S=new oh(o,E,u);return Vy(s,E,i,o,S,p)}function If(s,t,i,r,o,u,f){const p=t.eventCache;let m,g;const y=new oh(o,t,u);if(_e(i))g=s.filter.updateFullNode(t.eventCache.getNode(),r,f),m=el(t,g,!0,s.filter.filtersNodes());else{const E=he(i);if(E===".priority")g=s.filter.updatePriority(t.eventCache.getNode(),r),m=el(t,g,p.isFullyInitialized(),p.isFiltered());else{const S=ze(i),R=p.getNode().getImmediateChild(E);let k;if(_e(S))k=r;else{const q=y.getCompleteChild(E);q!=null?wy(S)===".priority"&&q.getChild(Cy(S)).isEmpty()?k=q:k=q.updateChild(S,r):k=ie.EMPTY_NODE}if(R.equals(k))m=t;else{const q=s.filter.updateChild(p.getNode(),E,k,S,y,f);m=el(t,q,p.isFullyInitialized(),s.filter.filtersNodes())}}}return m}function nv(s,t){return s.eventCache.isCompleteForChild(t)}function WC(s,t,i,r,o,u,f){let p=t;return r.foreach((m,g)=>{const y=ct(i,m);nv(t,he(y))&&(p=If(s,p,y,g,o,u,f))}),r.foreach((m,g)=>{const y=ct(i,m);nv(t,he(y))||(p=If(s,p,y,g,o,u,f))}),p}function iv(s,t,i){return i.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function Df(s,t,i,r,o,u,f,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;_e(i)?g=r:g=new Pe(null).setTree(i,r);const y=t.serverCache.getNode();return g.children.inorderTraversal((E,S)=>{if(y.hasChild(E)){const R=t.serverCache.getNode().getImmediateChild(E),k=iv(s,R,S);m=cc(s,m,new Le(E),k,o,u,f,p)}}),g.children.inorderTraversal((E,S)=>{const R=!t.serverCache.isCompleteForChild(E)&&S.value===null;if(!y.hasChild(E)&&!R){const k=t.serverCache.getNode().getImmediateChild(E),q=iv(s,k,S);m=cc(s,m,new Le(E),q,o,u,f,p)}}),m}function $C(s,t,i,r,o,u,f){if(oc(o,i)!=null)return t;const p=t.serverCache.isFiltered(),m=t.serverCache;if(r.value!=null){if(_e(i)&&m.isFullyInitialized()||m.isCompleteForPath(i))return cc(s,t,i,m.getNode().getChild(i),o,u,p,f);if(_e(i)){let g=new Pe(null);return m.getNode().forEachChild(ba,(y,E)=>{g=g.set(new Le(y),E)}),Df(s,t,i,g,o,u,p,f)}else return t}else{let g=new Pe(null);return r.foreach((y,E)=>{const S=ct(i,y);m.isCompleteForPath(S)&&(g=g.set(y,m.getNode().getChild(S)))}),Df(s,t,i,g,o,u,p,f)}}function ZC(s,t,i,r,o){const u=t.serverCache,f=Uy(t,u.getNode(),u.isFullyInitialized()||_e(i),u.isFiltered());return Vy(s,f,i,r,By,o)}function JC(s,t,i,r,o,u){let f;if(oc(r,i)!=null)return t;{const p=new oh(r,t,o),m=t.eventCache.getNode();let g;if(_e(i)||he(i)===".priority"){let y;if(t.serverCache.isFullyInitialized())y=lc(r,Rs(t));else{const E=t.serverCache.getNode();B(E instanceof ie,"serverChildren would be complete if leaf node"),y=rh(r,E)}y=y,g=s.filter.updateFullNode(m,y,u)}else{const y=he(i);let E=lh(r,y,t.serverCache);E==null&&t.serverCache.isCompleteForChild(y)&&(E=m.getImmediateChild(y)),E!=null?g=s.filter.updateChild(m,y,E,ze(i),p,u):t.eventCache.getNode().hasChild(y)?g=s.filter.updateChild(m,y,ie.EMPTY_NODE,ze(i),p,u):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=lc(r,Rs(t)),f.isLeafNode()&&(g=s.filter.updateFullNode(g,f,u)))}return f=t.serverCache.isFullyInitialized()||oc(r,Ce())!=null,el(t,g,f,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new nh(r.getIndex()),u=yC(r);this.processor_=YC(u);const f=i.serverCache,p=i.eventCache,m=o.updateFullNode(ie.EMPTY_NODE,f.getNode(),null),g=u.updateFullNode(ie.EMPTY_NODE,p.getNode(),null),y=new Wi(m,f.isFullyInitialized(),o.filtersNodes()),E=new Wi(g,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=Tc(E,y),this.eventGenerator_=new AC(this.query_)}get query(){return this.query_}}function t1(s){return s.viewCache_.serverCache.getNode()}function n1(s){return rc(s.viewCache_)}function i1(s,t){const i=Rs(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!_e(t)&&!i.getImmediateChild(he(t)).isEmpty())?i.getChild(t):null}function sv(s){return s.eventRegistrations_.length===0}function s1(s,t){s.eventRegistrations_.push(t)}function av(s,t,i){const r=[];if(i){B(t==null,"A cancel should cancel all event registrations.");const o=s.query._path;s.eventRegistrations_.forEach(u=>{const f=u.createCancelEvent(i,o);f&&r.push(f)})}if(t){let o=[];for(let u=0;u<s.eventRegistrations_.length;++u){const f=s.eventRegistrations_[u];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(s.eventRegistrations_.slice(u+1));break}}s.eventRegistrations_=o}else s.eventRegistrations_=[];return r}function rv(s,t,i,r){t.type===hn.MERGE&&t.source.queryId!==null&&(B(Rs(s.viewCache_),"We should always have a full cache before handling merges"),B(rc(s.viewCache_),"Missing event cache, even though we have a server cache"));const o=s.viewCache_,u=QC(s.processor_,o,t,i,r);return KC(s.processor_,u.viewCache),B(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=u.viewCache,qy(s,u.changes,u.viewCache.eventCache.getNode(),null)}function a1(s,t){const i=s.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Ke,(u,f)=>{r.push(Da(u,f))}),i.isFullyInitialized()&&r.push(Oy(i.getNode())),qy(s,r,i.getNode(),t)}function qy(s,t,i,r){const o=r?[r]:s.eventRegistrations_;return NC(s.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc;class Gy{constructor(){this.views=new Map}}function r1(s){B(!uc,"__referenceConstructor has already been defined"),uc=s}function l1(){return B(uc,"Reference.ts has not been loaded"),uc}function o1(s){return s.views.size===0}function ch(s,t,i,r){const o=t.source.queryId;if(o!==null){const u=s.views.get(o);return B(u!=null,"SyncTree gave us an op for an invalid query."),rv(u,t,i,r)}else{let u=[];for(const f of s.views.values())u=u.concat(rv(f,t,i,r));return u}}function Fy(s,t,i,r,o){const u=t._queryIdentifier,f=s.views.get(u);if(!f){let p=lc(i,o?r:null),m=!1;p?m=!0:r instanceof ie?(p=rh(i,r),m=!1):(p=ie.EMPTY_NODE,m=!1);const g=Tc(new Wi(p,m,!1),new Wi(r,o,!1));return new e1(t,g)}return f}function c1(s,t,i,r,o,u){const f=Fy(s,t,r,o,u);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,f),s1(f,i),a1(f,i)}function u1(s,t,i,r){const o=t._queryIdentifier,u=[];let f=[];const p=$i(s);if(o==="default")for(const[m,g]of s.views.entries())f=f.concat(av(g,i,r)),sv(g)&&(s.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=s.views.get(o);m&&(f=f.concat(av(m,i,r)),sv(m)&&(s.views.delete(o),m.query._queryParams.loadsAllData()||u.push(m.query)))}return p&&!$i(s)&&u.push(new(l1())(t._repo,t._path)),{removed:u,events:f}}function Yy(s){const t=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Ki(s,t){let i=null;for(const r of s.views.values())i=i||i1(r,t);return i}function Ky(s,t){if(t._queryParams.loadsAllData())return Ac(s);{const r=t._queryIdentifier;return s.views.get(r)}}function Qy(s,t){return Ky(s,t)!=null}function $i(s){return Ac(s)!=null}function Ac(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc;function d1(s){B(!dc,"__referenceConstructor has already been defined"),dc=s}function f1(){return B(dc,"Reference.ts has not been loaded"),dc}let h1=1;class lv{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Pe(null),this.pendingWriteTree_=VC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xy(s,t,i,r,o){return xC(s.pendingWriteTree_,t,i,r,o),o?bl(s,new Ns(ky(),t,i)):[]}function Es(s,t,i=!1){const r=OC(s.pendingWriteTree_,t);if(MC(s.pendingWriteTree_,t)){let u=new Pe(null);return r.snap!=null?u=u.set(Ce(),!0):jt(r.children,f=>{u=u.set(new Le(f),!0)}),bl(s,new ac(r.path,u,i))}else return[]}function Sl(s,t,i){return bl(s,new Ns(sh(),t,i))}function p1(s,t,i){const r=Pe.fromObject(i);return bl(s,new fl(sh(),t,r))}function m1(s,t){return bl(s,new dl(sh(),t))}function g1(s,t,i){const r=dh(s,i);if(r){const o=fh(r),u=o.path,f=o.queryId,p=It(u,t),m=new dl(ah(f),p);return hh(s,u,m)}else return[]}function fc(s,t,i,r,o=!1){const u=t._path,f=s.syncPointTree_.get(u);let p=[];if(f&&(t._queryIdentifier==="default"||Qy(f,t))){const m=u1(f,t,i,r);o1(f)&&(s.syncPointTree_=s.syncPointTree_.remove(u));const g=m.removed;if(p=m.events,!o){const y=g.findIndex(S=>S._queryParams.loadsAllData())!==-1,E=s.syncPointTree_.findOnPath(u,(S,R)=>$i(R));if(y&&!E){const S=s.syncPointTree_.subtree(u);if(!S.isEmpty()){const R=y1(S);for(let k=0;k<R.length;++k){const q=R[k],K=q.query,ve=Jy(s,q);s.listenProvider_.startListening(nl(K),hl(s,K),ve.hashFn,ve.onComplete)}}}!E&&g.length>0&&!r&&(y?s.listenProvider_.stopListening(nl(t),null):g.forEach(S=>{const R=s.queryToTagMap.get(Nc(S));s.listenProvider_.stopListening(nl(S),R)}))}S1(s,g)}return p}function Wy(s,t,i,r){const o=dh(s,r);if(o!=null){const u=fh(o),f=u.path,p=u.queryId,m=It(f,t),g=new Ns(ah(p),m,i);return hh(s,f,g)}else return[]}function _1(s,t,i,r){const o=dh(s,r);if(o){const u=fh(o),f=u.path,p=u.queryId,m=It(f,t),g=Pe.fromObject(i),y=new fl(ah(p),m,g);return hh(s,f,y)}else return[]}function xf(s,t,i,r=!1){const o=t._path;let u=null,f=!1;s.syncPointTree_.foreachOnPath(o,(S,R)=>{const k=It(S,o);u=u||Ki(R,k),f=f||$i(R)});let p=s.syncPointTree_.get(o);p?(f=f||$i(p),u=u||Ki(p,Ce())):(p=new Gy,s.syncPointTree_=s.syncPointTree_.set(o,p));let m;u!=null?m=!0:(m=!1,u=ie.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((R,k)=>{const q=Ki(k,Ce());q&&(u=u.updateImmediateChild(R,q))}));const g=Qy(p,t);if(!g&&!t._queryParams.loadsAllData()){const S=Nc(t);B(!s.queryToTagMap.has(S),"View does not exist, but we have a tag");const R=b1();s.queryToTagMap.set(S,R),s.tagToQueryMap.set(R,S)}const y=Cc(s.pendingWriteTree_,o);let E=c1(p,t,i,y,u,m);if(!g&&!f&&!r){const S=Ky(p,t);E=E.concat(E1(s,t,S))}return E}function uh(s,t,i){const o=s.pendingWriteTree_,u=s.syncPointTree_.findOnPath(t,(f,p)=>{const m=It(f,t),g=Ki(p,m);if(g)return g});return zy(o,t,u,i,!0)}function v1(s,t){const i=t._path;let r=null;s.syncPointTree_.foreachOnPath(i,(g,y)=>{const E=It(g,i);r=r||Ki(y,E)});let o=s.syncPointTree_.get(i);o?r=r||Ki(o,Ce()):(o=new Gy,s.syncPointTree_=s.syncPointTree_.set(i,o));const u=r!=null,f=u?new Wi(r,!0,!1):null,p=Cc(s.pendingWriteTree_,t._path),m=Fy(o,t,p,u?f.getNode():ie.EMPTY_NODE,u);return n1(m)}function bl(s,t){return $y(t,s.syncPointTree_,null,Cc(s.pendingWriteTree_,Ce()))}function $y(s,t,i,r){if(_e(s.path))return Zy(s,t,i,r);{const o=t.get(Ce());i==null&&o!=null&&(i=Ki(o,Ce()));let u=[];const f=he(s.path),p=s.operationForChild(f),m=t.children.get(f);if(m&&p){const g=i?i.getImmediateChild(f):null,y=Py(r,f);u=u.concat($y(p,m,g,y))}return o&&(u=u.concat(ch(o,s,r,i))),u}}function Zy(s,t,i,r){const o=t.get(Ce());i==null&&o!=null&&(i=Ki(o,Ce()));let u=[];return t.children.inorderTraversal((f,p)=>{const m=i?i.getImmediateChild(f):null,g=Py(r,f),y=s.operationForChild(f);y&&(u=u.concat(Zy(y,p,m,g)))}),o&&(u=u.concat(ch(o,s,r,i))),u}function Jy(s,t){const i=t.query,r=hl(s,i);return{hashFn:()=>(t1(t)||ie.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?g1(s,i._path,r):m1(s,i._path);{const u=vT(o,i);return fc(s,i,null,u)}}}}function hl(s,t){const i=Nc(t);return s.queryToTagMap.get(i)}function Nc(s){return s._path.toString()+"$"+s._queryIdentifier}function dh(s,t){return s.tagToQueryMap.get(t)}function fh(s){const t=s.indexOf("$");return B(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new Le(s.substr(0,t))}}function hh(s,t,i){const r=s.syncPointTree_.get(t);B(r,"Missing sync point for query tag that we're tracking");const o=Cc(s.pendingWriteTree_,t);return ch(r,i,o,null)}function y1(s){return s.fold((t,i,r)=>{if(i&&$i(i))return[Ac(i)];{let o=[];return i&&(o=Yy(i)),jt(r,(u,f)=>{o=o.concat(f)}),o}})}function nl(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(f1())(s._repo,s._path):s}function S1(s,t){for(let i=0;i<t.length;++i){const r=t[i];if(!r._queryParams.loadsAllData()){const o=Nc(r),u=s.queryToTagMap.get(o);s.queryToTagMap.delete(o),s.tagToQueryMap.delete(u)}}}function b1(){return h1++}function E1(s,t,i){const r=t._path,o=hl(s,t),u=Jy(s,i),f=s.listenProvider_.startListening(nl(t),o,u.hashFn,u.onComplete),p=s.syncPointTree_.subtree(r);if(o)B(!$i(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,y,E)=>{if(!_e(g)&&y&&$i(y))return[Ac(y).query];{let S=[];return y&&(S=S.concat(Yy(y).map(R=>R.query))),jt(E,(R,k)=>{S=S.concat(k)}),S}});for(let g=0;g<m.length;++g){const y=m[g];s.listenProvider_.stopListening(nl(y),hl(s,y))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new ph(i)}node(){return this.node_}}class mh{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=ct(this.path_,t);return new mh(this.syncTree_,i)}node(){return uh(this.syncTree_,this.path_)}}const w1=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},ov=function(s,t,i){if(!s||typeof s!="object")return s;if(B(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return T1(s[".sv"],t,i);if(typeof s[".sv"]=="object")return C1(s[".sv"],t);B(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},T1=function(s,t,i){switch(s){case"timestamp":return i.timestamp;default:B(!1,"Unexpected server value: "+s)}},C1=function(s,t,i){s.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const o=t.node();if(B(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const f=o.getValue();return typeof f!="number"?r:f+r},A1=function(s,t,i,r){return gh(t,new mh(i,s),r)},eS=function(s,t,i){return gh(s,new ph(t),i)};function gh(s,t,i){const r=s.getPriority().val(),o=ov(r,t.getImmediateChild(".priority"),i);let u;if(s.isLeafNode()){const f=s,p=ov(f.getValue(),t,i);return p!==f.getValue()||o!==f.getPriority().val()?new mt(p,_t(o)):s}else{const f=s;return u=f,o!==f.getPriority().val()&&(u=u.updatePriority(new mt(o))),f.forEachChild(Ke,(p,m)=>{const g=gh(m,t.getImmediateChild(p),i);g!==m&&(u=u.updateImmediateChild(p,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t="",i=null,r={children:{},childCount:0}){this.name=t,this.parent=i,this.node=r}}function vh(s,t){let i=t instanceof Le?t:new Le(t),r=s,o=he(i);for(;o!==null;){const u=Na(r.node.children,o)||{children:{},childCount:0};r=new _h(o,r,u),i=ze(i),o=he(i)}return r}function za(s){return s.node.value}function tS(s,t){s.node.value=t,Of(s)}function nS(s){return s.node.childCount>0}function N1(s){return za(s)===void 0&&!nS(s)}function Rc(s,t){jt(s.node.children,(i,r)=>{t(new _h(i,s,r))})}function iS(s,t,i,r){i&&t(s),Rc(s,o=>{iS(o,t,!0)})}function R1(s,t,i){let r=s.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function El(s){return new Le(s.parent===null?s.name:El(s.parent)+"/"+s.name)}function Of(s){s.parent!==null&&I1(s.parent,s.name,s)}function I1(s,t,i){const r=N1(i),o=ii(s.node.children,t);r&&o?(delete s.node.children[t],s.node.childCount--,Of(s)):!r&&!o&&(s.node.children[t]=i.node,s.node.childCount++,Of(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=/[\[\].#$\/\u0000-\u001F\u007F]/,x1=/[\[\].#$\u0000-\u001F\u007F]/,df=10*1024*1024,sS=function(s){return typeof s=="string"&&s.length!==0&&!D1.test(s)},aS=function(s){return typeof s=="string"&&s.length!==0&&!x1.test(s)},O1=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),aS(s)},M1=function(s,t,i,r){yh(Gf(s,"value"),t,i)},yh=function(s,t,i){const r=i instanceof Le?new $T(i,s):i;if(t===void 0)throw new Error(s+"contains undefined "+Ss(r));if(typeof t=="function")throw new Error(s+"contains a function "+Ss(r)+" with contents = "+t.toString());if(ny(t))throw new Error(s+"contains "+t.toString()+" "+Ss(r));if(typeof t=="string"&&t.length>df/3&&Ec(t)>df)throw new Error(s+"contains a string greater than "+df+" utf8 bytes "+Ss(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(jt(t,(f,p)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(u=!0,!sS(f)))throw new Error(s+" contains an invalid key ("+f+") "+Ss(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ZT(r,f),yh(s,p,r),JT(r)}),o&&u)throw new Error(s+' contains ".value" child '+Ss(r)+" in addition to actual children.")}},rS=function(s,t,i,r){if(!aS(i))throw new Error(Gf(s,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},k1=function(s,t,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),rS(s,t,i)},lS=function(s,t){if(he(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},U1=function(s,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!sS(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!O1(i))throw new Error(Gf(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sh(s,t){let i=null;for(let r=0;r<t.length;r++){const o=t[r],u=o.getPath();i!==null&&!Jf(u,i.path)&&(s.eventLists_.push(i),i=null),i===null&&(i={events:[],path:u}),i.events.push(o)}i&&s.eventLists_.push(i)}function oS(s,t,i){Sh(s,i),cS(s,r=>Jf(r,t))}function In(s,t,i){Sh(s,i),cS(s,r=>fn(r,t)||fn(t,r))}function cS(s,t){s.recursionDepth_++;let i=!0;for(let r=0;r<s.eventLists_.length;r++){const o=s.eventLists_[r];if(o){const u=o.path;t(u)?(j1(s.eventLists_[r]),s.eventLists_[r]=null):i=!1}}i&&(s.eventLists_=[]),s.recursionDepth_--}function j1(s){for(let t=0;t<s.events.length;t++){const i=s.events[t];if(i!==null){s.events[t]=null;const r=i.getEventRunner();Zr&&At("event: "+i.toString()),ja(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="repo_interrupt",P1=25;class H1{constructor(t,i,r,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sc(),this.transactionQueueTree_=new _h,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function B1(s,t,i){if(s.stats_=$f(s.repoInfo_),s.forceRestClient_||ET())s.server_=new ic(s.repoInfo_,(r,o,u,f)=>{cv(s,r,o,u,f)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>uv(s,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new Zn(s.repoInfo_,t,(r,o,u,f)=>{cv(s,r,o,u,f)},r=>{uv(s,r)},r=>{q1(s,r)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=NT(s.repoInfo_,()=>new CC(s.stats_,s.server_)),s.infoData_=new SC,s.infoSyncTree_=new lv({startListening:(r,o,u,f)=>{let p=[];const m=s.infoData_.getNode(r._path);return m.isEmpty()||(p=Sl(s.infoSyncTree_,r._path,m),setTimeout(()=>{f("ok")},0)),p},stopListening:()=>{}}),Eh(s,"connected",!1),s.serverSyncTree_=new lv({startListening:(r,o,u,f)=>(s.server_.listen(r,u,o,(p,m)=>{const g=f(p,m);In(s.eventQueue_,r._path,g)}),[]),stopListening:(r,o)=>{s.server_.unlisten(r,o)}})}function V1(s){const i=s.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function bh(s){return w1({timestamp:V1(s)})}function cv(s,t,i,r,o){s.dataUpdateCount++;const u=new Le(t);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,i):i;let f=[];if(o)if(r){const m=Zo(i,g=>_t(g));f=_1(s.serverSyncTree_,u,m,o)}else{const m=_t(i);f=Wy(s.serverSyncTree_,u,m,o)}else if(r){const m=Zo(i,g=>_t(g));f=p1(s.serverSyncTree_,u,m)}else{const m=_t(i);f=Sl(s.serverSyncTree_,u,m)}let p=u;f.length>0&&(p=Dc(s,u)),In(s.eventQueue_,p,f)}function uv(s,t){Eh(s,"connected",t),t===!1&&Y1(s)}function q1(s,t){jt(t,(i,r)=>{Eh(s,i,r)})}function Eh(s,t,i){const r=new Le("/.info/"+t),o=_t(i);s.infoData_.updateSnapshot(r,o);const u=Sl(s.infoSyncTree_,r,o);In(s.eventQueue_,r,u)}function uS(s){return s.nextWriteId_++}function G1(s,t,i){const r=v1(s.serverSyncTree_,t);return r!=null?Promise.resolve(r):s.server_.get(t).then(o=>{const u=_t(o).withIndex(t._queryParams.getIndex());xf(s.serverSyncTree_,t,i,!0);let f;if(t._queryParams.loadsAllData())f=Sl(s.serverSyncTree_,t._path,u);else{const p=hl(s.serverSyncTree_,t);f=Wy(s.serverSyncTree_,t._path,u,p)}return In(s.eventQueue_,t._path,f),fc(s.serverSyncTree_,t,i,null,!0),u},o=>(Ic(s,"get for query "+ot(t)+" failed: "+o),Promise.reject(new Error(o))))}function F1(s,t,i,r,o){Ic(s,"set",{path:t.toString(),value:i,priority:r});const u=bh(s),f=_t(i,r),p=uh(s.serverSyncTree_,t),m=eS(f,p,u),g=uS(s),y=Xy(s.serverSyncTree_,t,m,g,!0);Sh(s.eventQueue_,y),s.server_.put(t.toString(),f.val(!0),(S,R)=>{const k=S==="ok";k||Lt("set at "+t+" failed: "+S);const q=Es(s.serverSyncTree_,g,!k);In(s.eventQueue_,t,q),X1(s,o,S,R)});const E=mS(s,t);Dc(s,E),In(s.eventQueue_,E,[])}function Y1(s){Ic(s,"onDisconnectEvents");const t=bh(s),i=sc();Af(s.onDisconnect_,Ce(),(o,u)=>{const f=A1(o,u,s.serverSyncTree_,t);My(i,o,f)});let r=[];Af(i,Ce(),(o,u)=>{r=r.concat(Sl(s.serverSyncTree_,o,u));const f=mS(s,o);Dc(s,f)}),s.onDisconnect_=sc(),In(s.eventQueue_,Ce(),r)}function K1(s,t,i){let r;he(t._path)===".info"?r=xf(s.infoSyncTree_,t,i):r=xf(s.serverSyncTree_,t,i),oS(s.eventQueue_,t._path,r)}function dv(s,t,i){let r;he(t._path)===".info"?r=fc(s.infoSyncTree_,t,i):r=fc(s.serverSyncTree_,t,i),oS(s.eventQueue_,t._path,r)}function Q1(s){s.persistentConnection_&&s.persistentConnection_.interrupt(z1)}function Ic(s,...t){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),At(i,...t)}function X1(s,t,i,r){t&&ja(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let u=o;r&&(u+=": "+r);const f=new Error(u);f.code=o,t(f)}})}function dS(s,t,i){return uh(s.serverSyncTree_,t,i)||ie.EMPTY_NODE}function wh(s,t=s.transactionQueueTree_){if(t||xc(s,t),za(t)){const i=hS(s,t);B(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&W1(s,El(t),i)}else nS(t)&&Rc(t,i=>{wh(s,i)})}function W1(s,t,i){const r=i.map(g=>g.currentWriteId),o=dS(s,t,r);let u=o;const f=o.hash();for(let g=0;g<i.length;g++){const y=i[g];B(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=It(t,y.path);u=u.updateChild(E,y.currentOutputSnapshotRaw)}const p=u.val(!0),m=t;s.server_.put(m.toString(),p,g=>{Ic(s,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const E=[];for(let S=0;S<i.length;S++)i[S].status=2,y=y.concat(Es(s.serverSyncTree_,i[S].currentWriteId)),i[S].onComplete&&E.push(()=>i[S].onComplete(null,!0,i[S].currentOutputSnapshotResolved)),i[S].unwatcher();xc(s,vh(s.transactionQueueTree_,t)),wh(s,s.transactionQueueTree_),In(s.eventQueue_,t,y);for(let S=0;S<E.length;S++)ja(E[S])}else{if(g==="datastale")for(let E=0;E<i.length;E++)i[E].status===3?i[E].status=4:i[E].status=0;else{Lt("transaction at "+m.toString()+" failed: "+g);for(let E=0;E<i.length;E++)i[E].status=4,i[E].abortReason=g}Dc(s,t)}},f)}function Dc(s,t){const i=fS(s,t),r=El(i),o=hS(s,i);return $1(s,o,r),r}function $1(s,t,i){if(t.length===0)return;const r=[];let o=[];const f=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const m=t[p],g=It(i,m.path);let y=!1,E;if(B(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,E=m.abortReason,o=o.concat(Es(s.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=P1)y=!0,E="maxretry",o=o.concat(Es(s.serverSyncTree_,m.currentWriteId,!0));else{const S=dS(s,m.path,f);m.currentInputSnapshot=S;const R=t[p].update(S.val());if(R!==void 0){yh("transaction failed: Data returned ",R,m.path);let k=_t(R);typeof R=="object"&&R!=null&&ii(R,".priority")||(k=k.updatePriority(S.getPriority()));const K=m.currentWriteId,ve=bh(s),Q=eS(k,S,ve);m.currentOutputSnapshotRaw=k,m.currentOutputSnapshotResolved=Q,m.currentWriteId=uS(s),f.splice(f.indexOf(K),1),o=o.concat(Xy(s.serverSyncTree_,m.path,Q,m.currentWriteId,m.applyLocally)),o=o.concat(Es(s.serverSyncTree_,K,!0))}else y=!0,E="nodata",o=o.concat(Es(s.serverSyncTree_,m.currentWriteId,!0))}In(s.eventQueue_,i,o),o=[],y&&(t[p].status=2,function(S){setTimeout(S,Math.floor(0))}(t[p].unwatcher),t[p].onComplete&&(E==="nodata"?r.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):r.push(()=>t[p].onComplete(new Error(E),!1,null))))}xc(s,s.transactionQueueTree_);for(let p=0;p<r.length;p++)ja(r[p]);wh(s,s.transactionQueueTree_)}function fS(s,t){let i,r=s.transactionQueueTree_;for(i=he(t);i!==null&&za(r)===void 0;)r=vh(r,i),t=ze(t),i=he(t);return r}function hS(s,t){const i=[];return pS(s,t,i),i.sort((r,o)=>r.order-o.order),i}function pS(s,t,i){const r=za(t);if(r)for(let o=0;o<r.length;o++)i.push(r[o]);Rc(t,o=>{pS(s,o,i)})}function xc(s,t){const i=za(t);if(i){let r=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[r]=i[o],r++);i.length=r,tS(t,i.length>0?i:void 0)}Rc(t,r=>{xc(s,r)})}function mS(s,t){const i=El(fS(s,t)),r=vh(s.transactionQueueTree_,t);return R1(r,o=>{ff(s,o)}),ff(s,r),iS(r,o=>{ff(s,o)}),i}function ff(s,t){const i=za(t);if(i){const r=[];let o=[],u=-1;for(let f=0;f<i.length;f++)i[f].status===3||(i[f].status===1?(B(u===f-1,"All SENT items should be at beginning of queue."),u=f,i[f].status=3,i[f].abortReason="set"):(B(i[f].status===0,"Unexpected transaction status in abort"),i[f].unwatcher(),o=o.concat(Es(s.serverSyncTree_,i[f].currentWriteId,!0)),i[f].onComplete&&r.push(i[f].onComplete.bind(null,new Error("set"),!1,null))));u===-1?tS(t,void 0):i.length=u+1,In(s.eventQueue_,El(t),o);for(let f=0;f<r.length;f++)ja(r[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(s){let t="";const i=s.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function J1(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const i of s.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Lt(`Invalid query segment '${i}' in query '${s}'`)}return t}const fv=function(s,t){const i=eA(s),r=i.namespace;i.domain==="firebase.com"&&ei(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||hT();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new py(i.host,i.secure,r,o,t,"",r!==i.subdomain),path:new Le(i.pathString)}},eA=function(s){let t="",i="",r="",o="",u="",f=!0,p="https",m=443;if(typeof s=="string"){let g=s.indexOf("//");g>=0&&(p=s.substring(0,g-1),s=s.substring(g+2));let y=s.indexOf("/");y===-1&&(y=s.length);let E=s.indexOf("?");E===-1&&(E=s.length),t=s.substring(0,Math.min(y,E)),y<E&&(o=Z1(s.substring(y,E)));const S=J1(s.substring(Math.min(s.length,E)));g=t.indexOf(":"),g>=0?(f=p==="https"||p==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const R=t.slice(0,g);if(R.toLowerCase()==="localhost")i="localhost";else if(R.split(".").length<=2)i=R;else{const k=t.indexOf(".");r=t.substring(0,k).toLowerCase(),i=t.substring(k+1),u=r}"ns"in S&&(u=S.ns)}return{host:t,port:m,domain:i,subdomain:r,secure:f,scheme:p,pathString:o,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t,i,r,o){this.eventType=t,this.eventRegistration=i,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ot(this.snapshot.exportVal())}}class nA{constructor(t,i,r){this.eventRegistration=t,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,i,r,o){this._repo=t,this._path=i,this._queryParams=r,this._orderByCalled=o}get key(){return _e(this._path)?null:wy(this._path)}get ref(){return new si(this._repo,this._path)}get _queryIdentifier(){const t=W_(this._queryParams),i=Xf(t);return i==="{}"?"default":i}get _queryObject(){return W_(this._queryParams)}isEqual(t){if(t=Yt(t),!(t instanceof Th))return!1;const i=this._repo===t._repo,r=Jf(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+WT(this._path)}}class si extends Th{constructor(t,i){super(t,i,new ih,!1)}get parent(){const t=Cy(this._path);return t===null?null:new si(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class pl{constructor(t,i,r){this._node=t,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Le(t),r=Mf(this.ref,t);return new pl(this._node.getChild(i),r,Ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new pl(o,Mf(this.ref,r),Ke)))}hasChild(t){const i=new Le(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sn(s,t){return s=Yt(s),s._checkNotDeleted("ref"),t!==void 0?Mf(s._root,t):s._root}function Mf(s,t){return s=Yt(s),he(s._path)===null?k1("child","path",t):rS("child","path",t),new si(s._repo,ct(s._path,t))}function kf(s){return lS("remove",s._path),il(s,null)}function il(s,t){s=Yt(s),lS("set",s._path),M1("set",t,s._path);const i=new bc;return F1(s._repo,s._path,t,null,i.wrapCallback(()=>{})),i.promise}function Ea(s){s=Yt(s);const t=new gS(()=>{}),i=new Oc(t);return G1(s._repo,s,i).then(r=>new pl(r,new si(s._repo,s._path),s._queryParams.getIndex()))}class Oc{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const r=i._queryParams.getIndex();return new tA("value",this,new pl(t.snapshotNode,new si(i._repo,i._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new nA(this,t,i):null}matches(t){return t instanceof Oc?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function iA(s,t,i,r,o){let u;if(typeof r=="object"&&(u=void 0,o=r),typeof r=="function"&&(u=r),o&&o.onlyOnce){const m=i,g=(y,E)=>{dv(s._repo,s,p),m(y,E)};g.userCallback=i.userCallback,g.context=i.context,i=g}const f=new gS(i,u||void 0),p=new Oc(f);return K1(s._repo,s,p),()=>dv(s._repo,s,p)}function hv(s,t,i,r){return iA(s,"value",t,i,r)}r1(si);d1(si);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="FIREBASE_DATABASE_EMULATOR_HOST",Uf={};let aA=!1;function rA(s,t,i,r){const o=t.lastIndexOf(":"),u=t.substring(0,o),f=Ma(u);s.repoInfo_=new py(t,f,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,i),r&&(s.authTokenProvider_=r)}function lA(s,t,i,r,o){let u=r||s.options.databaseURL;u===void 0&&(s.options.projectId||ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),At("Using default host for project ",s.options.projectId),u=`${s.options.projectId}-default-rtdb.firebaseio.com`);let f=fv(u,o),p=f.repoInfo,m;typeof process<"u"&&O_&&(m=O_[sA]),m?(u=`http://${m}?ns=${p.namespace}`,f=fv(u,o),p=f.repoInfo):f.repoInfo.secure;const g=new TT(s.name,s.options,t);U1("Invalid Firebase Database URL",f),_e(f.path)||ei("Database URL must point to the root of a Firebase Database (not including a child path).");const y=cA(p,s,g,new wT(s,i));return new uA(y,s)}function oA(s,t){const i=Uf[t];(!i||i[s.key]!==s)&&ei(`Database ${t}(${s.repoInfo_}) has already been deleted.`),Q1(s),delete i[s.key]}function cA(s,t,i,r){let o=Uf[t.name];o||(o={},Uf[t.name]=o);let u=o[s.toURLString()];return u&&ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new H1(s,aA,i,r),o[s.toURLString()]=u,u}class uA{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(B1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new si(this._repo,Ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&ei("Cannot call "+t+" on a deleted database.")}}function _S(s=Wv(),t){const i=Kf(s,"database").getImmediate({identifier:t});if(!i._instanceStarted){const r=xE("database");r&&dA(i,...r)}return i}function dA(s,t,i,r={}){s=Yt(s),s._checkNotDeleted("useEmulator");const o=`${t}:${i}`,u=s._repoInternal;if(s._instanceStarted){if(o===s._repoInternal.repoInfo_.host&&Ts(r,u.repoInfo_.emulatorOptions))return;ei("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Fo(Fo.OWNER);else if(r.mockUserToken){const p=typeof r.mockUserToken=="string"?r.mockUserToken:OE(r.mockUserToken,s.app.options.projectId);f=new Fo(p)}Ma(t)&&(Gv(t),Fv("Database",!0)),rA(u,o,r,f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(s){lT(Ua),Ra(new Cs("database",(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return lA(r,o,u,i)},"PUBLIC").setMultipleInstances(!0)),Fi(M_,k_,s),Fi(M_,k_,"esm2017")}Zn.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};Zn.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};fA();function Ch(s,t){var i={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(i[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(i[r[o]]=s[r[o]]);return i}function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hA=vS,yS=new gl("auth","Firebase",vS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Ff("@firebase/auth");function pA(s,...t){hc.logLevel<=Me.WARN&&hc.warn(`Auth (${Ua}): ${s}`,...t)}function Yo(s,...t){hc.logLevel<=Me.ERROR&&hc.error(`Auth (${Ua}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(s,...t){throw Ah(s,...t)}function Nn(s,...t){return Ah(s,...t)}function SS(s,t,i){const r=Object.assign(Object.assign({},hA()),{[t]:i});return new gl("auth","Firebase",r).create(t,{appName:s.name})}function Qi(s){return SS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ah(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return yS.create(s,...t)}function le(s,t,...i){if(!s)throw Ah(t,...i)}function Wn(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Yo(t),new Error(t)}function ni(s,t){s||Wn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function mA(){return pv()==="http:"||pv()==="https:"}function pv(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mA()||LE()||"connection"in navigator)?navigator.onLine:!0}function _A(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,i){this.shortDelay=t,this.longDelay=i,ni(i>t,"Short delay should be less than long delay!"),this.isMobile=qf()||Yv()}get(){return gA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(s,t){ni(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SA=new wl(3e4,6e4);function Mc(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Pa(s,t,i,r,o={}){return ES(s,o,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const p=ka(Object.assign({key:s.config.apiKey},f)).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const g=Object.assign({method:t,headers:m},u);return UE()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Ma(s.emulatorConfig.host)&&(g.credentials="include"),bS.fetch()(await TS(s,s.config.apiHost,i,p),g)})}async function ES(s,t,i){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},vA),t);try{const o=new bA(s),u=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qo(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw qo(s,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw qo(s,"email-already-in-use",f);if(m==="USER_DISABLED")throw qo(s,"user-disabled",f);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw SS(s,y,g);ti(s,y)}}catch(o){if(o instanceof Ji)throw o;ti(s,"network-request-failed",{message:String(o)})}}async function wS(s,t,i,r,o={}){const u=await Pa(s,t,i,r,o);return"mfaPendingCredential"in u&&ti(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function TS(s,t,i,r){const o=`${t}${i}?${r}`,u=s,f=u.config.emulator?Nh(s.config,o):`${s.config.apiScheme}://${o}`;return yA.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class bA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),SA.get())})}}function qo(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const o=Nn(s,t,r);return o.customData._tokenResponse=i,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(s,t){return Pa(s,"POST","/v1/accounts:delete",t)}async function pc(s,t){return Pa(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wA(s,t=!1){const i=Yt(s),r=await i.getIdToken(t),o=Rh(r);le(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:sl(hf(o.auth_time)),issuedAtTime:sl(hf(o.iat)),expirationTime:sl(hf(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function hf(s){return Number(s)*1e3}function Rh(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return Yo("JWT malformed, contained fewer than 3 sections"),null;try{const o=$o(i);return o?JSON.parse(o):(Yo("Failed to decode base64 JWT payload"),null)}catch(o){return Yo("Caught error parsing JWT payload as JSON",o?.toString()),null}}function mv(s){const t=Rh(s);return le(t,"internal-error"),le(typeof t.exp<"u","internal-error"),le(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Ji&&TA(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function TA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var i;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(s){var t;const i=s.auth,r=await s.getIdToken(),o=await ml(s,pc(i,{idToken:r}));le(o?.users.length,i,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?CS(u.providerUserInfo):[],p=NA(s.providerData,f),m=s.isAnonymous,g=!(s.email&&u.passwordHash)&&!p?.length,y=m?g:!1,E={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:p,metadata:new jf(u.createdAt,u.lastLoginAt),isAnonymous:y};Object.assign(s,E)}async function AA(s){const t=Yt(s);await mc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function NA(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function CS(s){return s.map(t=>{var{providerId:i}=t,r=Ch(t,["providerId"]);return{providerId:i,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(s,t){const i=await ES(s,{},async()=>{const r=ka({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await TS(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ma(s.emulatorConfig.host)&&(m.credentials="include"),bS.fetch()(f,m)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function IA(s,t){return Pa(s,"POST","/v2/accounts:revokeToken",Mc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){le(t.idToken,"internal-error"),le(typeof t.idToken<"u","internal-error"),le(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){le(t.length!==0,"internal-error");const i=mv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:o,expiresIn:u}=await RA(t,i);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:o,expirationTime:u}=i,f=new wa;return r&&(le(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),o&&(le(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(le(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(s,t){le(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class pn{constructor(t){var{uid:i,auth:r,stsTokenManager:o}=t,u=Ch(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new jf(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const i=await ml(this,this.stsTokenManager.getToken(this.auth,t));return le(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return wA(this,t)}reload(){return AA(this)}_assign(t){this!==t&&(le(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>Object.assign({},i)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new pn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(t){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Qi(this.auth));const t=await this.getIdToken();return await ml(this,EA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){var r,o,u,f,p,m,g,y;const E=(r=i.displayName)!==null&&r!==void 0?r:void 0,S=(o=i.email)!==null&&o!==void 0?o:void 0,R=(u=i.phoneNumber)!==null&&u!==void 0?u:void 0,k=(f=i.photoURL)!==null&&f!==void 0?f:void 0,q=(p=i.tenantId)!==null&&p!==void 0?p:void 0,K=(m=i._redirectEventId)!==null&&m!==void 0?m:void 0,ve=(g=i.createdAt)!==null&&g!==void 0?g:void 0,Q=(y=i.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:z,emailVerified:W,isAnonymous:se,providerData:Ne,stsTokenManager:He}=i;le(z&&He,t,"internal-error");const Qe=wa.fromJSON(this.name,He);le(typeof z=="string",t,"internal-error"),Li(E,t.name),Li(S,t.name),le(typeof W=="boolean",t,"internal-error"),le(typeof se=="boolean",t,"internal-error"),Li(R,t.name),Li(k,t.name),Li(q,t.name),Li(K,t.name),Li(ve,t.name),Li(Q,t.name);const ut=new pn({uid:z,auth:t,email:S,emailVerified:W,displayName:E,isAnonymous:se,photoURL:k,phoneNumber:R,tenantId:q,stsTokenManager:Qe,createdAt:ve,lastLoginAt:Q});return Ne&&Array.isArray(Ne)&&(ut.providerData=Ne.map(et=>Object.assign({},et))),K&&(ut._redirectEventId=K),ut}static async _fromIdTokenResponse(t,i,r=!1){const o=new wa;o.updateFromServerResponse(i);const u=new pn({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await mc(u),u}static async _fromGetAccountInfoResponse(t,i,r){const o=i.users[0];le(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?CS(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,p=new wa;p.updateFromIdToken(r);const m=new pn({uid:o.localId,auth:t,stsTokenManager:p,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function $n(s){ni(s instanceof Function,"Expected a class definition");let t=gv.get(s);return t?(ni(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,gv.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}AS.type="NONE";const _v=AS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(s,t,i){return`firebase:${s}:${t}:${i}`}class Ta{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Ko(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ko("persistence",o.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await pc(this.auth,{idToken:t}).catch(()=>{});return i?pn._fromGetAccountInfoResponse(this.auth,i,t):null}return pn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new Ta($n(_v),t,r);const o=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||$n(_v);const f=Ko(r,t.config.apiKey,t.name);let p=null;for(const g of i)try{const y=await g._get(f);if(y){let E;if(typeof y=="string"){const S=await pc(t,{idToken:y}).catch(()=>{});if(!S)break;E=await pn._fromGetAccountInfoResponse(t,S,y)}else E=pn._fromJSON(t,y);g!==u&&(p=E),u=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new Ta(u,t,r):(u=m[0],p&&await u._set(f,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new Ta(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(NS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(OS(t))return"Blackberry";if(MS(t))return"Webos";if(RS(t))return"Safari";if((t.includes("chrome/")||IS(t))&&!t.includes("edge/"))return"Chrome";if(xS(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function NS(s=Dt()){return/firefox\//i.test(s)}function RS(s=Dt()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function IS(s=Dt()){return/crios\//i.test(s)}function DS(s=Dt()){return/iemobile/i.test(s)}function xS(s=Dt()){return/android/i.test(s)}function OS(s=Dt()){return/blackberry/i.test(s)}function MS(s=Dt()){return/webos/i.test(s)}function Ih(s=Dt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function DA(s=Dt()){var t;return Ih(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function xA(){return jE()&&document.documentMode===10}function kS(s=Dt()){return Ih(s)||xS(s)||MS(s)||OS(s)||/windows phone/i.test(s)||DS(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(s,t=[]){let i;switch(s){case"Browser":i=vv(Dt());break;case"Worker":i=`${vv(Dt())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,p)=>{try{const m=t(u);f(m)}catch(m){p(m)}});r.onAbort=i,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(s,t={}){return Pa(s,"GET","/v2/passwordPolicy",Mc(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=6;class UA{constructor(t){var i,r,o,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=f.minPasswordLength)!==null&&i!==void 0?i:kA,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var i,r,o,u,f,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(i=m.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsUppercaseLetter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNumericCharacter)!==null&&f!==void 0?f:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(t,i,r,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new OA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=$n(i)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await pc(this,{idToken:t}),r=await pn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(un(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,p=o?._redirectEventId,m=await this.tryRedirectSignIn(t);(!f||f===p)&&m?.user&&(o=m.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await mc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_A()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(un(this.app))return Promise.reject(Qi(this));const i=t?Yt(t):null;return i&&le(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&le(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return un(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await MA(this),i=new UA(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new gl("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await IA(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&$n(t)||this._popupRedirectResolver;le(i,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[$n(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,r;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(i=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,o){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const m=t.addObserver(i,r,o);return()=>{f=!0,m()}}else{const m=t.addObserver(i);return()=>{f=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=US(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(i["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(i["X-Firebase-AppCheck"]=o),i}async _getAppCheckToken(){var t;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return i?.error&&pA(`Error while retrieving App Check token: ${i.error}`),i?.token}}function kc(s){return Yt(s)}class yv{constructor(t){this.auth=t,this.observer=null,this.addObserver=KE(i=>this.observer=i)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jA(s){Dh=s}function zA(s){return Dh.loadJS(s)}function PA(){return Dh.gapiScript}function HA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(s,t){const i=Kf(s,"auth");if(i.isInitialized()){const o=i.getImmediate(),u=i.getOptions();if(Ts(u,t??{}))return o;ti(o,"already-initialized")}return i.initialize({options:t})}function VA(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map($n);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function qA(s,t,i){const r=kc(s);le(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=LS(t),{host:f,port:p}=GA(t),m=p===null?"":`:${p}`,g={url:`${u}//${f}${m}/`},y=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Ts(g,r.config.emulator)&&Ts(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ma(f)?(Gv(`${u}//${f}${m}`),Fv("Auth",!0)):FA()}function LS(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function GA(s){const t=LS(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Sv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Sv(f)}}}function Sv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function FA(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Wn("not implemented")}_getIdTokenResponse(t){return Wn("not implemented")}_linkToIdToken(t,i){return Wn("not implemented")}_getReauthenticationResolver(t){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(s,t){return wS(s,"POST","/v1/accounts:signInWithIdp",Mc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="http://localhost";class Is extends jS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Is(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):ti("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o}=i,u=Ch(i,["providerId","signInMethod"]);if(!r||!o)return null;const f=new Is(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return Ca(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,Ca(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ca(t,i)}buildRequest(){const t={requestUri:YA,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=ka(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends zS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Tl{constructor(){super("facebook.com")}static credential(t){return Is._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pi.credentialFromTaggedObject(t)}static credentialFromError(t){return Pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pi.credential(t.oauthAccessToken)}catch{return null}}}Pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Is._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return Hi.credential(i,r)}catch{return null}}}Hi.GOOGLE_SIGN_IN_METHOD="google.com";Hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Tl{constructor(){super("github.com")}static credential(t){return Is._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bi.credential(t.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Tl{constructor(){super("twitter.com")}static credential(t,i){return Is._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Vi.credentialFromTaggedObject(t)}static credentialFromError(t){return Vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return Vi.credential(i,r)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(s,t){return wS(s,"POST","/v1/accounts:signUp",Mc(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,o=!1){const u=await pn._fromIdTokenResponse(t,r,o),f=bv(r);return new Zi({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const o=bv(r);return new Zi({user:t,providerId:o,_tokenResponse:r,operationType:i})}}function bv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(s){var t;if(un(s.app))return Promise.reject(Qi(s));const i=kc(s);if(await i._initializationPromise,!((t=i.currentUser)===null||t===void 0)&&t.isAnonymous)return new Zi({user:i.currentUser,providerId:null,operationType:"signIn"});const r=await KA(i,{returnSecureToken:!0}),o=await Zi._fromIdTokenResponse(i,"signIn",r,!0);return await i._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Ji{constructor(t,i,r,o){var u;super(i.code,i.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,o){return new gc(t,i,r,o)}}function PS(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(s,u,t,r):u})}async function XA(s,t,i=!1){const r=await ml(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return Zi._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(s,t,i=!1){const{auth:r}=s;if(un(r.app))return Promise.reject(Qi(r));const o="reauthenticate";try{const u=await ml(s,PS(r,o,t,s),i);le(u.idToken,r,"internal-error");const f=Rh(u.idToken);le(f,r,"internal-error");const{sub:p}=f;return le(s.uid===p,r,"user-mismatch"),Zi._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(s,t,i=!1){if(un(s.app))return Promise.reject(Qi(s));const r="signIn",o=await PS(s,r,t),u=await Zi._fromIdTokenResponse(s,r,o);return i||await s._updateCurrentUser(u.user),u}function ZA(s,t,i,r){return Yt(s).onIdTokenChanged(t,i,r)}function JA(s,t,i){return Yt(s).beforeAuthStateChanged(t,i)}function eN(s,t,i,r){return Yt(s).onAuthStateChanged(t,i,r)}const _c="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(_c,"1"),this.storage.removeItem(_c),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1e3,nN=10;class BS extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,p,m)=>{this.notifyListeners(f,m)});return}const r=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);xA()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,nN):o()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}BS.type="LOCAL";const iN=BS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}VS.type="SESSION";const qS=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const r=new Uc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:o,data:u}=i.data,f=this.handlersMap[o];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async g=>g(i.origin,u)),m=await sN(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:m})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,m)=>{const g=xh("",20);o.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(S.data.response);break;default:clearTimeout(y),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:i},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function rN(s){Rn().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function lN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oN(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function cN(){return GS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",uN=1,vc="firebaseLocalStorage",YS="fbase_key";class Cl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Lc(s,t){return s.transaction([vc],t?"readwrite":"readonly").objectStore(vc)}function dN(){const s=indexedDB.deleteDatabase(FS);return new Cl(s).toPromise()}function zf(){const s=indexedDB.open(FS,uN);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(vc,{keyPath:YS})}catch(o){i(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(vc)?t(r):(r.close(),await dN(),t(await zf()))})})}async function Ev(s,t,i){const r=Lc(s,!0).put({[YS]:t,value:i});return new Cl(r).toPromise()}async function fN(s,t){const i=Lc(s,!1).get(t),r=await new Cl(i).toPromise();return r===void 0?null:r.value}function wv(s,t){const i=Lc(s,!0).delete(t);return new Cl(i).toPromise()}const hN=800,pN=3;class KS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zf(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>pN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance(cN()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await lN(),!this.activeServiceWorker)return;this.sender=new aN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||oN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zf();return await Ev(t,_c,"1"),await wv(t,_c),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ev(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>fN(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>wv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Lc(o,!1).getAll();return new Cl(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KS.type="LOCAL";const mN=KS;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(s,t){return t?$n(t):(le(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends jS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ca(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ca(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ca(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function _N(s){return $A(s.auth,new Oh(s),s.bypassAuthState)}function vN(s){const{auth:t,user:i}=s;return le(i,t,"internal-error"),WA(i,new Oh(s),s.bypassAuthState)}async function yN(s){const{auth:t,user:i}=s;return le(i,t,"internal-error"),XA(i,new Oh(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t,i,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:o,tenantId:u,error:f,type:p}=t;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return _N;case"linkViaPopup":case"linkViaRedirect":return yN;case"reauthViaPopup":case"reauthViaRedirect":return vN;default:ti(this.auth,"internal-error")}}resolve(t){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new wl(2e3,1e4);class va extends QS{constructor(t,i,r,o,u){super(t,i,o,u),this.provider=r,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return le(t,this.auth,"internal-error"),t}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const t=xh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,SN.get())};t()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="pendingRedirect",Qo=new Map;class EN extends QS{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=Qo.get(this.auth._key());if(!t){try{const r=await wN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}Qo.set(this.auth._key(),t)}return this.bypassAuthState||Qo.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wN(s,t){const i=AN(t),r=CN(s);if(!await r._isAvailable())return!1;const o=await r._get(i)==="true";return await r._remove(i),o}function TN(s,t){Qo.set(s._key(),t)}function CN(s){return $n(s._redirectPersistence)}function AN(s){return Ko(bN,s.config.apiKey,s.name)}async function NN(s,t,i=!1){if(un(s.app))return Promise.reject(Qi(s));const r=kc(s),o=gN(r,t),f=await new EN(r,o,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=10*60*1e3;class IN{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DN(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var r;if(t.error&&!XS(t)){const o=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";i.onError(Nn(this.auth,o))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=RN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(t))}saveEventToCache(t){this.cachedEventUids.add(Tv(t)),this.lastProcessedEventTime=Date.now()}}function Tv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function XS({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function DN(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(s,t={}){return Pa(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MN=/^https?/;async function kN(s){if(s.config.emulator)return;const{authorizedDomains:t}=await xN(s);for(const i of t)try{if(UN(i))return}catch{}ti(s,"unauthorized-domain")}function UN(s){const t=Lf(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!MN.test(i))return!1;if(ON.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new wl(3e4,6e4);function Cv(){const s=Rn().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function jN(s){return new Promise((t,i)=>{var r,o,u;function f(){Cv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Cv(),i(Nn(s,"network-request-failed"))},timeout:LN.get()})}if(!((o=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=Rn().gapi)===null||u===void 0)&&u.load)f();else{const p=HA("iframefcb");return Rn()[p]=()=>{gapi.load?f():i(Nn(s,"network-request-failed"))},zA(`${PA()}?onload=${p}`).catch(m=>i(m))}}).catch(t=>{throw Xo=null,t})}let Xo=null;function zN(s){return Xo=Xo||jN(s),Xo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new wl(5e3,15e3),HN="__/auth/iframe",BN="emulator/auth/iframe",VN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GN(s){const t=s.config;le(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Nh(t,BN):`https://${s.config.authDomain}/${HN}`,r={apiKey:t.apiKey,appName:s.name,v:Ua},o=qN.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${ka(r).slice(1)}`}async function FN(s){const t=await zN(s),i=Rn().gapi;return le(i,s,"internal-error"),t.open({where:document.body,url:GN(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VN,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Nn(s,"network-request-failed"),p=Rn().setTimeout(()=>{u(f)},PN.get());function m(){Rn().clearTimeout(p),o(r)}r.ping(m).then(m,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KN=500,QN=600,XN="_blank",WN="http://localhost";class Av{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $N(s,t,i,r=KN,o=QN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const m=Object.assign(Object.assign({},YN),{width:r.toString(),height:o.toString(),top:u,left:f}),g=Dt().toLowerCase();i&&(p=IS(g)?XN:i),NS(g)&&(t=t||WN,m.scrollbars="yes");const y=Object.entries(m).reduce((S,[R,k])=>`${S}${R}=${k},`,"");if(DA(g)&&p!=="_self")return ZN(t||"",p),new Av(null);const E=window.open(t||"",p,y);le(E,s,"popup-blocked");try{E.focus()}catch{}return new Av(E)}function ZN(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="__/auth/handler",eR="emulator/auth/handler",tR=encodeURIComponent("fac");async function Nv(s,t,i,r,o,u){le(s.config.authDomain,s,"auth-domain-config-required"),le(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:Ua,eventId:o};if(t instanceof zS){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",_f(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,E]of Object.entries({}))f[y]=E}if(t instanceof Tl){const y=t.getScopes().filter(E=>E!=="");y.length>0&&(f.scopes=y.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const y of Object.keys(p))p[y]===void 0&&delete p[y];const m=await s._getAppCheckToken(),g=m?`#${tR}=${encodeURIComponent(m)}`:"";return`${nR(s)}?${ka(p).slice(1)}${g}`}function nR({config:s}){return s.emulator?Nh(s,eR):`https://${s.authDomain}/${JN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qS,this._completeRedirectFn=NN,this._overrideRedirectResult=TN}async _openPopup(t,i,r,o){var u;ni((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await Nv(t,i,r,Lf(),o);return $N(t,f,xh())}async _openRedirect(t,i,r,o){await this._originValidation(t);const u=await Nv(t,i,r,Lf(),o);return rN(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:u}=this.eventManagers[i];return o?Promise.resolve(o):(ni(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await FN(t),r=new IN(t);return i.register("authEvent",o=>(le(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(pf,{type:pf},o=>{var u;const f=(u=o?.[0])===null||u===void 0?void 0:u[pf];f!==void 0&&i(!!f),ti(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=kN(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return kS()||RS()||Ih()}}const sR=iR;var Rv="@firebase/auth",Iv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lR(s){Ra(new Cs("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;le(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:US(s)},g=new LA(r,o,u,m);return VA(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),Ra(new Cs("auth-internal",t=>{const i=kc(t.getProvider("auth").getImmediate());return(r=>new aR(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(Rv,Iv,rR(s)),Fi(Rv,Iv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=5*60,cR=qv("authIdTokenMaxAge")||oR;let Dv=null;const uR=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>cR)return;const o=i?.token;Dv!==o&&(Dv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function WS(s=Wv()){const t=Kf(s,"auth");if(t.isInitialized())return t.getImmediate();const i=BA(s,{popupRedirectResolver:sR,persistence:[mN,iN,qS]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=uR(u.toString());JA(i,f,()=>f(i.currentUser)),ZA(i,p=>f(p))}}const o=Bv("auth");return o&&qA(i,`http://${o}`),i}function dR(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}jA({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Nn("internal-error");u.customData=o,i(u)},r.type="text/javascript",r.charset="UTF-8",dR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lR("Browser");let Qn=null,Je=null,Aa=null,yc=!1;const $S={apiKey:void 0,authDomain:void 0,databaseURL:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},fR=Object.values($S).filter(s=>s&&s!=="undefined"&&!s.toString().includes("your_")).length>=7;if(fR)try{Qn=Qf($S),Je=_S(Qn),Aa=WS(Qn),yc=!0,console.log("Firebase initialized with environment variables")}catch(s){console.error("Failed to initialize Firebase with env config:",s)}const xv=async(s=null)=>{if(yc&&!s)return{app:Qn,database:Je,auth:Aa};let t=s;if(!t&&window.electronAPI&&window.electronAPI.getFirebaseConfig)try{t=await window.electronAPI.getFirebaseConfig(),console.log("Loaded Firebase config from storage")}catch{console.log("No stored Firebase config found")}if(!t)throw new Error("FIREBASE_CONFIG_MISSING");if(!(Object.values(t).filter(r=>r&&r!=="undefined"&&!r.toString().includes("your_")).length>=7))throw console.error("Firebase configuration is incomplete."),new Error("FIREBASE_CONFIG_MISSING");try{return Qn&&s&&console.log("Reinitializing Firebase with new config"),Qn=Qf(t),Je=_S(Qn),Aa=WS(Qn),yc=!0,console.log("Firebase initialized successfully"),{app:Qn,database:Je,auth:Aa}}catch(r){throw console.error("Firebase initialization failed:",r),r}},hR=async()=>{if(window.electronAPI&&window.electronAPI.getFirebaseConfig)try{return await window.electronAPI.getFirebaseConfig()}catch(s){console.error("Failed to get Firebase config:",s)}return null},pR=()=>{if(!Aa)throw new Error("Firebase not initialized. Call initializeFirebase() first.");return Aa},Pf=()=>yc,mR=({updateInfo:s,onDismiss:t,onPostpone:i,onUpdateNow:r,updateProgress:o,onRestartNow:u,onRestartLater:f,onCancelUpdate:p})=>{const m=H.useRef(-1);H.useEffect(()=>{if(o?.phase==="downloading"&&o?.percent!==void 0){const z=Math.floor(o.percent/10)*10;z!==m.current&&z>=0&&(console.log(`[Update] Download progress: ${z}% - ${o.message}`),m.current=z)}else o?.phase==="installing"?console.log("[Update] Installing update..."):o?.phase==="ready"?console.log("[Update] Update ready for restart"):o?.phase==="error"&&console.log("[Update] Error:",o.message)},[o]);const[g,y]=H.useState(!0),[E,S]=H.useState(!1),[R,k]=H.useState(null),q=()=>{o?.phase||(y(!1),setTimeout(()=>t(s.latestVersion),300))},K=()=>{o?.phase||(y(!1),setTimeout(()=>i(s.latestVersion),300))},ve=()=>{S(!1),k(null),p&&p()},Q=async()=>{console.log("[UpdateNotification] Download and Install button clicked."),S(!0),k(null);try{await r(s)}catch(z){console.error("[UpdateNotification] Update failed:",z),k(z.message),S(!1)}};return H.useEffect(()=>{o?.phase==="restart_required"&&S(!1)},[o]),g?o?.phase==="restart_required"?v.jsx("div",{className:"update-notification",children:v.jsxs("div",{className:"update-notification-content",children:[v.jsx("div",{className:"update-header",children:v.jsx("h3",{children:" Update Staged Successfully!"})}),v.jsx("div",{className:"update-info",children:v.jsx("p",{children:"The update has been downloaded and staged. Restart the app to apply the update."})}),v.jsxs("div",{className:"update-actions",children:[v.jsx("button",{className:"update-btn primary",onClick:u,title:"Restart the app now to complete the update",children:" Restart Now"}),v.jsx("button",{className:"update-btn secondary",onClick:f,title:"Restart later - the update will take effect on next app launch",children:" Restart Later"})]})]})}):v.jsx("div",{className:"update-notification",children:v.jsxs("div",{className:"update-notification-content",children:[!o?.phase&&v.jsx("button",{className:"update-close-btn",onClick:K,disabled:E,title:"Show again next time",children:""}),v.jsx("div",{className:"update-header",children:v.jsx("h3",{children:" New Version Available!"})}),!o?.phase&&v.jsxs("div",{className:"update-info",children:[v.jsxs("div",{className:"version-details",children:[v.jsxs("span",{className:"version-badge current",children:["Current: ",s.currentVersion]}),v.jsxs("span",{className:"version-badge latest",children:["Latest: ",s.latestVersion]})]}),s.releaseDate&&v.jsxs("p",{className:"release-date",children:["Released: ",s.releaseDate]}),s.releaseNotes&&v.jsxs("div",{className:"release-notes",children:[v.jsx("h4",{children:"What's New:"}),v.jsx("div",{className:"release-notes-content",children:s.releaseNotes})]}),s.commitMessage&&v.jsxs("p",{className:"commit-message",children:["Latest: ",s.commitMessage]})]}),o?.phase&&v.jsxs("div",{className:"update-progress",children:[v.jsxs("div",{className:"progress-header",children:[v.jsxs("h4",{children:[o.phase==="downloading"&&" Downloading Update...",o.phase==="installing"&&" Installing Update...",o.phase==="restart_required"&&" Update Staged!",o.phase==="error"&&" Update Failed"]}),o.phase!=="restart_required"&&v.jsx("button",{className:"cancel-update-btn",onClick:ve,title:"Cancel update",children:""}),o.phase==="restart_required"&&v.jsx("button",{className:"cancel-update-btn",onClick:f,title:"Hide notification - update will apply on next restart",children:""})]}),v.jsxs("div",{className:"progress-bar-container",children:[v.jsx("div",{className:"progress-bar",children:v.jsx("div",{className:"progress-bar-fill",style:{width:`${o.percent}%`}})}),v.jsxs("span",{className:"progress-text",children:[o.percent,"%"]})]}),v.jsx("p",{className:"progress-message",children:o.message})]}),R&&v.jsxs("div",{className:"update-error",children:[v.jsxs("p",{children:[" Update failed: ",R]}),v.jsx("p",{children:"You can download manually from the repository."})]}),!o?.phase&&v.jsxs("div",{className:"update-actions",children:[v.jsx("button",{className:"update-btn primary",onClick:z=>{console.log("[UpdateNotification] Download and Install button onClick fired"),Q()},disabled:E,title:"Download and install update automatically",children:E?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"loading-spinner",children:""}),"Starting..."]}):v.jsx(v.Fragment,{children:"Download and Install"})}),v.jsx("button",{className:"update-btn secondary",onClick:K,disabled:E,title:"Show this notification again next time the app starts",children:" Update Later"}),v.jsx("button",{className:"update-btn tertiary",onClick:q,disabled:E,title:"Don't show this notification for this version anymore",children:" Dismiss"})]})]})}):null},gR=({updateState:s,onDismiss:t,onRetryUpdate:i,onManualUpdate:r})=>{const[o,u]=H.useState(!0),f=()=>{u(!1),setTimeout(()=>t(),300)},p=()=>{f(),setTimeout(()=>i(),300)},m=()=>{r()};return o?s.success?v.jsx("div",{className:"post-update-notification success",children:v.jsxs("div",{className:"post-update-notification-content",children:[v.jsx("button",{className:"close-btn",onClick:f,title:"Close notification",children:""}),v.jsx("div",{className:"post-update-header",children:v.jsx("h3",{children:" Update Successful!"})}),v.jsxs("div",{className:"post-update-info",children:[v.jsx("p",{children:"New version installed successfully."}),v.jsx("div",{className:"version-info",children:v.jsxs("strong",{children:["Current version: ",s.version]})})]}),v.jsx("div",{className:"post-update-actions",children:v.jsx("button",{className:"post-update-btn primary",onClick:f,children:"Dismiss"})})]})}):v.jsx("div",{className:"post-update-notification error",children:v.jsxs("div",{className:"post-update-notification-content",children:[v.jsx("button",{className:"close-btn",onClick:f,title:"Close notification",children:""}),v.jsx("div",{className:"post-update-header",children:v.jsx("h3",{children:" Update Issue"})}),v.jsxs("div",{className:"post-update-info",children:[v.jsx("p",{children:"New version couldn't be installed automatically. You can try again or update manually."}),v.jsx("p",{className:"error-details",children:"If the problem persists, contact the system administrator."})]}),v.jsxs("div",{className:"post-update-actions",children:[v.jsx("button",{className:"post-update-btn primary",onClick:p,title:"Retry the automatic update process",children:"Try Again"}),v.jsx("button",{className:"post-update-btn secondary",onClick:m,title:"Open GitHub repository to download manually",children:"Update Manually"}),v.jsx("button",{className:"post-update-btn tertiary",onClick:f,title:"Dismiss this notification",children:"Dismiss"})]})]})}):null},Ov=({onConfigSaved:s,onClose:t,currentConfig:i={}})=>{const[r,o]=H.useState({apiKey:i.apiKey||"",authDomain:i.authDomain||"",databaseURL:i.databaseURL||"",projectId:i.projectId||"",storageBucket:i.storageBucket||"",messagingSenderId:i.messagingSenderId||"",appId:i.appId||""}),[u,f]=H.useState({}),[p,m]=H.useState(""),[g,y]=H.useState(!1);H.useEffect(()=>{if(i&&Object.keys(i).length>0){const z={apiKey:i.apiKey||"",authDomain:i.authDomain||"",databaseURL:i.databaseURL||"",projectId:i.projectId||"",storageBucket:i.storageBucket||"",messagingSenderId:i.messagingSenderId||"",appId:i.appId||""};o(z),f(z)}},[i]);const E=()=>{const z=[];return r.apiKey&&z.push(`VITE_FIREBASE_API_KEY=${r.apiKey}`),r.authDomain&&z.push(`VITE_FIREBASE_AUTH_DOMAIN=${r.authDomain}`),r.databaseURL&&z.push(`VITE_FIREBASE_DATABASE_URL=${r.databaseURL}`),r.projectId&&z.push(`VITE_FIREBASE_PROJECT_ID=${r.projectId}`),r.storageBucket&&z.push(`VITE_FIREBASE_STORAGE_BUCKET=${r.storageBucket}`),r.messagingSenderId&&z.push(`VITE_FIREBASE_MESSAGING_SENDER_ID=${r.messagingSenderId}`),r.appId&&z.push(`VITE_FIREBASE_APP_ID=${r.appId}`),z.join(`
`)},S=()=>{g||m(E()),y(!g)},R=(z,W)=>{o(se=>({...se,[z]:W}))},k=()=>{try{const z=p.split(`
`),W={...r};z.forEach(se=>{const Ne=se.trim();if(Ne.includes("=")){const[He,Qe]=Ne.split("="),ut=He.trim().replace("VITE_FIREBASE_",""),et=Qe.trim();switch(ut){case"API_KEY":W.apiKey=et;break;case"AUTH_DOMAIN":W.authDomain=et;break;case"DATABASE_URL":W.databaseURL=et;break;case"PROJECT_ID":W.projectId=et;break;case"STORAGE_BUCKET":W.storageBucket=et;break;case"MESSAGING_SENDER_ID":W.messagingSenderId=et;break;case"APP_ID":W.appId=et;break}}}),o(W),m(""),y(!1)}catch{alert("Error parsing configuration. Please check the format.")}},q=()=>{const W=["apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId"].filter(se=>!r[se].trim());if(W.length>0){alert(`Please fill in the following required fields: ${W.join(", ")}`);return}s(r)},K=()=>["apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId"].every(W=>r[W].trim()),ve=()=>!u||Object.keys(u).length===0?K():["apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId"].some(W=>(r[W]||"").trim()!==(u[W]||"").trim()),Q=()=>K()&&ve();return v.jsx("div",{className:"firebase-config-overlay",children:v.jsxs("div",{className:"firebase-config-modal",children:[v.jsxs("div",{className:"firebase-config-header",children:[v.jsx("h3",{children:"Firebase Configuration"}),t&&v.jsx("button",{className:"firebase-config-close",onClick:t,children:""})]}),v.jsxs("div",{className:"firebase-config-content",children:[v.jsxs("div",{className:"config-section",children:[v.jsx("div",{className:"bulk-config-section",children:v.jsx("button",{className:"bulk-toggle-btn",onClick:S,children:g?"Switch to Individual Fields":"Switch to Bulk Fields"})}),g?v.jsxs("div",{className:"bulk-input-section",children:[v.jsx("label",{children:"Paste your Firebase configuration (one per line):"}),v.jsx("textarea",{value:p,onChange:z=>m(z.target.value),placeholder:`VITE_FIREBASE_API_KEY=your_api_key_here
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_DATABASE_URL=https://your-project-default-rtdb.firebaseio.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abcdefghijklmnop`,rows:8,className:"bulk-config-textarea"}),v.jsx("button",{onClick:k,className:"bulk-apply-btn",children:"Apply Configuration"})]}):v.jsxs("div",{className:"individual-fields",children:[v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"API Key *"}),v.jsx("input",{type:"text",value:r.apiKey,onChange:z=>R("apiKey",z.target.value),placeholder:"AIzaSy..."})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"Auth Domain *"}),v.jsx("input",{type:"text",value:r.authDomain,onChange:z=>R("authDomain",z.target.value),placeholder:"your-project.firebaseapp.com"})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"Database URL *"}),v.jsx("input",{type:"text",value:r.databaseURL,onChange:z=>R("databaseURL",z.target.value),placeholder:"https://your-project-default-rtdb.firebaseio.com"})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"Project ID *"}),v.jsx("input",{type:"text",value:r.projectId,onChange:z=>R("projectId",z.target.value),placeholder:"your-project-id"})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"Storage Bucket *"}),v.jsx("input",{type:"text",value:r.storageBucket,onChange:z=>R("storageBucket",z.target.value),placeholder:"your-project.appspot.com"})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"Messaging Sender ID *"}),v.jsx("input",{type:"text",value:r.messagingSenderId,onChange:z=>R("messagingSenderId",z.target.value),placeholder:"123456789"})]}),v.jsxs("div",{className:"config-field",children:[v.jsx("label",{children:"App ID *"}),v.jsx("input",{type:"text",value:r.appId,onChange:z=>R("appId",z.target.value),placeholder:"1:123456789:web:abcdefghijklmnop"})]})]})]}),v.jsxs("div",{className:"firebase-config-actions",children:[v.jsx("button",{onClick:q,className:`save-btn ${Q()?"enabled":"disabled"}`,disabled:!Q(),children:"Save Configuration"}),t&&v.jsx("button",{onClick:t,className:"cancel-btn",children:"Cancel"})]})]})]})})};class ZR extends pE.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,i){console.error("ErrorBoundary caught an error:",t,i),this.setState({error:t,errorInfo:i})}render(){return this.state.hasError?v.jsxs("div",{style:{padding:"20px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--text-error)",borderRadius:"8px",margin:"20px"},children:[v.jsx("h2",{style:{color:"var(--text-error)"},children:"Something went wrong"}),v.jsx("p",{children:"An error occurred while rendering this component."}),v.jsxs("details",{style:{whiteSpace:"pre-wrap",marginTop:"10px"},children:[v.jsx("summary",{children:"Error details (click to expand)"}),v.jsxs("p",{children:[v.jsx("strong",{children:"Error:"})," ",this.state.error&&this.state.error.toString()]}),v.jsx("p",{children:v.jsx("strong",{children:"Stack trace:"})}),v.jsx("pre",{children:this.state.errorInfo.componentStack})]}),v.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()},style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"var(--primary-color)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Try Again"})]}):this.props.children}}const ZS="https://api.github.com/repos/moisalucian/office-or-home-office",_R=`${ZS}/releases/latest`,vR=2*60*60*1e3,JS=async()=>{if(window.electronAPI?.getAppVersion)try{const s=await window.electronAPI.getAppVersion();return console.log("Got version from Electron:",s),s||"1.0.0"}catch(s){return console.error("Error getting app version:",s),"1.0.0"}return localStorage.getItem("currentAppVersion")||"1.0.0"},yR=s=>{localStorage.setItem("currentAppVersion",s)},SR=()=>{const s=localStorage.getItem("lastVersionCheck");return s?new Date(s):null},e0=()=>{localStorage.setItem("lastVersionCheck",new Date().toISOString())},bR=()=>{const s=SR();return s?Date.now()-s.getTime()>=vR:!0},t0=async()=>{try{const s=await JS();console.log("Current version:",s);const t=await fetch(_R);if(!t.ok)return await ER();const i=await t.json(),r=i.tag_name.replace(/^v/,"");console.log("Latest version:",r),e0();const o=wR(r,s);if(console.log("Has update:",o),!o)return{hasUpdate:!1,currentVersion:s,latestVersion:r};const f=AR()===r,m=NR()===r;return{hasUpdate:o,currentVersion:s,latestVersion:r,releaseNotes:i.body||"No release notes available",releaseDate:new Date(i.published_at).toLocaleDateString(),downloadUrl:i.assets.find(g=>g.name.includes("win")||g.name.includes(".exe")||g.name.includes(".zip"))?.browser_download_url,wasDismissed:f,wasPostponed:m}}catch(s){return console.error("Version check failed:",s),{hasUpdate:!1,error:s.message}}},ER=async()=>{try{const s=await fetch(`${ZS}/commits/main`);if(!s.ok)throw new Error("Failed to fetch commit info");const t=await s.json(),i=t.sha.substring(0,7),r=await JS(),u=(localStorage.getItem("currentCommitSha")||"")!==i;return u&&localStorage.setItem("latestCommitSha",i),{hasUpdate:u,currentVersion:r,latestVersion:`${r}-${i}`,commitMessage:t.commit.message,commitDate:new Date(t.commit.committer.date).toLocaleDateString(),isCommitBased:!0}}catch(s){return console.error("Commit-based version check failed:",s),{hasUpdate:!1,error:s.message}}},wR=(s,t)=>{console.log(`Comparing versions: ${s} vs ${t}`);const i=u=>u.replace(/[^\d.]/g,"").split(".").slice(0,3).map(p=>parseInt(p,10)||0),r=i(s),o=i(t);console.log("Latest parts:",r),console.log("Current parts:",o);for(let u=0;u<Math.max(r.length,o.length);u++){const f=r[u]||0,p=o[u]||0;if(f>p)return console.log(`Latest is newer: ${f} > ${p}`),!0;if(f<p)return console.log(`Current is newer: ${p} > ${f}`),!1}return console.log("Versions are equal"),!1},TR=s=>{localStorage.setItem("dismissedUpdateVersion",s),localStorage.removeItem("postponedUpdateVersion")},CR=s=>{localStorage.setItem("postponedUpdateVersion",s),localStorage.removeItem("dismissedUpdateVersion")},AR=()=>localStorage.getItem("dismissedUpdateVersion"),NR=()=>localStorage.getItem("postponedUpdateVersion"),RR=s=>s.hasUpdate?s.wasPostponed?!0:!s.wasDismissed:!1,IR=async()=>await t0(),DR=async(s,t)=>{if(console.log("[Update] downloadAndInstallUpdate called with URL:",s,"version:",t),!s)throw console.error("[Update] No download URL provided"),new Error("No download URL available");if(window.electronAPI?.downloadAndInstallUpdate&&window.electronAPI?.extractAndInstallUpdate){let i;try{console.log("[Update] Starting download via electronAPI.downloadAndInstallUpdate"),i=await Promise.race([window.electronAPI.downloadAndInstallUpdate(s),new Promise((r,o)=>setTimeout(()=>o(new Error("Download timeout - please try again or download manually")),12e4))]),console.log("[Update] Download result:",i)}catch(r){throw console.error("[Update] Download failed:",r),window.setUpdateProgress&&window.setUpdateProgress({phase:"error",percent:100,message:String(r)}),r}if(i&&i.filePath&&window.electronAPI?.extractAndInstallUpdate){console.log("[Update] Download complete, filePath:",i.filePath),window.setUpdateProgress&&window.setUpdateProgress({phase:"installing",percent:0,message:"Installing update..."});try{console.log("[Update] About to call electronAPI.extractAndInstallUpdate with:",i.filePath,"version:",t);const r=await Promise.race([window.electronAPI.extractAndInstallUpdate(i.filePath,t),new Promise((o,u)=>setTimeout(()=>{console.error("[Update] Install phase did not complete within 3 minutes"),u(new Error("Install phase did not complete within 3 minutes. Please restart the app or update manually.")),window.setUpdateProgress&&window.setUpdateProgress({phase:"error",percent:100,message:"Install phase did not complete. Please restart the app or update manually."})},3*60*1e3))]);return console.log("[Update] Install result:",r),e0(),r}catch(r){throw console.error("[Update] Install failed:",r),window.setUpdateProgress&&window.setUpdateProgress({phase:"error",percent:100,message:String(r)}),r}}else{const r="[Update] Download finished but no file to install or extractAndInstallUpdate missing";throw console.error(r),window.setUpdateProgress&&window.setUpdateProgress({phase:"error",percent:100,message:r}),new Error(r)}}else throw console.error("[Update] electronAPI.downloadAndInstallUpdate or extractAndInstallUpdate not available"),window.open(s,"_blank"),new Error("Auto-update not available, opened download page")};let mf=!1,ya=null;const n0=()=>{if(ya)return ya;if(!Pf())return Promise.reject(new Error("Firebase not initialized"));const s=pR();return ya=new Promise((t,i)=>{const r=eN(s,async o=>{if(r(),o)mf=!0,console.log("User already authenticated:",o.uid),t(o);else try{console.log("Signing in anonymously...");const u=await QA(s);mf=!0,console.log("Anonymous sign-in successful:",u.user.uid),t(u.user)}catch(u){console.error("Anonymous sign-in failed:",u),mf=!1,i(u)}})}),ya},Sc=()=>ya||n0(),xR=()=>new Date().toISOString().split("T")[0],OR=(s,t,i)=>{const r=new Date(i).toLocaleDateString("en-US",{weekday:"long"});switch(t){case"yes":return`${s} confirmed working from the office ${r}.`;case"no":return`${s} confirmed working from the home office ${r}.`;case"undecided":return`${s} marked that's not sure yet if will come to work ${r}.`;default:return`${s} updated status for ${r}.`}},Mv=async(s,t,i)=>{console.log(`[ActivityLogger] Called logStatusChange: ${s}, ${t}, ${i}`);try{await Sc();const r=xR(),o=sn(Je,`activityLogs/${r}`),f=(await Ea(o)).val()||{entries:[]};if(f.entries.length>0){const m=f.entries[f.entries.length-1];if(m.user===s&&m.status===t&&m.targetDate===i){console.log(`[ActivityLogger] Duplicate prevented: ${s} -> ${t} (same as last entry)`);return}}const p={time:new Date().toTimeString().slice(0,5),user:s,status:t,targetDate:i,timestamp:new Date().toISOString()};console.log("[ActivityLogger] Adding new entry:",p),f.entries.push(p),f.lastUpdated=new Date().toISOString(),await il(o,f),await kR()}catch(r){console.error("Error logging activity:",r)}},MR=(s=7)=>{const t=[],i=new Date;let r=new Date(i);for(;t.length<s;)r.getDay()>=1&&r.getDay()<=5&&t.push(r.toISOString().split("T")[0]),r.setDate(r.getDate()-1);return t.reverse()},kR=async()=>{try{const s=MR(7),t=sn(Je,"activityLogs"),i=await Ea(t);if(i.val()){const r=i.val();for(const o in r)if(!s.includes(o)){const u=sn(Je,`activityLogs/${o}`);await kf(u),console.log(`Cleaned up old activity log: ${o}`)}}}catch(s){console.error("Error cleaning up old logs:",s)}},Go=async()=>{try{await Sc();const s=sn(Je,"activityLogs"),t=await Ea(s);if(!t.val())return[];const i=t.val(),r=[];return Object.keys(i).sort().reverse().forEach(u=>{const f=i[u],p=new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});r.push({date:u,dayName:p,entries:f.entries.map(m=>({...m,message:OR(m.user,m.status,m.targetDate),colorClass:UR(m.status)})).reverse()})}),r}catch(s){return console.error("Error fetching activity logs:",s),[]}},UR=s=>{switch(s){case"yes":return"status-yes";case"no":return"status-no";case"undecided":return"status-undecided";default:return"status-default"}};function gf(){return v.jsxs("div",{className:"window-controls",children:[v.jsx("button",{onClick:()=>window.electronAPI.minimize(),children:""}),v.jsx("button",{onClick:()=>window.electronAPI.maximize(),children:""}),v.jsx("button",{onClick:()=>window.electronAPI.close(),className:"close",children:""})]})}function LR({user:s,status:t}){let i="status-false";return t==="yes"||t===!0?i="status-true":t==="undecided"&&(i="status-undecided"),v.jsx("div",{className:`status-card ${i}`,children:v.jsx("strong",{children:s})})}function jR({statuses:s,tomorrowDate:t,nextWorkingDayName:i}){const r=Object.entries(s).filter(([o,u])=>u.date===t);return v.jsxs("div",{className:"status-section",children:[v.jsx("h2",{className:"status-title-draggable",children:v.jsxs("span",{className:"status-title-text",children:["Status for ",i," (",t,")"]})}),v.jsx("div",{className:"status-grid",children:r.map(([o,u])=>v.jsx(LR,{user:o,status:u.status},o))})]})}const kv=({activityLogs:s=[],statuses:t={},isWindowMode:i=!1,onResetLayout:r})=>{const[o,u]=H.useState(()=>{const R=localStorage.getItem("activityLogSplitPosition");return R?parseFloat(R):50});H.useEffect(()=>{const R=()=>{u(50)};return window.addEventListener("resetActivityLogLayout",R),()=>window.removeEventListener("resetActivityLogLayout",R)},[]);const f=R=>{switch(R){case"yes":return"";case"no":return"";case"undecided":return"";default:return""}},p=R=>{switch(R){case"yes":return"Office";case"no":return"Home";case"undecided":return"Undecided";default:return"No status"}},m=()=>{const R=[],k=new Date,q=k.getDay()===0||k.getDay()===6;console.log(`[ActivityLog] Generating daily data. Today is: ${k.toISOString().split("T")[0]} (${k.toDateString()})`);let K=new Date(k);const ve=[];for(K.setDate(K.getDate()-1);ve.length<5;)K.getDay()>=1&&K.getDay()<=5&&ve.unshift({dateKey:K.toISOString().split("T")[0],dayName:K.toLocaleDateString("en-US",{weekday:"short"}),fullDate:K.toLocaleDateString("en-US",{month:"short",day:"numeric"}),isTomorrow:!1,isToday:!1,isHistorical:!0}),K.setDate(K.getDate()-1);R.push(...ve),q||R.push({dateKey:k.toISOString().split("T")[0],dayName:k.toLocaleDateString("en-US",{weekday:"short"}),fullDate:k.toLocaleDateString("en-US",{month:"short",day:"numeric"}),isTomorrow:!1,isToday:!0});const Q=new Date(k);for(Q.setDate(Q.getDate()+1);Q.getDay()===0||Q.getDay()===6;)Q.setDate(Q.getDate()+1);return R.push({dateKey:Q.toISOString().split("T")[0],dayName:Q.toLocaleDateString("en-US",{weekday:"short"}),fullDate:Q.toLocaleDateString("en-US",{month:"short",day:"numeric"}),isTomorrow:!0,isToday:!1}),console.log("[ActivityLog] Generated working days:",R.map(z=>`${z.dayName} ${z.dateKey} (today:${z.isToday}, tomorrow:${z.isTomorrow})`)),R},g=()=>{const R=m(),k=new Set;Object.keys(t).forEach(Q=>k.add(Q)),s.forEach(Q=>{Q.entries.forEach(z=>k.add(z.user))});const q={};Array.from(k).forEach(Q=>{q[Q]={}}),s.forEach(Q=>{const z={};Q.entries.forEach(W=>{z[W.user]||(z[W.user]=[]),z[W.user].push(W)}),Object.keys(z).forEach(W=>{const se=z[W][z[W].length-1];q[W][Q.date]={status:se.status,time:se.time,targetDate:se.targetDate}})}),Object.entries(t).forEach(([Q,z])=>{console.log(`[ActivityLog] Processing live status: ${Q} -> ${z.status} for date ${z.date}`),q[Q][z.date]={status:z.status,time:new Date().toTimeString().slice(0,5),targetDate:z.date,isLive:!0}});const K=R.map(Q=>Q.dateKey),ve=Array.from(k).filter(Q=>K.some(z=>{const W=q[Q][z];return W&&W.status}));return{days:R,statusMatrix:q,users:ve.sort()}},{days:y,statusMatrix:E,users:S}=g();return v.jsxs("div",{className:`activity-log ${i?"window-mode":"maximized-mode"}`,children:[v.jsx("div",{className:"activity-log-header",children:v.jsx("h3",{children:v.jsx("span",{className:"selectable",children:"Activity Log"})})}),v.jsxs("div",{className:"activity-log-split-container",children:[v.jsxs("div",{className:"activity-overview-section",style:{height:`${o}%`},children:[v.jsx("h4",{children:v.jsx("span",{className:"selectable",children:"Last Status - Daily Overview"})}),v.jsx("div",{className:"activity-overview-content",children:S.length===0?v.jsx("div",{className:"no-data-message",children:"No users have set status yet."}):v.jsxs("div",{className:"overview-table-container",children:[v.jsxs("div",{className:"overview-table-header",children:[v.jsx("div",{className:"overview-header-cell user-header selectable",children:"User"}),y.map(R=>v.jsxs("div",{className:`overview-header-cell day-header selectable ${R.isToday?"today":""}`,children:[v.jsx("div",{className:"day-name",children:R.dayName}),v.jsx("div",{className:"day-date",children:R.fullDate})]},R.dateKey))]}),v.jsx("div",{className:"overview-table-body",children:S.map(R=>v.jsxs("div",{className:"overview-table-row",children:[v.jsx("div",{className:"overview-cell user-cell selectable",children:R}),y.map(k=>{const q=E[R][k.dateKey];return v.jsx("div",{className:`overview-cell status-cell selectable ${q?`status-${q.status}`:"status-empty"}`,title:q?`${q.time} - ${p(q.status)}`:"No status set",children:q?f(q.status):""},k.dateKey)})]},R))})]})})]}),v.jsx("div",{className:"activity-horizontal-divider",onMouseDown:R=>{R.preventDefault();const k=R.clientY,q=o;document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none";const K=Q=>{Q.preventDefault();const z=Q.target.closest(".activity-log-split-container");if(!z)return;const W=z.getBoundingClientRect(),Ne=(Q.clientY-k)/W.height*100,He=Math.max(20,Math.min(80,q+Ne));u(He),localStorage.setItem("activityLogSplitPosition",He.toString())},ve=()=>{document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",ve)};document.addEventListener("mousemove",K),document.addEventListener("mouseup",ve)}}),v.jsxs("div",{className:"activity-history-section",style:{height:`${100-o}%`},children:[v.jsx("h4",{children:v.jsx("span",{className:"selectable",children:"Past 7 Days Activity History"})}),v.jsx("div",{className:"activity-history-content",children:s.length===0?v.jsx("div",{className:"no-data-message",children:"No activity recorded yet. Status changes will appear here."}):v.jsx("div",{className:"activity-history-scrollable scroll-no-drag",children:s.map((R,k)=>v.jsxs("div",{className:"activity-day",children:[v.jsx("h5",{className:"activity-day-header selectable",children:R.dayName}),R.entries.map((q,K)=>v.jsxs("div",{className:"activity-entry",children:[v.jsx("span",{className:"activity-time selectable",children:q.time}),v.jsx("span",{className:`activity-message selectable ${q.colorClass}`,children:q.message})]},K))]},R.date))})})]})]})]})},zR={LONG:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ji={DARK:"dark",LIGHT:"light",SYSTEM:"system"},PR=3e4,HR=(s,t)=>{const i=JSON.parse(localStorage.getItem("notificationSettings"))||{};i[s]=t,localStorage.setItem("notificationSettings",JSON.stringify(i))},Uv=s=>(JSON.parse(localStorage.getItem("notificationSettings"))||{})[s]||[],BR=(s,t)=>{const i=JSON.parse(localStorage.getItem("notificationSettings"))||{};i[s]&&(i[t]=i[s],delete i[s],localStorage.setItem("notificationSettings",JSON.stringify(i)))},zi=(s,t)=>{localStorage.setItem(s,typeof t=="boolean"?t.toString():t)},ws=(s,t=null)=>{const i=localStorage.getItem(s);return i===null?t:i==="true"?!0:i==="false"?!1:i},VR=()=>{const[s,t]=H.useState(ji.SYSTEM),[i,r]=H.useState(ji.SYSTEM);return H.useEffect(()=>{const u=ws("theme",ji.SYSTEM);if(r(u),window.electronAPI){const f=async()=>{if(u===ji.SYSTEM)try{const m=await window.electronAPI.getSystemTheme();t(m),document.documentElement.setAttribute("data-theme",m)}catch{console.log("Could not get system theme, defaulting to dark"),t(ji.DARK),document.documentElement.setAttribute("data-theme",ji.DARK)}else t(u),document.documentElement.setAttribute("data-theme",u);window.electronAPI.setTheme(u)},p=m=>{t(m),document.documentElement.setAttribute("data-theme",m)};window.electronAPI.onThemeChanged(p),f()}},[]),{theme:s,themeSetting:i,handleThemeChange:u=>{const f=u.target?u.target.value:u;r(f),zi("theme",f),window.electronAPI&&window.electronAPI.setTheme(f)}}},qR=(s,t)=>{const[i,r]=H.useState("./icon-black.ico");return H.useEffect(()=>{r((()=>{let u=s;return t===ji.SYSTEM?u=s:u=t,u===ji.LIGHT?"./icon-black.ico":"./icon-white.ico"})())},[s,t]),i},GR=()=>{const[s,t]=H.useState(!1),[i,r]=H.useState(!0),[o,u]=H.useState(!1),[f,p]=H.useState("maximized");return H.useEffect(()=>{if((async()=>{if(window.electronAPI?.getSetting){const S=await window.electronAPI.getSetting("startup",!0),R=await window.electronAPI.getSetting("launchInTray",!1),k=await window.electronAPI.getSetting("defaultLaunchOption","maximized");r(S),u(R),p(k),zi("launchAtStartup",S),zi("launchInTray",R),zi("defaultLaunchOption",k)}else r(ws("launchAtStartup",!0)),u(ws("launchInTray",!1)),p(ws("defaultLaunchOption","maximized"))})(),window.electronAPI?.onWindowStateChanged&&window.electronAPI.onWindowStateChanged(S=>{t(S.maximized)}),window.electronAPI?.onGetSettingsForTrayLaunch){const S=()=>{const R={defaultLaunchOption:ws("defaultLaunchOption","window")};window.electronAPI.sendTrayLaunchSettings(R)};window.electronAPI.onGetSettingsForTrayLaunch(S)}},[]),{isMaximized:s,launchAtStartup:i,launchInTray:o,defaultLaunchOption:f,handleStartupToggle:E=>{const S=E.target?E.target.checked:E;r(S),zi("launchAtStartup",S),window.electronAPI?.setStartup&&window.electronAPI.setStartup(S)},handleLaunchInTrayToggle:E=>{const S=E.target?E.target.checked:E;u(S),zi("launchInTray",S),window.electronAPI&&window.electronAPI.setLaunchInTray(S)},handleDefaultLaunchOptionChange:E=>{const S=E.target?E.target.value:E;p(S),zi("defaultLaunchOption",S),window.electronAPI&&window.electronAPI.setDefaultLaunchOption(S)}}},FR=()=>{const[s,t]=H.useState("none");return H.useEffect(()=>{const o=ws("notificationSound","none");t(o),window.electronAPI?.onSoundError&&window.electronAPI.onSoundError(u=>{alert(`Sound Error: ${u}

Please add the sound files to the electron/sounds/ folder.`)})},[]),{notificationSound:s,handleNotificationSoundChange:o=>{const u=o.target?o.target.value:o;console.log("[React] Notification sound changed to:",u),t(u),zi("notificationSound",u),console.log("[React] Saved to localStorage"),window.electronAPI?(console.log("[React] Calling electronAPI.setNotificationSound with:",u),window.electronAPI.setNotificationSound(u),console.log("[React] electronAPI.setNotificationSound called")):console.error("[React] electronAPI not available!")},previewNotificationSound:()=>{s!=="none"&&window.electronAPI&&window.electronAPI.previewNotificationSound(s)}}},Lv=()=>new Date().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}),i0=()=>{const t=new Date().getDay();let i=1;return t===5?i=3:t===6?i=2:t===0&&(i=1),new Date(Date.now()+i*864e5)},s0=s=>zR.LONG[s.getDay()],YR=()=>i0().toISOString().split("T")[0],KR=()=>{const s=i0();return s0(s)},QR=()=>{const s=new Date,t=new Date(s);for(t.setDate(t.getDate()+1);t.getDay()===0||t.getDay()===6;)t.setDate(t.getDate()+1);return t.toISOString().split("T")[0]},XR=()=>{const s=new Date,t=new Date(s);for(t.setDate(t.getDate()+1);t.getDay()===0||t.getDay()===6;)t.setDate(t.getDate()+1);return s0(t)},WR=(s,t)=>{const r=Object.entries(s).filter(([R,k])=>k.date===t).length,o=520,u=40,p=Math.ceil(r/4),y=Math.min(p,3)*u+80,E=3*120+150,S=o+y+E;return Math.min(Math.max(S,750),900)};function $R(){const[s,t]=H.useState(""),[i,r]=H.useState(null),[o,u]=H.useState({}),[f,p]=H.useState(!1),[m,g]=H.useState(""),[y,E]=H.useState(""),S=H.useRef(null),[R,k]=H.useState([]),[q,K]=H.useState(!1),[ve,Q]=H.useState(""),[z,W]=H.useState(null),[se,Ne]=H.useState(!1),[He,Qe]=H.useState(null),[ut,et]=H.useState(!1),[Ee,Xe]=H.useState(!1),[gn,_n]=H.useState(!1),qe=H.useCallback((x,P,oe=5e3)=>{S.current&&(clearTimeout(S.current),S.current=null),g(x),E(P),S.current=setTimeout(()=>{g(""),E(""),S.current=null},oe)},[]);H.useEffect(()=>{window.electronAPI?.onUpdateDownloadProgress&&window.electronAPI.onUpdateDownloadProgress(x=>{zt(P=>({...P,phase:"downloading",percent:x.percent,message:`Downloaded ${x.downloaded}MB of ${x.total}MB`}))}),window.electronAPI?.onUpdateInstallProgress&&window.electronAPI.onUpdateInstallProgress(x=>{zt(P=>({...P,phase:x.phase||"installing",percent:x.percent,message:x.message}))})},[]);const[O,G]=H.useState(()=>{const x=localStorage.getItem("sidebarWidth");return x?parseInt(x):600}),[J,we]=H.useState([]),[w,j]=H.useState(null),[F,V]=H.useState(0),[Z,ye]=H.useState(!1),[te,tt]=H.useState({isChecking:!1,lastChecked:null,result:null}),[ke,an]=H.useState("1.0.0"),[Ha,zt]=H.useState({phase:null,percent:0,message:""}),[xs,Kt]=H.useState(!1),[rn,Ba]=H.useState(!1),[Al,vt]=H.useState(null),[jc,es]=H.useState(!0),[Va,ts]=H.useState({}),{theme:zc,themeSetting:qa,handleThemeChange:Pc}=VR(),Nl=qR(zc,qa),{notificationSound:ai,handleNotificationSoundChange:Nt,previewNotificationSound:vn}=FR(),{isMaximized:de,launchAtStartup:Hc,launchInTray:Rl,defaultLaunchOption:Bc,handleStartupToggle:Os,handleLaunchInTrayToggle:Dn,handleDefaultLaunchOptionChange:xn}=GR();H.useEffect(()=>{_n(!1)},[de]),H.useEffect(()=>{if(!window.electronAPI?.onWindowResize)return;const x=()=>{de||_n(!0)};return window.electronAPI.onWindowResize(x),()=>{window.electronAPI?.removeWindowResizeListener&&window.electronAPI.removeWindowResizeListener(x)}},[de]);const[Ga,ns]=H.useState(0),yn=QR(),ri=XR(),Ms=YR(),Fa=KR(),Sn=H.useCallback(()=>{G(600),localStorage.setItem("sidebarWidth","600"),localStorage.setItem("activityLogSplitPosition","50"),window.dispatchEvent(new CustomEvent("resetActivityLogLayout"))},[]),li=H.useCallback(async()=>{const x=Date.now();if(w&&x-F<PR){we(w);return}const P=await Go();we(P),j(P),V(x)},[w,F]);H.useEffect(()=>{(async()=>{try{if(window.electronAPI?.getAppVersion){const P=await window.electronAPI.getAppVersion();an(P||"1.0.0")}}catch(P){console.error("Error getting app version:",P),an("1.0.0")}})()},[]),H.useEffect(()=>{(()=>{localStorage.getItem("restoreLaunchInTray")==="true"&&(console.log('[App] Restoring "Launch in tray" setting after update'),localStorage.removeItem("restoreLaunchInTray"),setTimeout(()=>{Dn({target:{checked:!0}})},1e3))})()},[Dn]),H.useEffect(()=>{if(Xe(!1),de)document.body.classList.add("maximized"),document.body.style.borderRadius="0px",document.body.style.backgroundColor="transparent",document.documentElement.style.borderRadius="0px",document.documentElement.style.backgroundColor="transparent";else{document.body.classList.remove("maximized");const x=()=>{document.body.style.borderRadius="16px",document.body.style.backgroundColor="transparent",document.documentElement.style.borderRadius="16px",document.documentElement.style.backgroundColor="transparent";const P=document.querySelector(".container");P&&(P.style.borderRadius="16px",P.style.backgroundColor="var(--container-bg)"),window.electronAPI?.refreshWindowBackground&&window.electronAPI.refreshWindowBackground()};x(),setTimeout(x,50),setTimeout(x,150),setTimeout(x,300)}},[de]),H.useEffect(()=>{(async()=>{try{if(es(!0),Pf()){Ba(!0),es(!1),console.log("Firebase already initialized");return}await xv(),Ba(!0),es(!1),console.log("Firebase initialized from stored config")}catch(P){console.error("Firebase initialization failed:",P),P.message==="FIREBASE_CONFIG_MISSING"?(vt("Firebase configuration required"),Kt(!0)):vt(P.message),Ba(!1),es(!1)}})()},[]),H.useEffect(()=>{Ee&&(async()=>{try{const P=await Go();we(P),j(P),V(Date.now())}catch(P){console.error("Error loading activity logs:",P)}})()},[Ee]),H.useEffect(()=>{(async()=>{try{await li()}catch(P){console.error("Error preloading activity logs:",P)}})()},[li]),H.useEffect(()=>{if(Ee){const x=setTimeout(()=>{li()},100);return()=>clearTimeout(x)}},[de,Ee,li]);const Il=window.location.hash==="#sidebar",Ya=H.useRef(s),ks=H.useRef(yn),Us=H.useRef(ri);H.useEffect(()=>{Ya.current=s,ks.current=yn,Us.current=ri},[s,yn,ri]);const Ka=H.useCallback(()=>WR(o,Ms),[o,Ms]);H.useEffect(()=>{if(window.electronAPI?.resizeWindow&&!de&&!gn){const x=Ka();console.log("Auto-resizing window to:",940,x),window.electronAPI.resizeWindow(940,x)}},[o,de,Ka,gn]),H.useEffect(()=>{const x=ws("username");if(x){t(x),r(x),p(!0);const P=Uv(x);k(P)}},[]),H.useEffect(()=>{(async()=>{try{await n0(),console.log("Authentication initialized successfully")}catch(P){console.error("Authentication failed:",P)}})()},[]),H.useEffect(()=>{if(!rn||!Je)return;const x=sn(Je,"statuses"),P=hv(x,oe=>{const $=oe.val()||{};u($)});return()=>P()},[rn]),H.useEffect(()=>{const x=()=>{const P=new Date,oe=new Date(P);oe.setDate(oe.getDate()+1),oe.setHours(0,0,5,0);const $=oe.getTime()-P.getTime();console.log(`Setting up midnight refresh in ${Math.round($/1e3/60)} minutes`);const ae=setTimeout(async()=>{if(console.log("Midnight refresh triggered - refreshing status data and cleaning up old data"),Je){try{const Be=sn(Je,"statuses"),nt=await Ea(Be);if(nt.exists()){const at=nt.val(),wt=new Date;wt.setDate(wt.getDate()-7);const Za=wt.toISOString().split("T")[0];console.log(`Cleaning up status data older than ${Za}`);let Mn=0;for(const[Ls,hi]of Object.entries(at))if(hi&&hi.date&&hi.date<Za){const Gc=sn(Je,`statuses/${Ls}`);await kf(Gc),Mn++,console.log(`Removed old status for ${Ls} from ${hi.date}`)}console.log(`Firebase cleanup complete: removed ${Mn} old status entries`)}}catch(Be){console.error("Error during Firebase cleanup:",Be)}const Se=sn(Je,"statuses");hv(Se,Be=>{const nt=Be.val()||{};u(nt)},{onlyOnce:!0})}ns(Se=>Se+1),x()},$);return()=>clearTimeout(ae)};if(rn)return x()},[rn,Je]),H.useEffect(()=>{if(s){const x=Uv(s);k(x)}},[s]),H.useEffect(()=>{if(s)if(HR(s,R),R.length>0){const x=R.map(P=>{const oe=P.days.join(", ");return` ${P.time} on days: ${oe}`}).join(`
`);Q(`${s}, you have notifications set for:
${x}`)}else Q("")},[R,s]),H.useEffect(()=>{let x,P;const oe=()=>{const ae=new Date,Se=["D","L","Ma","Mi","J","V","S"][ae.getDay()],Be=ae.toTimeString().slice(0,5);R.forEach(nt=>{nt.time===Be&&nt.days.includes(Se)&&window?.electronAPI?.sendNotificationPopup&&window.electronAPI.sendNotificationPopup()})};return(()=>{const ae=new Date,Se=(60-ae.getSeconds())*1e3-ae.getMilliseconds();x=setTimeout(()=>{oe(),P=setInterval(oe,6e4)},Se)})(),()=>{x&&clearTimeout(x),P&&clearInterval(P)}},[R]),H.useEffect(()=>{if(!window.electronAPI?.onPopupStatus)return;const x=async P=>{const oe=Ya.current,$=ks.current,ae=Us.current;if(!oe||!oe.trim())return;if(!rn||!Je){console.error("Firebase not configured, cannot save status");return}let Se=P;typeof P=="boolean"&&(Se=P?"yes":"no"),console.log(`[Popup] Setting status for ${oe}: ${Se} on ${$}`),console.log("[Popup] Status target date:",$,"Day name:",ae);const Be=sn(Je,`statuses/${oe}`);try{await il(Be,{date:$,status:Se,updatedAt:Lv()});const nt=ae.toLowerCase()==="monday"?"Monday":"Tomorrow";let at="",wt="";switch(Se){case"yes":at=`${oe}, you confirmed that you're working from the office ${nt}.`,wt="green";break;case"no":at=`${oe}, you confirmed that you're working from the home office ${nt}.`,wt="red";break;case"undecided":at=`${oe}, you marked that you're not sure yet where you'll work ${nt}.`,wt="orange";break;default:at="Status saved.",wt="gray"}qe(at,wt),await Mv(oe,Se,$),j(null),Ee&&await li(),window.electronAPI?.refreshSidebarActivityLogs&&window.electronAPI.refreshSidebarActivityLogs()}catch(nt){console.error("Error saving from popup:",nt),qe("An error occurred while saving status from notification.","red")}};return console.log("Registering popup handler"),window.electronAPI.onPopupStatus(x),()=>{window.electronAPI?.removeAllPopupStatusListeners&&window.electronAPI.removeAllPopupStatusListeners()}},[rn,Je]),H.useEffect(()=>{de&&Ee&&window.electronAPI?.toggleSidebarWindow&&window.electronAPI.toggleSidebarWindow(!1)},[de,Ee]),H.useEffect(()=>{if(!window.electronAPI?.onSidebarWindowClosed)return;const x=()=>{Xe(!1)};window.electronAPI.onSidebarWindowClosed(x)},[]),H.useEffect(()=>{const x=async()=>{if(bR()){const $=await t0();$.hasUpdate&&RR($)&&(W($),Ne(!0))}};(async()=>{if(window.electronAPI?.checkUpdateState)try{const $=await window.electronAPI.checkUpdateState();if($){if(console.log("Post-update state detected:",$),zt({phase:null,percent:0,message:""}),Ne(!1),window.electronAPI?.getAppVersion)try{const ae=await window.electronAPI.getAppVersion();yR(ae)}catch(ae){console.error("Error refreshing version after update:",ae)}Qe({success:!0,version:$.version,timestamp:$.timestamp}),et(!0)}}catch($){console.error("Error checking post-update state:",$)}})(),x();const oe=setInterval(x,2*60*60*1e3);return()=>clearInterval(oe)},[]);const Qa=async x=>{if(!s){alert("Please enter your name before confirming status.");return}try{await Sc();const P=sn(Je,`statuses/${s}`),$=(await Ea(P)).val();console.log(`[App] Setting status for ${s}: ${x} on ${yn}`),console.log("[App] Previous status:",$),console.log("[App] Status target date:",yn,"Day name:",ri),await il(P,{date:yn,status:x,updatedAt:Lv()});const ae=ri.toLowerCase()==="monday"?"Monday":"Tomorrow";let Se="",Be="";switch(x){case"yes":Se=`${s}, you confirmed that you're working from the office ${ae}.`,Be="green";break;case"no":Se=`${s}, you confirmed that you're working from the home office ${ae}.`,Be="red";break;case"undecided":Se=`${s}, you marked that you're not sure yet where you'll work ${ae}.`,Be="orange";break;default:Se="Status saved.",Be="gray"}qe(Se,Be),console.log(`Logging status change: ${s} -> ${x} for ${yn}`),await Mv(s,x,yn),j(null),Ee&&await li(),window.electronAPI?.refreshSidebarActivityLogs&&window.electronAPI.refreshSidebarActivityLogs()}catch(P){console.error("Error saving:",P),qe("An error occurred while saving status.","red")}},bn=async()=>{if(!s){alert("Please enter a name.");return}if(i&&i!==s)try{await Sc();const x=sn(Je,`statuses/${i}`),P=await Ea(x);if(P.exists()){const oe=P.val(),$=sn(Je,`statuses/${s}`);await il($,oe),await kf(x),qe(`${s} took over status from ${i}.`,"blue")}BR(i,s)}catch(x){console.error("Error transferring status:",x),qe("An error occurred while transferring the old status.","red")}localStorage.setItem("username",s),p(!0),r(s)},dt=()=>{localStorage.removeItem("username"),p(!1),r(s),t("")};H.useEffect(()=>{window.electronAPI?.onSoundError&&window.electronAPI.onSoundError(x=>{alert(`Sound Error: ${x}

Please add the sound files to the electron/sounds/ folder.`)})},[]);const Et=()=>{k([...R,{time:"",days:[]}])},oi=x=>{const P=[...R];P.splice(x,1),k(P)},Xa=x=>{TR(x),Ne(!1),W(null),zt({phase:null,percent:0,message:""}),tt(P=>({...P,result:null}))},Vc=x=>{CR(x),Ne(!1),W(null),zt({phase:null,percent:0,message:""}),tt(P=>({...P,result:null}))},qc=()=>{window.electronAPI?.cancelUpdate&&window.electronAPI.cancelUpdate(),zt({phase:null,percent:0,message:""}),tt(x=>({...x,result:null}))},Dl=async x=>{console.log("[App] handleUpdateNow called with:",x),Rl&&(console.log('[App] Storing "Launch in tray" setting and temporarily disabling to prevent update conflicts'),localStorage.setItem("restoreLaunchInTray","true"),Dn({target:{checked:!1}}));try{if(x.downloadUrl)console.log("[App] Download URL found:",x.downloadUrl),zt({phase:"downloading",percent:0,message:"Starting download..."}),await DR(x.downloadUrl,x.latestVersion);else throw console.log("[App] No download URL, opening repository page."),window.open("https://github.com/moisalucian/office-or-home-office/releases/latest","_blank"),new Error("Auto-update not available, opened download page")}catch(P){throw console.error("[App] Update failed:",P),zt({phase:null,percent:0,message:""}),P}},ci=async()=>{tt(x=>({...x,isChecking:!0}));try{const x=await IR();tt({isChecking:!1,lastChecked:new Date,result:x}),x.hasUpdate&&(W(x),Ne(!0))}catch(x){console.error("Manual update check failed:",x),tt({isChecking:!1,lastChecked:new Date,result:{hasUpdate:!1,error:x.message}})}},Wa=()=>{et(!1),Qe(null)},ui=()=>{et(!1),Qe(null),ci()},di=()=>{window.open("https://github.com/moisalucian/office-or-home-office/releases/latest","_blank")},fi=async x=>{console.log("=== handleFirebaseConfigSave START ==="),console.log("Config received:",x);try{if(console.log("Closing Firebase config dialog..."),Kt(!1),console.log("Calling saveFirebaseConfig..."),window.electronAPI&&window.electronAPI.saveFirebaseConfig){const P=await window.electronAPI.saveFirebaseConfig(x);console.log("saveFirebaseConfig result:",P),P.success?(console.log("Firebase config saved successfully"),vt("Configuration saved! Please restart the app to apply changes."),setTimeout(()=>{window.confirm("Firebase configuration saved successfully! Would you like to restart the app now to apply the changes?")&&(window.electronAPI?.restartApp?window.electronAPI.restartApp():window.location.reload())},500)):(console.error("Failed to save Firebase configuration:",P.error),vt(`Failed to save Firebase configuration: ${P.error||"Unknown error"}`),Kt(!0))}else console.error("electronAPI.saveFirebaseConfig not available"),vt("Cannot save configuration - Electron API not available"),Kt(!0)}catch(P){console.error("=== Error in handleFirebaseConfigSave ==="),console.error("Error details:",P),console.error("Error message:",P.message),console.error("Error stack:",P.stack),vt(`Failed to save Firebase configuration: ${P.message}`),Kt(!0)}console.log("=== handleFirebaseConfigSave END ===")},On=async()=>{console.log("=== openFirebaseConfig START ===");try{if(window.electronAPI?.getFirebaseConfig){const x=await window.electronAPI.getFirebaseConfig();console.log("Current config loaded:",x),ts(x||{})}}catch(x){console.error("Error loading current config:",x),ts({})}console.log("Before setting showFirebaseConfig..."),Kt(!0),console.log("After setting showFirebaseConfig..."),console.log("=== openFirebaseConfig END ===")};H.useEffect(()=>{if(window.electronAPI){const x=()=>{const P={defaultLaunchOption:localStorage.getItem("defaultLaunchOption")||"window"};window.electronAPI.sendTrayLaunchSettings(P)};window.electronAPI.onGetSettingsForTrayLaunch(x)}},[]);const[We,$a]=H.useState(!1),xl=H.useCallback(async()=>{if(!We){$a(!0);try{if(de)Xe(!Ee);else{const x=!Ee;Xe(x),window.electronAPI?.toggleSidebarWindow&&await window.electronAPI.toggleSidebarWindow(x)}}catch(x){console.error("Error toggling sidebar:",x)}finally{setTimeout(()=>$a(!1),100)}}},[We,de,Ee]);if(H.useEffect(()=>{const x=()=>{document.body.style.userSelect="",document.body.style.cursor=""};return Ee||x(),x},[Ee]),Il){const[x,P]=H.useState(!0);return H.useEffect(()=>{const oe=async()=>{const ae=localStorage.getItem("theme")||"dark";if(ae==="system")try{const Se=await window.electronAPI.getSystemTheme();document.documentElement.setAttribute("data-theme",Se)}catch{console.log("Could not get system theme for sidebar, defaulting to dark"),document.documentElement.setAttribute("data-theme","dark")}else document.documentElement.setAttribute("data-theme",ae)},$=ae=>{document.documentElement.setAttribute("data-theme",ae)};window.electronAPI?.onThemeChanged&&window.electronAPI.onThemeChanged($),oe()},[]),H.useEffect(()=>{(async()=>{try{if(P(!1),!Pf()){const Se=await hR();Se&&Object.keys(Se).length>0&&await xv(Se)}const ae=await Go();we(ae),j(ae),V(Date.now())}catch(ae){console.error("Error loading activity logs in sidebar window:",ae)}})();const $=async()=>{try{const ae=await Go();we(ae),j(ae),V(Date.now())}catch(ae){console.error("Error refreshing activity logs:",ae)}};window.electronAPI?.onRefreshActivityLogs&&window.electronAPI.onRefreshActivityLogs($)},[]),H.useEffect(()=>{(async()=>{const $=localStorage.getItem("theme")||"dark";if($==="system")try{const ae=await window.electronAPI.getSystemTheme();document.documentElement.setAttribute("data-theme",ae)}catch{document.documentElement.setAttribute("data-theme","dark")}else document.documentElement.setAttribute("data-theme",$)})(),window.electronAPI?.onThemeChanged&&window.electronAPI.onThemeChanged($=>{document.documentElement.setAttribute("data-theme",$)})},[]),v.jsx("div",{className:"sidebar-window",children:v.jsxs("div",{className:"sidebar-content",children:[v.jsx("button",{className:"reset-layout-btn-window",onClick:Sn,title:"Reset layout to default (resets both horizontal and vertical dividers)",children:""}),v.jsx(kv,{activityLogs:J,statuses:o,isWindowMode:!0,onResetLayout:Sn})]})})}return jc?v.jsxs("div",{className:`container ${de?"maximized":""}`,children:[v.jsx(gf,{}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"20px",textAlign:"center"},children:[v.jsx("h2",{children:"Loading..."}),v.jsx("p",{children:"Initializing Firebase connection..."})]})]}):rn?v.jsx(v.Fragment,{children:v.jsxs("div",{className:`container ${de?"maximized":""}`,children:[v.jsx(gf,{}),v.jsx("button",{className:`sidebar-toggle ${de?"maximized":"normal"} ${Ee&&de?"open":""}`,onClick:xl,title:"Toggle Activity Log",children:Ee?"":""}),v.jsx("button",{className:"settings-icon",onClick:()=>ye(!Z),title:"Settings",children:""}),de&&v.jsx("div",{className:"sidebar-maximized",style:{width:Ee?`${O}px`:"0px"},children:Ee&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"sidebar-content",children:[v.jsx("button",{className:"reset-layout-btn-sidebar",onClick:Sn,title:"Reset layout to default (resets both horizontal and vertical dividers)",children:""}),v.jsx(kv,{activityLogs:J,statuses:o,isWindowMode:!1,onResetLayout:Sn})]}),v.jsx("div",{className:"sidebar-resize-handle",onMouseDown:x=>{x.preventDefault(),document.body.style.userSelect="none";const P=x.clientX,oe=O,$=Se=>{const Be=oe+(Se.clientX-P),nt=460,at=Math.max(700,window.innerWidth*.35),wt=Math.max(nt,Math.min(at,Be));G(wt),localStorage.setItem("sidebarWidth",wt)},ae=()=>{document.body.style.userSelect="",document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",ae)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",ae)}})]})}),se&&z&&v.jsx(mR,{updateInfo:z,onDismiss:Xa,onPostpone:Vc,onUpdateNow:Dl,updateProgress:Ha,onCancelUpdate:qc,onRestartNow:async()=>{if(window.electronAPI?.restartApp&&window.electronAPI?.markUpdateCompleted)try{const x=await window.electronAPI.getAppVersion();await window.electronAPI.markUpdateCompleted(x),window.electronAPI.restartApp()}catch(x){console.error("Error during restart process:",x)}},onRestartLater:()=>{Ne(!1)}}),ut&&He&&v.jsx(gR,{updateState:He,onDismiss:Wa,onRetryUpdate:ui,onManualUpdate:di}),Z&&v.jsx("div",{className:"settings-overlay",onClick:()=>ye(!1),children:v.jsxs("div",{className:"settings-popup",onClick:x=>x.stopPropagation(),children:[v.jsxs("div",{className:"settings-header",children:[v.jsx("h3",{children:" Settings"}),v.jsx("button",{className:"settings-close",onClick:()=>ye(!1),children:""})]}),v.jsxs("div",{className:"settings-content",children:[v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"Start the app when Windows starts",children:[v.jsx("span",{className:"setting-title",children:"Launch at startup"}),v.jsxs("label",{className:"toggle-switch",children:[v.jsx("input",{type:"checkbox",checked:Hc,onChange:Os}),v.jsx("span",{className:"toggle-slider"})]})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"Start minimized to system tray",children:[v.jsx("span",{className:"setting-title",children:"Launch in tray directly"}),v.jsxs("label",{className:"toggle-switch",children:[v.jsx("input",{type:"checkbox",checked:Rl,onChange:Dn}),v.jsx("span",{className:"toggle-slider"})]})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"How the app opens on startup",children:[v.jsx("span",{className:"setting-title",children:"Default launch option"}),v.jsxs("select",{className:"setting-select",value:Bc,onChange:xn,title:"How the app opens on startup",children:[v.jsx("option",{value:"window",children:"Window"}),v.jsx("option",{value:"maximized",children:"Full screen"})]})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"App appearance and colors",children:[v.jsx("span",{className:"setting-title",children:"Theme"}),v.jsxs("select",{className:"setting-select",value:qa,onChange:Pc,title:"App appearance and colors",children:[v.jsx("option",{value:"dark",children:"Dark"}),v.jsx("option",{value:"light",children:"Light"}),v.jsx("option",{value:"system",children:"System"})]})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"Sound played when notification popup appears",children:[v.jsx("span",{className:"setting-title",children:"Notification sound"}),v.jsxs("div",{className:"sound-setting-controls",children:[v.jsxs("select",{className:"setting-select",value:ai,onChange:Nt,title:"Sound played when notification popup appears",children:[v.jsx("option",{value:"none",children:"None"}),v.jsx("option",{value:"alien-sound",children:"Alien Sound"}),v.jsx("option",{value:"bong-chime",children:"Bong Chime"}),v.jsx("option",{value:"cartoon-dash",children:"Cartoon Dash"}),v.jsx("option",{value:"drip-echo",children:"Drip Echo"}),v.jsx("option",{value:"glass-ding",children:"Glass Ding"}),v.jsx("option",{value:"light-min",children:"Light Minimal"}),v.jsx("option",{value:"notification-chime",children:"Notification Chime"}),v.jsx("option",{value:"notification-sound-soft",children:"Soft Notification"}),v.jsx("option",{value:"oh-yeah",children:"Oh Yeah"}),v.jsx("option",{value:"sci-fi-bubble",children:"Sci-Fi Bubble"}),v.jsx("option",{value:"thai-bird",children:"Thai Bird"}),v.jsx("option",{value:"three-note-doorbell",children:"Three Note Doorbell"}),v.jsx("option",{value:"woohoo",children:"Woohoo"})]}),ai!=="none"&&v.jsx("button",{className:"play-sound-button",onClick:()=>vn(),title:"Preview selected sound",children:""})]})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"Configure Firebase database connection",children:[v.jsx("span",{className:"setting-title",children:"Firebase Configuration"}),v.jsx("button",{className:"firebase-config-button",onClick:On,title:"Edit Firebase database configuration",children:" Edit Config"})]})}),v.jsx("div",{className:"setting-item",children:v.jsxs("div",{className:"setting-label",title:"Check for app updates",children:[v.jsx("span",{className:"setting-title",children:"App Updates"}),v.jsxs("div",{className:"update-setting-controls",children:[v.jsx("button",{className:"update-check-button",onClick:ci,disabled:te.isChecking,title:"Check for new app version",children:te.isChecking?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"loading-spinner",children:""}),"Checking..."]}):v.jsx(v.Fragment,{children:" Check for Updates"})}),te.result&&v.jsx("div",{className:"update-check-result",children:te.result.hasUpdate?v.jsx("span",{className:"update-available",children:" Update available!"}):te.result.error?v.jsx("span",{className:"update-error",children:" Check failed"}):v.jsx("span",{className:"update-latest",children:" You have the latest version"})})]})]})}),v.jsxs("div",{className:"settings-version-content",children:["Current Version: v",ke]})]})]})}),v.jsx("div",{className:`header-area ${de&&Ee?"sidebar-active":""}`,style:{"--header-margin-left":de&&Ee?`${O}px`:"0px","--header-width":de&&Ee?`calc(100% - ${O}px)`:"100%"},children:v.jsxs("h1",{className:`title-draggable ${Z?"settings-open":""}`,children:[v.jsx("img",{src:Nl,alt:"Office or Home Office",className:"app-icon"}),v.jsx("span",{className:"title-text",children:"Office or Home Office"})]})}),v.jsxs("div",{className:`content-area ${de&&Ee?"sidebar-active":""}`,style:{"--content-margin-left":de&&Ee?`${O}px`:"0px","--content-width":de&&Ee?`calc(100% - ${O}px)`:"100%"},children:[f?v.jsx("div",{className:"name-section-container",style:{marginBottom:"1rem"},children:v.jsxs("div",{className:"name-display-row",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Name:"})," ",s]}),v.jsx("button",{className:"secondary",onClick:dt,children:"Edit Name"})]})}):v.jsx("div",{className:"name-input-container",style:{marginBottom:"1rem"},children:v.jsxs("div",{className:"name-input-section",children:[v.jsx("input",{type:"text",placeholder:"Your name",value:s,onChange:x=>t(x.target.value)}),v.jsx("button",{className:"primary",onClick:bn,children:"Save name"})]})}),v.jsxs("div",{className:"action-buttons",style:{marginBottom:"2rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[v.jsxs("div",{className:"button-row-container",style:{display:"flex",gap:"1rem",alignItems:"center"},children:[v.jsx("button",{className:"primary",style:{backgroundColor:"green",minWidth:"140px",height:"40px",padding:"0.6rem 1rem",whiteSpace:"nowrap"},onClick:()=>Qa("yes"),children:"Office"}),v.jsx("button",{className:"primary",style:{backgroundColor:"red",minWidth:"140px",height:"40px",padding:"0.6rem 1rem",whiteSpace:"nowrap"},onClick:()=>Qa("no"),children:"Home Office"})]}),v.jsx("div",{className:"button-row-container",style:{display:"flex",justifyContent:"center"},children:v.jsx("button",{className:"primary",style:{backgroundColor:"orange",minWidth:"140px",height:"40px",padding:"0.6rem 1rem"},onClick:()=>Qa("undecided"),children:"Not Sure Yet"})})]}),ve&&v.jsx("div",{className:"notification-summary",style:{whiteSpace:"pre-line",color:"#2e7d32",textAlign:"center"},children:ve}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsxs("div",{className:"accordion-header",onClick:()=>K(!q),style:{userSelect:"none"},children:["Push-up Notifications ",q?"":""]}),q&&v.jsxs("div",{className:"notifications-container",children:[R.map((x,P)=>v.jsx("div",{className:"notification-card",children:v.jsxs("div",{className:"notification-row",children:[v.jsx("label",{style:{fontSize:"0.85rem",minWidth:"60px",color:"#666"},children:"HH:MM"}),v.jsxs("div",{className:"time-picker-container",style:{display:"flex",gap:"5px",alignItems:"center"},children:[v.jsxs("select",{value:x.time?x.time.split(":")[0]:"",onChange:oe=>{const $=[...R],ae=x.time&&x.time.split(":")[1]||"00";$[P].time=`${oe.target.value.padStart(2,"0")}:${ae}`,k($)},style:{fontFamily:"monospace",fontSize:"0.9rem",padding:"4px 8px",border:"1px solid #ccc",borderRadius:"4px",width:"60px"},children:[v.jsx("option",{value:"",disabled:!0,children:"HH"}),Array.from({length:24},(oe,$)=>v.jsx("option",{value:$.toString().padStart(2,"0"),children:$.toString().padStart(2,"0")},$))]}),v.jsx("span",{style:{color:"#666"},children:":"}),v.jsxs("select",{value:x.time?x.time.split(":")[1]:"",onChange:oe=>{const $=[...R],ae=x.time&&x.time.split(":")[0]||"00";$[P].time=`${ae}:${oe.target.value.padStart(2,"0")}`,k($)},style:{fontFamily:"monospace",fontSize:"0.9rem",padding:"4px 8px",border:"1px solid #ccc",borderRadius:"4px",width:"60px"},children:[v.jsx("option",{value:"",disabled:!0,children:"MM"}),Array.from({length:60},(oe,$)=>v.jsx("option",{value:$.toString().padStart(2,"0"),children:$.toString().padStart(2,"0")},$))]}),v.jsx("span",{style:{fontSize:"1.1rem",color:"#666",marginLeft:"5px"},children:""})]}),v.jsx("span",{style:{fontSize:"0.85rem",minWidth:"30px"},children:"Zile:"}),v.jsx("div",{className:"checkbox-group",children:["L","Ma","Mi","J","V"].map((oe,$)=>v.jsxs("label",{children:[v.jsx("input",{type:"checkbox",checked:x.days.includes(oe),onChange:ae=>{const Se=[...R];ae.target.checked?Se[P].days.push(oe):Se[P].days=Se[P].days.filter(Be=>Be!==oe),k(Se)}}),oe]},$))}),v.jsx("button",{className:"danger",onClick:()=>oi(P),title:"Delete notification",style:{fontSize:"1rem",minWidth:"30px"},children:""})]})},P)),v.jsx("div",{style:{textAlign:"center",marginTop:"1rem"},children:v.jsx("button",{className:"primary",onClick:Et,children:"+ Add notification"})})]})]}),m&&v.jsx("div",{className:"status-message",style:{color:y,marginTop:"10px",textAlign:"center"},children:m}),v.jsx(jR,{statuses:o,tomorrowDate:Ms,nextWorkingDayName:Fa}),v.jsxs("div",{className:"app-version",children:["v",ke]})]}),xs&&v.jsx(Ov,{onConfigSaved:fi,onClose:()=>Kt(!1),currentConfig:Va})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`container ${de?"maximized":""}`,children:[v.jsx(gf,{}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"20px",textAlign:"center"},children:[v.jsx("img",{src:Nl,alt:"Office or Home Office",className:"app-icon welcome-icon"}),v.jsx("h2",{children:"Welcome to Office or Home Office"}),v.jsx("p",{children:"To get started, please configure your Firebase connection."}),Al&&v.jsx("p",{style:{color:"var(--text-error)",margin:"10px 0"},children:Al}),v.jsx("button",{className:"primary",onClick:On,style:{marginTop:"20px"},children:"Configure Firebase"})]})]}),xs&&v.jsx(Ov,{onConfigSaved:fi,onClose:()=>Kt(!1),currentConfig:Va})]})}bE.createRoot(document.getElementById("root")).render(v.jsx(H.StrictMode,{children:v.jsx($R,{})}));
